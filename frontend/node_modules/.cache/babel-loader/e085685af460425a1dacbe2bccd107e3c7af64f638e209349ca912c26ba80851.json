{"ast":null,"code":"var _jsxFileName = \"C:\\\\Bncrentcar\\\\frontend\\\\src\\\\components\\\\NewRental.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport PhotoUpload from './PhotoUpload'; // Componente esterno per l'upload\nimport { ArrowLeft, ArrowRight, Save, User, Car, Calendar, DollarSign, CreditCard, Shield, Camera, CheckCircle, UserPlus, Locate, Gauge, Info, ClipboardList, Package, FileText, Users, MapPin, Tag, Percent } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NewRental = () => {\n  _s();\n  const navigate = useNavigate();\n  const totalSteps = 11;\n  const [currentStep, setCurrentStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n\n  // STATI DATI ESTERNI\n  const [customers, setCustomers] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n  const [initialDataLoading, setInitialDataLoading] = useState(true);\n\n  // STATO COMPLETO DEL NOLEGGIO (allineato con i campi del database)\n  const [formData, setFormData] = useState({\n    // Step 1: Cliente\n    customer_id: '',\n    // Step 2: Veicolo\n    vehicle_id: '',\n    // Step 3: Date e Luoghi\n    pickup_date: '',\n    expected_return_date: '',\n    actual_return_date: null,\n    pickup_location: 'BNC Energy Rent Car',\n    return_location: 'BNC Energy Rent Car',\n    status: 'pending',\n    // Step 4: Chilometraggio\n    pickup_km: '',\n    // NOT NULL\n    return_km: null,\n    km_included: 'Illimitati',\n    // Step 5: Dettagli Tecnici Ritiro (Carburante, Condizione)\n    pickup_fuel_level: '100',\n    return_fuel_level: null,\n    pickup_condition_notes: '',\n    // Step 6: Costi e Tariffe (Numerici, gestiti come stringhe per l'input)\n    daily_rate: '0.00',\n    deposit_amount: '0.00',\n    delivery_cost: '0.00',\n    fuel_charge: '0.00',\n    after_hours_charge: '0.00',\n    extras_charge: '0.00',\n    extra_km_charge: '0.00',\n    franchise_charge: '0.00',\n    discount: '0.00',\n    // In percentuale\n    total_amount_due: '0.00',\n    // Step 7: Accessori (Extras)\n    extras_description: '',\n    // Step 8: Conducente Aggiuntivo\n    additional_driver_full_name: '',\n    additional_driver_license_number: '',\n    // Step 9: Dati Pagamento (CC/Metodo)\n    payment_method: 'card',\n    cc_last_four: '',\n    cc_expiry_date: '',\n    cc_auth_code: '',\n    // Step 10: Foto - solo note sul modulo\n    // Le foto sono gestite dal componente PhotoUpload\n\n    // Step 11: Termini e Note\n    notes: '',\n    contract_signed: false,\n    privacy_consent: false\n  });\n\n  // Funzione per caricare i dati (Clienti e Veicoli)\n  const fetchInitialData = async () => {\n    setInitialDataLoading(true);\n    try {\n      const [customersResponse, vehiclesResponse] = await Promise.all([customersAPI.getAll(), vehiclesAPI.getAll({\n        available_only: true\n      })]);\n      setCustomers(customersResponse.data.data);\n      setVehicles(vehiclesResponse.data.data);\n    } catch (error) {\n      console.error(\"❌ Errore nel caricamento dei dati iniziali:\", error);\n      toast.error('Impossibile caricare clienti o veicoli.');\n    } finally {\n      setInitialDataLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchInitialData();\n  }, []);\n\n  // CORREZIONE: Gestione dei tipi di input\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    let processedValue = value;\n    if (type === 'checkbox') {\n      processedValue = checked;\n    }\n    // NOTA: I campi numerici sono gestiti come stringhe nello stato per permettere input decimali\n\n    setFormData(prev => {\n      const newState = {\n        ...prev,\n        [name]: processedValue\n      };\n\n      // Logica specifica quando viene selezionato un veicolo (Passo 2)\n      if (name === 'vehicle_id' && value) {\n        const selectedVehicle = vehicles.find(v => v.id.toString() === value);\n        if (selectedVehicle) {\n          // Popola i campi finanziari e KM di ritiro\n          // Converti i numeri a stringhe con decimali per gli input\n          newState.daily_rate = String(selectedVehicle.daily_rate) || '0.00';\n          newState.deposit_amount = String(selectedVehicle.deposit_amount) || '0.00';\n          newState.pickup_km = String(selectedVehicle.current_km) || '';\n        }\n      }\n      return newState;\n    });\n  };\n  const handleNext = () => {\n    // Validazione rigorosa per i passi essenziali\n    switch (currentStep) {\n      case 1:\n        if (!formData.customer_id) {\n          toast.error(\"Seleziona un cliente per continuare.\");\n          return;\n        }\n        break;\n      case 2:\n        if (!formData.vehicle_id) {\n          toast.error(\"Seleziona un veicolo disponibile.\");\n          return;\n        }\n        break;\n      case 3:\n        // Controllo date\n        const pickup = new Date(formData.pickup_date);\n        const expectedReturn = new Date(formData.expected_return_date);\n        if (!formData.pickup_date || !formData.expected_return_date || pickup >= expectedReturn) {\n          toast.error(\"Le date di ritiro e riconsegna sono obbligatorie e la riconsegna deve essere successiva al ritiro.\");\n          return;\n        }\n        break;\n      case 4:\n        if (!formData.pickup_km || isNaN(parseInt(formData.pickup_km))) {\n          toast.error(\"Inserisci il chilometraggio di ritiro.\");\n          return;\n        }\n        break;\n      default:\n        break;\n    }\n    setCurrentStep(currentStep + 1);\n  };\n  const handlePrev = () => {\n    setCurrentStep(currentStep - 1);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (loading) return;\n    if (!formData.contract_signed || !formData.privacy_consent) {\n      toast.error(\"È necessario accettare i termini e l'informativa sulla privacy per finalizzare il noleggio.\");\n      return;\n    }\n    setLoading(true);\n    try {\n      // CORREZIONE: Conversione dei campi numerici e decimali per l'API\n      const rentalData = Object.keys(formData).reduce((acc, key) => {\n        // Campi decimali (es. costi, tariffe)\n        if (['daily_rate', 'deposit_amount', 'delivery_cost', 'fuel_charge', 'after_hours_charge', 'extras_charge', 'extra_km_charge', 'franchise_charge', 'discount', 'total_amount_due'].includes(key)) {\n          acc[key] = parseFloat(formData[key]) || 0; // Cast a float\n          // Campi interi (es. km, livello carburante)\n        } else if (['pickup_km', 'return_km', 'pickup_fuel_level', 'return_fuel_level'].includes(key)) {\n          // Converti in intero, se la stringa è vuota, passa null\n          acc[key] = formData[key] !== null && formData[key] !== '' ? parseInt(formData[key]) : null;\n        } else {\n          acc[key] = formData[key];\n        }\n        return acc;\n      }, {});\n      const response = await rentalsAPI.create(rentalData);\n      toast.success('Noleggio creato con successo!');\n      navigate(`/rentals/${response.data.data.id}`);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"❌ Errore creazione noleggio:\", error);\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Si è verificato un errore durante la creazione del noleggio.';\n      toast.error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ===========================================\n  // RENDERIZZAZIONE DEI PASSI\n  // ===========================================\n\n  // -- Passo 1: Selezione Cliente\n  const renderStep1 = () => {\n    const selectedCustomer = customers.find(c => c.id.toString() === formData.customer_id);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"mb-4 text-primary\",\n        children: [/*#__PURE__*/_jsxDEV(User, {\n          size: 20,\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 43\n        }, this), \" 1. Selezione Cliente\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8 form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: [\"Cliente \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 49\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"customer_id\",\n          className: \"form-control\",\n          value: formData.customer_id,\n          onChange: handleChange,\n          disabled: initialDataLoading,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: initialDataLoading ? 'Caricamento clienti...' : 'Seleziona un cliente'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), customers.map(customer => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: customer.id,\n            children: [customer.full_name, \" (\", customer.fiscal_code, \")\"]\n          }, customer.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 form-group d-flex align-items-end\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => navigate('/customers/new'),\n          className: \"btn btn-outline-primary w-100\",\n          children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), \" Nuovo Cliente\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), selectedCustomer && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card bg-light p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"text-dark\",\n            children: \"Dettagli Cliente (Anteprima):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(MapPin, {\n              size: 16,\n              className: \"me-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 37\n            }, this), \" **Residenza:** \", selectedCustomer.address, \", \", selectedCustomer.city]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(Shield, {\n              size: 16,\n              className: \"me-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 37\n            }, this), \" **Patente N:** \", selectedCustomer.license_number || 'N/D', \" (Scad. \", selectedCustomer.license_expiry_date ? new Date(selectedCustomer.license_expiry_date).toLocaleDateString() : 'N/D', \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this);\n  };\n\n  // -- Passo 2: Selezione Veicolo\n  const renderStep2 = () => {\n    const selectedVehicle = vehicles.find(v => v.id.toString() === formData.vehicle_id);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"mb-4 text-primary\",\n        children: [/*#__PURE__*/_jsxDEV(Car, {\n          size: 20,\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 43\n        }, this), \" 2. Selezione Veicolo\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8 form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: [\"Veicolo \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 49\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vehicle_id\",\n          className: \"form-control\",\n          value: formData.vehicle_id,\n          onChange: handleChange,\n          disabled: initialDataLoading,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: initialDataLoading ? 'Caricamento veicoli...' : 'Seleziona un veicolo disponibile'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), vehicles.map(vehicle => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: vehicle.id,\n            children: [vehicle.brand, \" \", vehicle.model, \" (\", vehicle.license_plate, \") - \", vehicle.category_name || 'N/D']\n          }, vehicle.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), selectedVehicle && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card bg-light p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"text-dark\",\n            children: \"Dettagli Veicolo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(Gauge, {\n              size: 16,\n              className: \"me-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 37\n            }, this), \" **Km:** \", selectedVehicle.current_km ? selectedVehicle.current_km.toLocaleString() : 'N/D', \" km\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n              size: 16,\n              className: \"me-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 37\n            }, this), \" **Tariffa Giornaliera Base:** \\u20AC\", selectedVehicle.daily_rate || '0.00']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(Shield, {\n              size: 16,\n              className: \"me-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 37\n            }, this), \" **Deposito richiesto:** \\u20AC\", selectedVehicle.deposit_amount || '0.00']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this);\n  };\n\n  // -- Passo 3: Date e Luoghi\n  const renderStep3 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(Calendar, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 43\n      }, this), \" 3. Date e Luoghi\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: [\"Data e Ora Ritiro \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 61\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"datetime-local\",\n        name: \"pickup_date\",\n        className: \"form-control\",\n        value: formData.pickup_date,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: [\"Data e Ora Riconsegna Prevista \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 74\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"datetime-local\",\n        name: \"expected_return_date\",\n        className: \"form-control\",\n        value: formData.expected_return_date,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: [/*#__PURE__*/_jsxDEV(Locate, {\n          size: 16,\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 43\n        }, this), \" Luogo Ritiro\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"pickup_location\",\n        className: \"form-control\",\n        value: formData.pickup_location,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: [/*#__PURE__*/_jsxDEV(Locate, {\n          size: 16,\n          className: \"me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 43\n        }, this), \" Luogo Riconsegna\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"return_location\",\n        className: \"form-control\",\n        value: formData.return_location,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 5\n  }, this);\n\n  // -- Passo 4: Chilometraggio\n  const renderStep4 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(Gauge, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 43\n      }, this), \" 4. Chilometraggio\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: [\"Km Ritiro (Attuali Veicolo) \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 71\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"pickup_km\",\n        className: \"form-control\",\n        value: formData.pickup_km,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Km Inclusi nel Noleggio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"km_included\",\n        className: \"form-control\",\n        value: formData.km_included,\n        onChange: handleChange,\n        placeholder: \"Es. Illimitati o 1000 km\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 327,\n    columnNumber: 5\n  }, this);\n\n  // -- Passo 5: Dettagli Tecnici Ritiro (Carburante, Condizione)\n  const renderStep5 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(Info, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 43\n      }, this), \" 5. Condizione Veicolo al Ritiro\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Livello Carburante (%)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"pickup_fuel_level\",\n        className: \"form-control\",\n        value: formData.pickup_fuel_level,\n        onChange: handleChange,\n        min: \"0\",\n        max: \"100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Stato Iniziale / Note Danni Preesistenti\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"pickup_condition_notes\",\n        className: \"form-control\",\n        value: formData.pickup_condition_notes,\n        onChange: handleChange,\n        rows: \"3\",\n        placeholder: \"Descrivi graffi, ammaccature o eventuali anomalie al momento del ritiro.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 342,\n    columnNumber: 5\n  }, this);\n\n  // -- Passo 6: Costi e Tariffe (I campi sono stringhe per l'input)\n  const renderStep6 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 43\n      }, this), \" 6. Costi e Tariffe\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-4 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Tariffa Giornaliera (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"daily_rate\",\n          className: \"form-control\",\n          value: formData.daily_rate,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-4 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Deposito (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"deposit_amount\",\n          className: \"form-control\",\n          value: formData.deposit_amount,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-4 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Sconto (%)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"discount\",\n          className: \"form-control\",\n          value: formData.discount,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12\",\n      children: /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"mb-3 text-secondary\",\n      children: [/*#__PURE__*/_jsxDEV(Tag, {\n        size: 18,\n        className: \"me-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 45\n      }, this), \" Costi Aggiuntivi:\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-3 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Costo Consegna (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"delivery_cost\",\n          className: \"form-control\",\n          value: formData.delivery_cost,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-3 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Costo Carburante (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"fuel_charge\",\n          className: \"form-control\",\n          value: formData.fuel_charge,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-3 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Extra Orari (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"after_hours_charge\",\n          className: \"form-control\",\n          value: formData.after_hours_charge,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-3 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Altri Extras Totale (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"extras_charge\",\n          className: \"form-control\",\n          value: formData.extras_charge,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Franchigia Danni (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"franchise_charge\",\n          className: \"form-control\",\n          value: formData.franchise_charge,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Costo Km Extra (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"extra_km_charge\",\n          className: \"form-control\",\n          value: formData.extra_km_charge,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 mt-4 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label h5 text-success\",\n        children: \"Importo Totale Dovuto (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group input-group-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-group-text\",\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          name: \"total_amount_due\",\n          className: \"form-control text-center\",\n          value: formData.total_amount_due,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 5\n  }, this);\n\n  // -- Passo 7: Accessori (Extras)\n  const renderStep7 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(Package, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 43\n      }, this), \" 7. Accessori e Servizi Aggiuntivi\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Descrizione Accessori/Servizi (Es. Seggiolino, GPS)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"extras_description\",\n        className: \"form-control\",\n        value: formData.extras_description,\n        onChange: handleChange,\n        rows: \"4\",\n        placeholder: \"Lista gli accessori che sono stati forniti con il veicolo e i servizi aggiuntivi.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n        className: \"form-text text-muted\",\n        children: \"Nota: Assicurati che il costo totale di questi elementi sia incluso nel campo \\\"Extras Charge\\\" nel Passo 6.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 440,\n    columnNumber: 5\n  }, this);\n\n  // -- Passo 8: Conducente Aggiuntivo\n  const renderStep8 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(Users, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 43\n      }, this), \" 8. Conducente Aggiuntivo\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Nome Completo Conducente Aggiuntivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"additional_driver_full_name\",\n        className: \"form-control\",\n        value: formData.additional_driver_full_name,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Numero Patente Conducente Aggiuntivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"additional_driver_license_number\",\n        className: \"form-control\",\n        value: formData.additional_driver_license_number,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 mt-2\",\n      children: /*#__PURE__*/_jsxDEV(\"small\", {\n        className: \"form-text text-muted\",\n        children: \"Verificare la validit\\xE0 della patente del conducente aggiuntivo.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 452,\n    columnNumber: 5\n  }, this);\n\n  // -- Passo 9: Dati Pagamento (CC/Metodo)\n  const renderStep9 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 43\n      }, this), \" 9. Dati Pagamento e Riferimento\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Metodo di Pagamento Principale\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"payment_method\",\n        className: \"form-control\",\n        value: formData.payment_method,\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"card\",\n          children: \"Carta di Credito/Debito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"cash\",\n          children: \"Contanti\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"transfer\",\n          children: \"Bonifico Bancario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"deposit\",\n          children: \"Solo Deposito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 9\n    }, this), formData.payment_method === 'card' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Ultime 4 cifre Carta (riferimento)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"cc_last_four\",\n          className: \"form-control\",\n          value: formData.cc_last_four,\n          onChange: handleChange,\n          maxLength: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Data Scadenza Carta (MM/AA)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"cc_expiry_date\",\n          className: \"form-control\",\n          value: formData.cc_expiry_date,\n          onChange: handleChange,\n          placeholder: \"MM/YY\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Codice Autorizzazione/Transazione\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"cc_auth_code\",\n          className: \"form-control\",\n          value: formData.cc_auth_code,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 470,\n    columnNumber: 5\n  }, this);\n\n  // -- Passo 10: Documentazione Foto (Simulata con componente esterno)\n  const renderStep10 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(Camera, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 43\n      }, this), \" 10. Documentazione Fotografica (Ritiro)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted\",\n        children: \"Utilizza il componente di upload per allegare foto del veicolo, della patente e della carta d'identit\\xE0 al momento del ritiro.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12\",\n      children: /*#__PURE__*/_jsxDEV(PhotoUpload, {\n        rentalId: \"new\",\n        type: \"pickup\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 504,\n    columnNumber: 5\n  }, this);\n\n  // -- Passo 11: Revisione e Firma\n  const renderStep11 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary\",\n      children: [/*#__PURE__*/_jsxDEV(FileText, {\n        size: 20,\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 43\n      }, this), \" 11. Revisione e Accettazione Legale\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Note Aggiuntive al Contratto / Istruzioni Speciali\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"notes\",\n        className: \"form-control\",\n        value: formData.notes,\n        onChange: handleChange,\n        rows: \"3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"text-dark\",\n        children: \"Termini e Condizioni\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-check-input\",\n          type: \"checkbox\",\n          name: \"contract_signed\",\n          checked: formData.contract_signed,\n          onChange: handleChange,\n          id: \"contractSignedCheck\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"contractSignedCheck\",\n          children: [\"Ho letto e accettato il contratto di noleggio \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 67\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-check-input\",\n          type: \"checkbox\",\n          name: \"privacy_consent\",\n          checked: formData.privacy_consent,\n          onChange: handleChange,\n          id: \"privacyConsentCheck\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"privacyConsentCheck\",\n          children: [\"Acconsento al trattamento dei dati personali (Privacy Policy) \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: \"*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 83\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 518,\n    columnNumber: 5\n  }, this);\n\n  // Funzione che gestisce la visualizzazione dei passi\n  const renderStep = () => {\n    if (initialDataLoading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center p-5\",\n        children: \"Caricamento dati iniziali in corso...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 16\n      }, this);\n    }\n    switch (currentStep) {\n      case 1:\n        return renderStep1();\n      case 2:\n        return renderStep2();\n      case 3:\n        return renderStep3();\n      case 4:\n        return renderStep4();\n      case 5:\n        return renderStep5();\n      case 6:\n        return renderStep6();\n      case 7:\n        return renderStep7();\n      case 8:\n        return renderStep8();\n      case 9:\n        return renderStep9();\n      case 10:\n        return renderStep10();\n      case 11:\n        return renderStep11();\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Passo non trovato.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 23\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"h3 mb-0 text-gray-800\",\n        children: [/*#__PURE__*/_jsxDEV(ClipboardList, {\n          size: 24,\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), \" Nuovo Noleggio\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/rentals'),\n        className: \"btn btn-secondary\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ms-2 d-none d-sm-inline\",\n          children: \"Lista Noleggi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card shadow mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header py-3\",\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"m-0 font-weight-bold text-primary\",\n              children: [\"Passo \", currentStep, \" di \", totalSteps]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: e => e.preventDefault(),\n              children: renderStep()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-footer d-flex justify-content-between\",\n            children: [currentStep > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePrev,\n              className: \"btn btn-secondary\",\n              disabled: loading,\n              children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 19\n              }, this), \"Indietro\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this), currentStep < totalSteps && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNext,\n              className: \"btn btn-primary\",\n              disabled: loading || initialDataLoading,\n              style: {\n                marginLeft: 'auto'\n              },\n              children: [\"Avanti\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 17\n            }, this), currentStep === totalSteps && /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              onClick: handleSubmit,\n              className: \"btn btn-success\",\n              disabled: loading || !formData.contract_signed || !formData.privacy_consent,\n              style: {\n                marginLeft: 'auto'\n              },\n              children: loading ? 'Creazione...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 23\n                }, this), \"Crea Noleggio\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 566,\n    columnNumber: 5\n  }, this);\n};\n_s(NewRental, \"oHOM5TxKFSWnggZiZ6kDHtu0pMw=\", false, function () {\n  return [useNavigate];\n});\n_c = NewRental;\nexport default NewRental;\nvar _c;\n$RefreshReg$(_c, \"NewRental\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","rentalsAPI","customersAPI","vehiclesAPI","toast","PhotoUpload","ArrowLeft","ArrowRight","Save","User","Car","Calendar","DollarSign","CreditCard","Shield","Camera","CheckCircle","UserPlus","Locate","Gauge","Info","ClipboardList","Package","FileText","Users","MapPin","Tag","Percent","jsxDEV","_jsxDEV","Fragment","_Fragment","NewRental","_s","navigate","totalSteps","currentStep","setCurrentStep","loading","setLoading","customers","setCustomers","vehicles","setVehicles","initialDataLoading","setInitialDataLoading","formData","setFormData","customer_id","vehicle_id","pickup_date","expected_return_date","actual_return_date","pickup_location","return_location","status","pickup_km","return_km","km_included","pickup_fuel_level","return_fuel_level","pickup_condition_notes","daily_rate","deposit_amount","delivery_cost","fuel_charge","after_hours_charge","extras_charge","extra_km_charge","franchise_charge","discount","total_amount_due","extras_description","additional_driver_full_name","additional_driver_license_number","payment_method","cc_last_four","cc_expiry_date","cc_auth_code","notes","contract_signed","privacy_consent","fetchInitialData","customersResponse","vehiclesResponse","Promise","all","getAll","available_only","data","error","console","handleChange","e","name","value","type","checked","target","processedValue","prev","newState","selectedVehicle","find","v","id","toString","String","current_km","handleNext","pickup","Date","expectedReturn","isNaN","parseInt","handlePrev","handleSubmit","preventDefault","rentalData","Object","keys","reduce","acc","key","includes","parseFloat","response","create","success","_error$response","_error$response$data","errorMessage","message","renderStep1","selectedCustomer","c","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onChange","disabled","map","customer","full_name","fiscal_code","onClick","address","city","license_number","license_expiry_date","toLocaleDateString","renderStep2","vehicle","brand","model","license_plate","category_name","toLocaleString","renderStep3","required","renderStep4","placeholder","renderStep5","min","max","rows","renderStep6","step","renderStep7","renderStep8","renderStep9","maxLength","renderStep10","rentalId","renderStep11","htmlFor","renderStep","onSubmit","style","marginLeft","_c","$RefreshReg$"],"sources":["C:/Bncrentcar/frontend/src/components/NewRental.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\r\nimport toast from 'react-hot-toast';\r\nimport PhotoUpload from './PhotoUpload'; // Componente esterno per l'upload\r\nimport { \r\n  ArrowLeft, ArrowRight, Save, User, Car, Calendar,\r\n  DollarSign, CreditCard, Shield, Camera, CheckCircle, \r\n  UserPlus, Locate, Gauge, Info, ClipboardList, Package,\r\n  FileText, Users, MapPin, Tag, Percent\r\n} from 'lucide-react';\r\n\r\nconst NewRental = () => {\r\n  const navigate = useNavigate();\r\n  const totalSteps = 11;\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // STATI DATI ESTERNI\r\n  const [customers, setCustomers] = useState([]);\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [initialDataLoading, setInitialDataLoading] = useState(true);\r\n\r\n  // STATO COMPLETO DEL NOLEGGIO (allineato con i campi del database)\r\n  const [formData, setFormData] = useState({\r\n    // Step 1: Cliente\r\n    customer_id: '',\r\n    \r\n    // Step 2: Veicolo\r\n    vehicle_id: '',\r\n    \r\n    // Step 3: Date e Luoghi\r\n    pickup_date: '',\r\n    expected_return_date: '',\r\n    actual_return_date: null,\r\n    pickup_location: 'BNC Energy Rent Car',\r\n    return_location: 'BNC Energy Rent Car',\r\n    status: 'pending', \r\n    \r\n    // Step 4: Chilometraggio\r\n    pickup_km: '', // NOT NULL\r\n    return_km: null,\r\n    km_included: 'Illimitati',\r\n    \r\n    // Step 5: Dettagli Tecnici Ritiro (Carburante, Condizione)\r\n    pickup_fuel_level: '100', \r\n    return_fuel_level: null,\r\n    pickup_condition_notes: '',\r\n    \r\n    // Step 6: Costi e Tariffe (Numerici, gestiti come stringhe per l'input)\r\n    daily_rate: '0.00',\r\n    deposit_amount: '0.00',\r\n    delivery_cost: '0.00',\r\n    fuel_charge: '0.00',\r\n    after_hours_charge: '0.00',\r\n    extras_charge: '0.00',\r\n    extra_km_charge: '0.00',\r\n    franchise_charge: '0.00', \r\n    discount: '0.00', // In percentuale\r\n    total_amount_due: '0.00',\r\n\r\n    // Step 7: Accessori (Extras)\r\n    extras_description: '', \r\n\r\n    // Step 8: Conducente Aggiuntivo\r\n    additional_driver_full_name: '',\r\n    additional_driver_license_number: '',\r\n    \r\n    // Step 9: Dati Pagamento (CC/Metodo)\r\n    payment_method: 'card', \r\n    cc_last_four: '',\r\n    cc_expiry_date: '',\r\n    cc_auth_code: '',\r\n    \r\n    // Step 10: Foto - solo note sul modulo\r\n    // Le foto sono gestite dal componente PhotoUpload\r\n    \r\n    // Step 11: Termini e Note\r\n    notes: '',\r\n    contract_signed: false, \r\n    privacy_consent: false, \r\n  });\r\n\r\n  // Funzione per caricare i dati (Clienti e Veicoli)\r\n  const fetchInitialData = async () => {\r\n    setInitialDataLoading(true);\r\n    try {\r\n      const [customersResponse, vehiclesResponse] = await Promise.all([\r\n        customersAPI.getAll(),\r\n        vehiclesAPI.getAll({ available_only: true })\r\n      ]);\r\n      \r\n      setCustomers(customersResponse.data.data);\r\n      setVehicles(vehiclesResponse.data.data);\r\n    } catch (error) {\r\n      console.error(\"❌ Errore nel caricamento dei dati iniziali:\", error);\r\n      toast.error('Impossibile caricare clienti o veicoli.');\r\n    } finally {\r\n        setInitialDataLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchInitialData();\r\n  }, []);\r\n\r\n  // CORREZIONE: Gestione dei tipi di input\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    \r\n    let processedValue = value;\r\n    if (type === 'checkbox') {\r\n        processedValue = checked;\r\n    } \r\n    // NOTA: I campi numerici sono gestiti come stringhe nello stato per permettere input decimali\r\n\r\n    setFormData(prev => {\r\n        const newState = {\r\n            ...prev,\r\n            [name]: processedValue,\r\n        };\r\n        \r\n        // Logica specifica quando viene selezionato un veicolo (Passo 2)\r\n        if (name === 'vehicle_id' && value) {\r\n            const selectedVehicle = vehicles.find(v => v.id.toString() === value);\r\n            if (selectedVehicle) {\r\n                // Popola i campi finanziari e KM di ritiro\r\n                // Converti i numeri a stringhe con decimali per gli input\r\n                newState.daily_rate = String(selectedVehicle.daily_rate) || '0.00';\r\n                newState.deposit_amount = String(selectedVehicle.deposit_amount) || '0.00';\r\n                newState.pickup_km = String(selectedVehicle.current_km) || ''; \r\n            }\r\n        }\r\n        return newState;\r\n    });\r\n  };\r\n  \r\n  const handleNext = () => {\r\n    // Validazione rigorosa per i passi essenziali\r\n    switch (currentStep) {\r\n        case 1: \r\n            if (!formData.customer_id) {\r\n                toast.error(\"Seleziona un cliente per continuare.\");\r\n                return;\r\n            }\r\n            break;\r\n        case 2:\r\n            if (!formData.vehicle_id) {\r\n                toast.error(\"Seleziona un veicolo disponibile.\");\r\n                return;\r\n            }\r\n            break;\r\n        case 3:\r\n            // Controllo date\r\n            const pickup = new Date(formData.pickup_date);\r\n            const expectedReturn = new Date(formData.expected_return_date);\r\n            if (!formData.pickup_date || !formData.expected_return_date || pickup >= expectedReturn) {\r\n                toast.error(\"Le date di ritiro e riconsegna sono obbligatorie e la riconsegna deve essere successiva al ritiro.\");\r\n                return;\r\n            }\r\n            break;\r\n        case 4:\r\n            if (!formData.pickup_km || isNaN(parseInt(formData.pickup_km))) {\r\n                toast.error(\"Inserisci il chilometraggio di ritiro.\");\r\n                return;\r\n            }\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    setCurrentStep(currentStep + 1);\r\n  };\r\n  \r\n  const handlePrev = () => {\r\n    setCurrentStep(currentStep - 1);\r\n  };\r\n  \r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (loading) return;\r\n\r\n    if (!formData.contract_signed || !formData.privacy_consent) {\r\n        toast.error(\"È necessario accettare i termini e l'informativa sulla privacy per finalizzare il noleggio.\");\r\n        return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // CORREZIONE: Conversione dei campi numerici e decimali per l'API\r\n      const rentalData = Object.keys(formData).reduce((acc, key) => {\r\n          // Campi decimali (es. costi, tariffe)\r\n          if (['daily_rate', 'deposit_amount', 'delivery_cost', 'fuel_charge', \r\n               'after_hours_charge', 'extras_charge', 'extra_km_charge', \r\n               'franchise_charge', 'discount', 'total_amount_due'].includes(key)) {\r\n              acc[key] = parseFloat(formData[key]) || 0; // Cast a float\r\n          // Campi interi (es. km, livello carburante)\r\n          } else if (['pickup_km', 'return_km', 'pickup_fuel_level', 'return_fuel_level'].includes(key)) {\r\n              // Converti in intero, se la stringa è vuota, passa null\r\n              acc[key] = formData[key] !== null && formData[key] !== '' ? parseInt(formData[key]) : null;\r\n          } else {\r\n              acc[key] = formData[key];\r\n          }\r\n          return acc;\r\n      }, {});\r\n      \r\n      const response = await rentalsAPI.create(rentalData); \r\n      \r\n      toast.success('Noleggio creato con successo!');\r\n      navigate(`/rentals/${response.data.data.id}`); \r\n    } catch (error) {\r\n      console.error(\"❌ Errore creazione noleggio:\", error);\r\n      const errorMessage = error.response?.data?.message || 'Si è verificato un errore durante la creazione del noleggio.';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ===========================================\r\n  // RENDERIZZAZIONE DEI PASSI\r\n  // ===========================================\r\n  \r\n  // -- Passo 1: Selezione Cliente\r\n  const renderStep1 = () => {\r\n    const selectedCustomer = customers.find(c => c.id.toString() === formData.customer_id);\r\n    return (\r\n      <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><User size={20} className=\"me-2\" /> 1. Selezione Cliente</h4>\r\n        <div className=\"col-md-8 form-group\">\r\n          <label className=\"form-label\">Cliente <span className=\"text-danger\">*</span></label>\r\n          <select \r\n            name=\"customer_id\" \r\n            className=\"form-control\" \r\n            value={formData.customer_id} \r\n            onChange={handleChange}\r\n            disabled={initialDataLoading}\r\n          >\r\n            <option value=\"\">{initialDataLoading ? 'Caricamento clienti...' : 'Seleziona un cliente'}</option>\r\n            {customers.map(customer => (\r\n              <option key={customer.id} value={customer.id}>\r\n                {customer.full_name} ({customer.fiscal_code})\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"col-md-4 form-group d-flex align-items-end\">\r\n          <button type=\"button\" onClick={() => navigate('/customers/new')} className=\"btn btn-outline-primary w-100\">\r\n              <UserPlus size={18} /> Nuovo Cliente\r\n          </button>\r\n        </div>\r\n        {selectedCustomer && (\r\n          <div className=\"col-12 mt-4\">\r\n            <div className=\"card bg-light p-3\">\r\n                <h5 className='text-dark'>Dettagli Cliente (Anteprima):</h5>\r\n                <p className=\"mb-1\"><MapPin size={16} className='me-1'/> **Residenza:** {selectedCustomer.address}, {selectedCustomer.city}</p>\r\n                <p className=\"mb-0\"><Shield size={16} className='me-1'/> **Patente N:** {selectedCustomer.license_number || 'N/D'} (Scad. {selectedCustomer.license_expiry_date ? new Date(selectedCustomer.license_expiry_date).toLocaleDateString() : 'N/D'})</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  \r\n  // -- Passo 2: Selezione Veicolo\r\n  const renderStep2 = () => {\r\n    const selectedVehicle = vehicles.find(v => v.id.toString() === formData.vehicle_id);\r\n    return (\r\n      <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><Car size={20} className=\"me-2\" /> 2. Selezione Veicolo</h4>\r\n        <div className=\"col-md-8 form-group\">\r\n          <label className=\"form-label\">Veicolo <span className=\"text-danger\">*</span></label>\r\n          <select \r\n            name=\"vehicle_id\" \r\n            className=\"form-control\" \r\n            value={formData.vehicle_id} \r\n            onChange={handleChange}\r\n            disabled={initialDataLoading}\r\n          >\r\n            <option value=\"\">{initialDataLoading ? 'Caricamento veicoli...' : 'Seleziona un veicolo disponibile'}</option>\r\n            {vehicles.map(vehicle => (\r\n              <option key={vehicle.id} value={vehicle.id}>\r\n                {vehicle.brand} {vehicle.model} ({vehicle.license_plate}) - {vehicle.category_name || 'N/D'}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {selectedVehicle && (\r\n          <div className=\"col-12 mt-4\">\r\n            <div className=\"card bg-light p-3\">\r\n                <h5 className='text-dark'>Dettagli Veicolo:</h5>\r\n                <p className=\"mb-1\"><Gauge size={16} className='me-1'/> **Km:** {selectedVehicle.current_km ? selectedVehicle.current_km.toLocaleString() : 'N/D'} km</p>\r\n                <p className=\"mb-1\"><DollarSign size={16} className='me-1'/> **Tariffa Giornaliera Base:** €{selectedVehicle.daily_rate || '0.00'}</p>\r\n                <p className=\"mb-0\"><Shield size={16} className='me-1'/> **Deposito richiesto:** €{selectedVehicle.deposit_amount || '0.00'}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  \r\n  // -- Passo 3: Date e Luoghi\r\n  const renderStep3 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><Calendar size={20} className=\"me-2\" /> 3. Date e Luoghi</h4>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Data e Ora Ritiro <span className=\"text-danger\">*</span></label>\r\n            <input type=\"datetime-local\" name=\"pickup_date\" className=\"form-control\" value={formData.pickup_date} onChange={handleChange} required />\r\n        </div>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Data e Ora Riconsegna Prevista <span className=\"text-danger\">*</span></label>\r\n            <input type=\"datetime-local\" name=\"expected_return_date\" className=\"form-control\" value={formData.expected_return_date} onChange={handleChange} required />\r\n        </div>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\"><Locate size={16} className='me-1'/> Luogo Ritiro</label>\r\n            <input type=\"text\" name=\"pickup_location\" className=\"form-control\" value={formData.pickup_location} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\"><Locate size={16} className='me-1'/> Luogo Riconsegna</label>\r\n            <input type=\"text\" name=\"return_location\" className=\"form-control\" value={formData.return_location} onChange={handleChange} />\r\n        </div>\r\n    </div>\r\n  );\r\n  \r\n  // -- Passo 4: Chilometraggio\r\n  const renderStep4 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><Gauge size={20} className=\"me-2\" /> 4. Chilometraggio</h4>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Km Ritiro (Attuali Veicolo) <span className=\"text-danger\">*</span></label>\r\n            <input type=\"number\" name=\"pickup_km\" className=\"form-control\" value={formData.pickup_km} onChange={handleChange} required />\r\n        </div>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Km Inclusi nel Noleggio</label>\r\n            <input type=\"text\" name=\"km_included\" className=\"form-control\" value={formData.km_included} onChange={handleChange} placeholder=\"Es. Illimitati o 1000 km\" />\r\n        </div>\r\n    </div>\r\n  );\r\n  \r\n  // -- Passo 5: Dettagli Tecnici Ritiro (Carburante, Condizione)\r\n  const renderStep5 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><Info size={20} className=\"me-2\" /> 5. Condizione Veicolo al Ritiro</h4>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Livello Carburante (%)</label>\r\n            <input type=\"number\" name=\"pickup_fuel_level\" className=\"form-control\" value={formData.pickup_fuel_level} onChange={handleChange} min=\"0\" max=\"100\" />\r\n        </div>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Stato Iniziale / Note Danni Preesistenti</label>\r\n            <textarea name=\"pickup_condition_notes\" className=\"form-control\" value={formData.pickup_condition_notes} onChange={handleChange} rows=\"3\" placeholder=\"Descrivi graffi, ammaccature o eventuali anomalie al momento del ritiro.\" />\r\n        </div>\r\n    </div>\r\n  );\r\n\r\n  // -- Passo 6: Costi e Tariffe (I campi sono stringhe per l'input)\r\n  const renderStep6 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><DollarSign size={20} className=\"me-2\" /> 6. Costi e Tariffe</h4>\r\n        <div className=\"col-md-4 form-group\">\r\n            <label className=\"form-label\">Tariffa Giornaliera (€)</label>\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"daily_rate\" className=\"form-control\" value={formData.daily_rate} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n        <div className=\"col-md-4 form-group\">\r\n            <label className=\"form-label\">Deposito (€)</label>\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"deposit_amount\" className=\"form-control\" value={formData.deposit_amount} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n        <div className=\"col-md-4 form-group\">\r\n            <label className=\"form-label\">Sconto (%)</label>\r\n            <div className=\"input-group\">\r\n                <input type=\"number\" step=\"0.01\" name=\"discount\" className=\"form-control\" value={formData.discount} onChange={handleChange} />\r\n                <span className=\"input-group-text\">%</span>\r\n            </div>\r\n        </div>\r\n        \r\n        <div className=\"col-12\"><hr /></div>\r\n        \r\n        <h5 className='mb-3 text-secondary'><Tag size={18} className='me-1'/> Costi Aggiuntivi:</h5>\r\n        <div className=\"col-md-3 form-group\">\r\n            <label className=\"form-label\">Costo Consegna (€)</label>\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"delivery_cost\" className=\"form-control\" value={formData.delivery_cost} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n        <div className=\"col-md-3 form-group\">\r\n            <label className=\"form-label\">Costo Carburante (€)</label>\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"fuel_charge\" className=\"form-control\" value={formData.fuel_charge} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n        <div className=\"col-md-3 form-group\">\r\n            <label className=\"form-label\">Extra Orari (€)</label>\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"after_hours_charge\" className=\"form-control\" value={formData.after_hours_charge} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n        <div className=\"col-md-3 form-group\">\r\n            <label className=\"form-label\">Altri Extras Totale (€)</label>\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"extras_charge\" className=\"form-control\" value={formData.extras_charge} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n        \r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Franchigia Danni (€)</label>\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"franchise_charge\" className=\"form-control\" value={formData.franchise_charge} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Costo Km Extra (€)</label>\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"extra_km_charge\" className=\"form-control\" value={formData.extra_km_charge} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n        \r\n        <div className=\"col-12 mt-4 text-center\">\r\n             <label className=\"form-label h5 text-success\">Importo Totale Dovuto (€)</label>\r\n            <div className=\"input-group input-group-lg\">\r\n                <span className=\"input-group-text\">€</span>\r\n                <input type=\"number\" step=\"0.01\" name=\"total_amount_due\" className=\"form-control text-center\" value={formData.total_amount_due} onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n  \r\n  // -- Passo 7: Accessori (Extras)\r\n  const renderStep7 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><Package size={20} className=\"me-2\" /> 7. Accessori e Servizi Aggiuntivi</h4>\r\n        <div className=\"col-12 form-group\">\r\n            <label className=\"form-label\">Descrizione Accessori/Servizi (Es. Seggiolino, GPS)</label>\r\n            <textarea name=\"extras_description\" className=\"form-control\" value={formData.extras_description} onChange={handleChange} rows=\"4\" placeholder=\"Lista gli accessori che sono stati forniti con il veicolo e i servizi aggiuntivi.\" />\r\n            <small className=\"form-text text-muted\">Nota: Assicurati che il costo totale di questi elementi sia incluso nel campo \"Extras Charge\" nel Passo 6.</small>\r\n        </div>\r\n    </div>\r\n  );\r\n\r\n  // -- Passo 8: Conducente Aggiuntivo\r\n  const renderStep8 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><Users size={20} className=\"me-2\" /> 8. Conducente Aggiuntivo</h4>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Nome Completo Conducente Aggiuntivo</label>\r\n            <input type=\"text\" name=\"additional_driver_full_name\" className=\"form-control\" value={formData.additional_driver_full_name} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Numero Patente Conducente Aggiuntivo</label>\r\n            <input type=\"text\" name=\"additional_driver_license_number\" className=\"form-control\" value={formData.additional_driver_license_number} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"col-12 mt-2\">\r\n             <small className=\"form-text text-muted\">Verificare la validità della patente del conducente aggiuntivo.</small>\r\n        </div>\r\n    </div>\r\n  );\r\n\r\n  // -- Passo 9: Dati Pagamento (CC/Metodo)\r\n  const renderStep9 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><CreditCard size={20} className=\"me-2\" /> 9. Dati Pagamento e Riferimento</h4>\r\n        <div className=\"col-md-6 form-group\">\r\n            <label className=\"form-label\">Metodo di Pagamento Principale</label>\r\n            <select name=\"payment_method\" className=\"form-control\" value={formData.payment_method} onChange={handleChange}>\r\n                <option value=\"card\">Carta di Credito/Debito</option>\r\n                <option value=\"cash\">Contanti</option>\r\n                <option value=\"transfer\">Bonifico Bancario</option>\r\n                <option value=\"deposit\">Solo Deposito</option>\r\n            </select>\r\n        </div>\r\n        \r\n        {formData.payment_method === 'card' && (\r\n            <>\r\n                <div className=\"col-12\"><hr /></div>\r\n                <div className=\"col-md-4 form-group\">\r\n                    <label className=\"form-label\">Ultime 4 cifre Carta (riferimento)</label>\r\n                    <input type=\"text\" name=\"cc_last_four\" className=\"form-control\" value={formData.cc_last_four} onChange={handleChange} maxLength=\"4\" />\r\n                </div>\r\n                <div className=\"col-md-4 form-group\">\r\n                    <label className=\"form-label\">Data Scadenza Carta (MM/AA)</label>\r\n                    <input type=\"text\" name=\"cc_expiry_date\" className=\"form-control\" value={formData.cc_expiry_date} onChange={handleChange} placeholder=\"MM/YY\" />\r\n                </div>\r\n                <div className=\"col-md-4 form-group\">\r\n                    <label className=\"form-label\">Codice Autorizzazione/Transazione</label>\r\n                    <input type=\"text\" name=\"cc_auth_code\" className=\"form-control\" value={formData.cc_auth_code} onChange={handleChange} />\r\n                </div>\r\n            </>\r\n        )}\r\n    </div>\r\n  );\r\n\r\n  // -- Passo 10: Documentazione Foto (Simulata con componente esterno)\r\n  const renderStep10 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><Camera size={20} className=\"me-2\" /> 10. Documentazione Fotografica (Ritiro)</h4>\r\n        <div className=\"col-12 mb-3\">\r\n            <p className='text-muted'>Utilizza il componente di upload per allegare foto del veicolo, della patente e della carta d'identità al momento del ritiro.</p>\r\n        </div>\r\n        <div className=\"col-12\">\r\n            {/* Si assume che PhotoUpload esista e gestisca l'upload delle foto con le API */}\r\n            <PhotoUpload rentalId=\"new\" type=\"pickup\" /> \r\n        </div>\r\n    </div>\r\n  );\r\n\r\n  // -- Passo 11: Revisione e Firma\r\n  const renderStep11 = () => (\r\n    <div className=\"row\">\r\n        <h4 className=\"mb-4 text-primary\"><FileText size={20} className=\"me-2\" /> 11. Revisione e Accettazione Legale</h4>\r\n        \r\n        <div className=\"col-12 form-group\">\r\n            <label className=\"form-label\">Note Aggiuntive al Contratto / Istruzioni Speciali</label>\r\n            <textarea name=\"notes\" className=\"form-control\" value={formData.notes} onChange={handleChange} rows=\"3\" />\r\n        </div>\r\n\r\n        <div className=\"col-12 mt-4\">\r\n             <h5 className='text-dark'>Termini e Condizioni</h5>\r\n            <div className=\"form-check mb-3\">\r\n                <input className=\"form-check-input\" type=\"checkbox\" name=\"contract_signed\" checked={formData.contract_signed} onChange={handleChange} id=\"contractSignedCheck\" />\r\n                <label className=\"form-check-label\" htmlFor=\"contractSignedCheck\">\r\n                    Ho letto e accettato il contratto di noleggio <span className=\"text-danger\">*</span>\r\n                </label>\r\n            </div>\r\n            <div className=\"form-check mb-3\">\r\n                <input className=\"form-check-input\" type=\"checkbox\" name=\"privacy_consent\" checked={formData.privacy_consent} onChange={handleChange} id=\"privacyConsentCheck\" />\r\n                <label className=\"form-check-label\" htmlFor=\"privacyConsentCheck\">\r\n                    Acconsento al trattamento dei dati personali (Privacy Policy) <span className=\"text-danger\">*</span>\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n\r\n  // Funzione che gestisce la visualizzazione dei passi\r\n  const renderStep = () => {\r\n    if (initialDataLoading) {\r\n        return <div className=\"text-center p-5\">Caricamento dati iniziali in corso...</div>;\r\n    }\r\n    switch (currentStep) {\r\n      case 1: return renderStep1();\r\n      case 2: return renderStep2();\r\n      case 3: return renderStep3();\r\n      case 4: return renderStep4();\r\n      case 5: return renderStep5();\r\n      case 6: return renderStep6();\r\n      case 7: return renderStep7();\r\n      case 8: return renderStep8();\r\n      case 9: return renderStep9();\r\n      case 10: return renderStep10();\r\n      case 11: return renderStep11();\r\n      default: return <div>Passo non trovato.</div>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h1 className=\"h3 mb-0 text-gray-800\">\r\n          <ClipboardList size={24} className=\"me-2\" /> Nuovo Noleggio\r\n        </h1>\r\n        <button onClick={() => navigate('/rentals')} className=\"btn btn-secondary\">\r\n          <ArrowLeft size={18} />\r\n          <span className=\"ms-2 d-none d-sm-inline\">Lista Noleggi</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n          <div className=\"card shadow mb-4\">\r\n            <div className=\"card-header py-3\">\r\n              <h6 className=\"m-0 font-weight-bold text-primary\">Passo {currentStep} di {totalSteps}</h6>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <form onSubmit={(e) => e.preventDefault()}>\r\n                {renderStep()}\r\n              </form>\r\n            </div>\r\n            <div className=\"card-footer d-flex justify-content-between\">\r\n              {/* Bottone Indietro */}\r\n              {currentStep > 1 && (\r\n                <button onClick={handlePrev} className=\"btn btn-secondary\" disabled={loading}>\r\n                  <ArrowLeft size={18} />\r\n                  Indietro\r\n                </button>\r\n              )}\r\n              \r\n              {/* Bottone Avanti / Crea Noleggio */}\r\n              {currentStep < totalSteps && ( \r\n                <button\r\n                  onClick={handleNext}\r\n                  className=\"btn btn-primary\"\r\n                  disabled={loading || initialDataLoading}\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  Avanti\r\n                  <ArrowRight size={18} />\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep === totalSteps && (\r\n                <button\r\n                  type=\"submit\"\r\n                  onClick={handleSubmit} \r\n                  className=\"btn btn-success\"\r\n                  disabled={loading || !formData.contract_signed || !formData.privacy_consent}\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  {loading ? 'Creazione...' : (\r\n                    <>\r\n                      <Save size={18} />\r\n                      Crea Noleggio\r\n                    </>\r\n                  )}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewRental;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}