{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bncrentcar\\\\frontend\\\\src\\\\components\\\\NewRental.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport PhotoUpload from './PhotoUpload';\nimport { ArrowLeft, ArrowRight, Save, User, Car, Calendar, Camera, CheckCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NewRental = () => {\n  _s();\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [customers, setCustomers] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [formData, setFormData] = useState({\n    // Step 1: Cliente\n    customer_id: '',\n    // Step 2: Veicolo\n    vehicle_id: '',\n    category_id: '',\n    // Step 3: Date e dettagli\n    pickup_date: '',\n    expected_return_date: '',\n    pickup_location: 'BNC Energy Rent Car',\n    pickup_fuel_level: '100',\n    pickup_km: '',\n    pickup_damages: '',\n    pickup_notes: '',\n    // Aggiunto per coerenza con il backend\n\n    // Step 4: Tariffe (Questi vengono aggiornati automaticamente)\n    daily_rate: '',\n    total_days: 1,\n    subtotal: 0,\n    // <--- CAMPO OBBLIGATORIO AGGIUNTO\n    total_amount: 0,\n    // <--- CAMPO OBBLIGATORIO AGGIUNTO\n    deposit_amount: 0,\n    // Aggiunto come valore predefinito\n\n    // Step 5: Foto\n    rental_id: null\n  });\n  const [uploadedPhotos, setUploadedPhotos] = useState([]);\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n\n  // Funzione che calcola giorni e prezzi ogni volta che cambiano le date o la tariffa\n  useEffect(() => {\n    const dailyRate = parseFloat(formData.daily_rate) || 0;\n    const start = new Date(formData.pickup_date);\n    const end = new Date(formData.expected_return_date);\n    let diffDays = 1;\n    let subtotal = 0;\n    if (start.getTime() && end.getTime() && end > start) {\n      const diffTime = Math.abs(end - start);\n      diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      subtotal = dailyRate * diffDays;\n    } else {\n      // Se le date non sono valide o uguali, usa 1 giorno\n      subtotal = dailyRate;\n    }\n    setFormData(prev => ({\n      ...prev,\n      total_days: diffDays,\n      subtotal: subtotal,\n      total_amount: subtotal // Assumiamo che total_amount = subtotal per ora\n    }));\n  }, [formData.pickup_date, formData.expected_return_date, formData.daily_rate]);\n  useEffect(() => {\n    if (formData.vehicle_id) {\n      const selectedVehicle = vehicles.find(v => v.id === parseInt(formData.vehicle_id));\n      if (selectedVehicle) {\n        setFormData(prev => ({\n          ...prev,\n          category_id: selectedVehicle.category_id,\n          daily_rate: selectedVehicle.daily_rate,\n          pickup_km: selectedVehicle.current_km\n        }));\n      }\n    }\n  }, [formData.vehicle_id, vehicles]);\n  const loadInitialData = async () => {\n    try {\n      const [customersRes, vehiclesRes, categoriesRes] = await Promise.all([customersAPI.getAll({\n        limit: 1000\n      }), vehiclesAPI.getAll({\n        limit: 1000\n      }), vehiclesAPI.getCategories()]);\n\n      // ✅ CORREZIONE: Estrae l'array 'customers' da response.data.data\n      setCustomers(customersRes.data.data.customers || []);\n      setVehicles(vehiclesRes.data.vehicles || []); // Usa || [] per sicurezza\n      setCategories(categoriesRes.data.data.categories || []); // Usa || [] per sicurezza\n    } catch (error) {\n      console.error('Errore caricamento dati:', error);\n      toast.error('Errore nel caricamento dei dati');\n      // Importante: in caso di errore, setta a array vuoti []\n      setCustomers([]);\n      setVehicles([]);\n      setCategories([]);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const validateStep = step => {\n    switch (step) {\n      case 1:\n        if (!formData.customer_id) {\n          toast.error('Seleziona un cliente');\n          return false;\n        }\n        break;\n      case 2:\n        if (!formData.vehicle_id) {\n          toast.error('Seleziona un veicolo');\n          return false;\n        }\n        break;\n      case 3:\n        if (!formData.pickup_date || !formData.expected_return_date || !formData.pickup_km || formData.total_days <= 0) {\n          toast.error('Compila tutti i campi obbligatori e verifica le date di noleggio');\n          return false;\n        }\n        break;\n      case 4:\n        if (parseFloat(formData.daily_rate) <= 0 || formData.total_amount <= 0) {\n          toast.error('Tariffa e importo totale devono essere maggiori di zero');\n          return false;\n        }\n        break;\n    }\n    return true;\n  };\n  const handleNext = () => {\n    if (validateStep(currentStep)) {\n      if (currentStep === 4) {\n        // Ultimo step prima dell'invio\n        handleSubmit();\n      } else {\n        setCurrentStep(currentStep + 1);\n      }\n    }\n  };\n  const handlePrevious = () => {\n    setCurrentStep(currentStep - 1);\n  };\n  const handleSubmit = async () => {\n    try {\n      setLoading(true);\n      const rentalData = {\n        customer_id: parseInt(formData.customer_id),\n        vehicle_id: parseInt(formData.vehicle_id),\n        pickup_date: formData.pickup_date,\n        expected_return_date: formData.expected_return_date,\n        pickup_location: formData.pickup_location,\n        pickup_fuel_level: parseFloat(formData.pickup_fuel_level),\n        pickup_km: parseInt(formData.pickup_km),\n        pickup_damages: formData.pickup_damages,\n        pickup_notes: formData.pickup_notes,\n        // Aggiunto\n        daily_rate: parseFloat(formData.daily_rate),\n        deposit_amount: parseFloat(formData.deposit_amount),\n        // Aggiunto\n        total_days: parseInt(formData.total_days),\n        subtotal: parseFloat(formData.subtotal),\n        // <--- CAMPO OBBLIGATORIO INVIATO\n        total_amount: parseFloat(formData.total_amount) // <--- CAMPO OBBLIGATORIO INVIATO\n        // Invia tutti i dati finanziari aggiuntivi richiesti dal DB\n        // ...\n      };\n      const response = await rentalsAPI.create(rentalData);\n      setFormData(prev => ({\n        ...prev,\n        rental_id: response.data.data.id\n      })); // L'ID viene da `RETURNING id`\n      setCurrentStep(5); // Vai allo step foto\n\n      toast.success('Noleggio creato con successo!');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Errore creazione noleggio:', error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Errore nella creazione del noleggio');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFinish = () => {\n    // La logica che blocca il finish se non ci sono foto è stata rimossa per ora,\n    // perché non sappiamo se la PhotoUpload funziona correttamente.\n    toast.success('Noleggio completato con successo!');\n    navigate(`/rentals`); // Naviga alla lista, dato che non abbiamo il dettaglio\n  };\n  const steps = [{\n    number: 1,\n    title: 'Cliente',\n    icon: User\n  }, {\n    number: 2,\n    title: 'Veicolo',\n    icon: Car\n  }, {\n    number: 3,\n    title: 'Dettagli',\n    icon: Calendar\n  }, {\n    number: 4,\n    title: 'Tariffe',\n    icon: CheckCircle\n  }, {\n    number: 5,\n    title: 'Foto',\n    icon: Camera\n  }];\n  const renderStepIndicator = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      marginBottom: '32px',\n      position: 'relative'\n    },\n    children: steps.map((step, index) => {\n      const Icon = step.icon;\n      const isActive = currentStep === step.number;\n      const isCompleted = currentStep > step.number;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          textAlign: 'center',\n          position: 'relative'\n        },\n        children: [index > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '20px',\n            left: '-50%',\n            right: '50%',\n            height: '2px',\n            background: isCompleted ? '#1a4d2e' : '#dee2e6'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '40px',\n            height: '40px',\n            borderRadius: '50%',\n            background: isActive ? '#1a4d2e' : isCompleted ? '#4a7c59' : '#dee2e6',\n            color: isActive || isCompleted ? 'white' : '#6c757d',\n            display: 'inline-flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            marginBottom: '8px',\n            position: 'relative',\n            zIndex: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Icon, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            fontWeight: isActive ? '600' : '400',\n            color: isActive ? '#1a4d2e' : '#6c757d'\n          },\n          children: step.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this)]\n      }, step.number, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this);\n  const renderStep1 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Seleziona Cliente\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label required\",\n        children: \"Cliente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"customer_id\",\n        className: \"form-control\",\n        value: formData.customer_id,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Seleziona Cliente --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 12\n        }, this), customers && customers.map(customer => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: customer.id,\n          children: [customer.full_name, \" - \", customer.fiscal_code]\n        }, customer.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), formData.customer_id && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        padding: '16px',\n        background: '#f8f9fa',\n        borderRadius: '4px'\n      },\n      children: (() => {\n        const customer = customers.find(c => c.id === parseInt(formData.customer_id));\n        return customer ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Dettagli Cliente:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '8px',\n              fontSize: '14px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDCDE \", customer.phone]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDCE7 \", customer.email]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDCCD \", customer.address, \", \", customer.city]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83E\\uDEAA Patente: \", customer.license_number]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 15\n        }, this) : null;\n      })()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 278,\n    columnNumber: 5\n  }, this);\n  const renderStep2 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Seleziona Veicolo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label required\",\n        children: \"Veicolo Disponibile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"vehicle_id\",\n        className: \"form-control\",\n        value: formData.vehicle_id,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Seleziona Veicolo --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), vehicles && vehicles.map(vehicle => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: vehicle.id,\n          children: [vehicle.brand, \" \", vehicle.model, \" - \", vehicle.license_plate, vehicle.category_name && ` (${vehicle.category_name})`]\n        }, vehicle.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this), formData.vehicle_id && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        padding: '16px',\n        background: '#f8f9fa',\n        borderRadius: '4px'\n      },\n      children: (() => {\n        const vehicle = vehicles.find(v => v.id === parseInt(formData.vehicle_id));\n        return vehicle ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Dettagli Veicolo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '8px',\n              fontSize: '14px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDE97 \", vehicle.brand, \" \", vehicle.model, \" (\", vehicle.year, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83C\\uDFF7\\uFE0F Targa: \", vehicle.license_plate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83C\\uDFA8 Colore: \", vehicle.color]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\u26FD Carburante: \", vehicle.fuel_type]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\u2699\\uFE0F Cambio: \", vehicle.transmission]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDCCA Km attuali: \", vehicle.current_km]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 19\n            }, this), vehicle.daily_rate && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '8px',\n                fontWeight: '600',\n                color: '#1a4d2e'\n              },\n              children: [\"\\uD83D\\uDCB0 Tariffa giornaliera: \\u20AC\", parseFloat(vehicle.daily_rate).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 15\n        }, this) : null;\n      })()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 327,\n    columnNumber: 5\n  }, this);\n  const renderStep3 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Dettagli Ritiro e Consegna\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Data e Ora Ritiro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          name: \"pickup_date\",\n          className: \"form-control\",\n          value: formData.pickup_date,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Data e Ora Rientro Previsto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          name: \"expected_return_date\",\n          className: \"form-control\",\n          value: formData.expected_return_date,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Luogo di Ritiro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"pickup_location\",\n        className: \"form-control\",\n        value: formData.pickup_location,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Livello Carburante (%)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"pickup_fuel_level\",\n          className: \"form-control\",\n          value: formData.pickup_fuel_level,\n          onChange: handleChange,\n          min: \"0\",\n          max: \"100\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Km in Uscita\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"pickup_km\",\n          className: \"form-control\",\n          value: formData.pickup_km,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Danni Esistenti\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"pickup_damages\",\n        className: \"form-control\",\n        value: formData.pickup_damages,\n        onChange: handleChange,\n        rows: \"3\",\n        placeholder: \"Descrivi eventuali danni o graffi presenti sul veicolo...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Note Aggiuntive Noleggio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"pickup_notes\",\n        className: \"form-control\",\n        value: formData.pickup_notes,\n        onChange: handleChange,\n        rows: \"3\",\n        placeholder: \"Note generiche per il noleggio...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, this), formData.total_days > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        padding: '16px',\n        background: '#e8f5e9',\n        borderRadius: '4px',\n        fontSize: '14px',\n        fontWeight: '600',\n        color: '#1a4d2e'\n      },\n      children: [\"\\uD83D\\uDCC5 Durata noleggio: \", formData.total_days, \" giorn\", formData.total_days === 1 ? 'o' : 'i']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 5\n  }, this);\n  const renderStep4 = () => {\n    // Si usa lo stato aggiornato dal useEffect\n    const subtotalDisplay = formData.subtotal;\n    const totalAmountDisplay = formData.total_amount;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: '24px'\n        },\n        children: \"Riepilogo Tariffe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Tariffa Giornaliera (\\u20AC)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"daily_rate\",\n          className: \"form-control\",\n          value: formData.daily_rate,\n          onChange: handleChange,\n          step: \"0.01\",\n          min: \"0\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Importo Deposito (\\u20AC)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"deposit_amount\",\n          className: \"form-control\",\n          value: formData.deposit_amount,\n          onChange: handleChange,\n          step: \"0.01\",\n          min: \"0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '24px',\n          padding: '20px',\n          background: '#f8f9fa',\n          borderRadius: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            marginBottom: '16px',\n            fontSize: '16px'\n          },\n          children: \"Riepilogo Importi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Tariffa giornaliera:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"\\u20AC\", parseFloat(formData.daily_rate || 0).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Numero giorni:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: formData.total_days\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Subtotale (Canone):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"\\u20AC\", subtotalDisplay.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Deposito:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"\\u20AC\", parseFloat(formData.deposit_amount).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderTop: '2px solid #dee2e6',\n            marginTop: '12px',\n            paddingTop: '12px',\n            display: 'flex',\n            justifyContent: 'space-between',\n            fontSize: '18px',\n            fontWeight: '700',\n            color: '#1a4d2e'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"TOTALE NOLEGGIO:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u20AC\", totalAmountDisplay.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 7\n    }, this);\n  };\n  const renderStep5 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Foto Veicolo in Uscita\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '16px',\n        background: '#fff3cd',\n        border: '1px solid #ffc107',\n        borderRadius: '4px',\n        marginBottom: '24px',\n        fontSize: '14px'\n      },\n      children: [\"\\u26A0\\uFE0F \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Importante:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 12\n      }, this), \" Scatta foto di tutti i lati del veicolo per documentare lo stato al momento della consegna.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PhotoUpload, {\n      rentalId: formData.rental_id,\n      photoType: \"pickup\",\n      onPhotosChange: setUploadedPhotos\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 576,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-bar\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/rentals'),\n          className: \"btn btn-outline-secondary\",\n          children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Nuovo Noleggio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-area\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          maxWidth: '900px',\n          margin: '0 auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          style: {\n            padding: '32px'\n          },\n          children: [renderStepIndicator(), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              minHeight: '400px'\n            },\n            children: [currentStep === 1 && renderStep1(), currentStep === 2 && renderStep2(), currentStep === 3 && renderStep3(), currentStep === 4 && renderStep4(), currentStep === 5 && renderStep5()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              marginTop: '32px',\n              paddingTop: '24px',\n              borderTop: '1px solid #dee2e6'\n            },\n            children: [currentStep > 1 && currentStep < 5 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePrevious,\n              className: \"btn btn-secondary\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 19\n              }, this), \"Indietro\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 17\n            }, this), currentStep < 4 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNext,\n              className: \"btn btn-primary\",\n              style: {\n                marginLeft: 'auto'\n              },\n              children: [\"Avanti\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 650,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 17\n            }, this), currentStep === 4 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNext,\n              className: \"btn btn-primary\",\n              disabled: loading,\n              style: {\n                marginLeft: 'auto'\n              },\n              children: loading ? 'Creazione...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 663,\n                  columnNumber: 23\n                }, this), \"Crea Noleggio\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 17\n            }, this), currentStep === 5 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleFinish,\n              className: \"btn btn-success\",\n              style: {\n                marginLeft: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 19\n              }, this), \"Completa\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 600,\n    columnNumber: 5\n  }, this);\n};\n_s(NewRental, \"yswPWb6nfcMsM5YZqClfVj+HrZg=\", false, function () {\n  return [useNavigate];\n});\n_c = NewRental;\nexport default NewRental;\nvar _c;\n$RefreshReg$(_c, \"NewRental\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useNavigate","rentalsAPI","customersAPI","vehiclesAPI","toast","PhotoUpload","ArrowLeft","ArrowRight","Save","User","Car","Calendar","Camera","CheckCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","NewRental","_s","navigate","currentStep","setCurrentStep","loading","setLoading","customers","setCustomers","vehicles","setVehicles","categories","setCategories","formData","setFormData","customer_id","vehicle_id","category_id","pickup_date","expected_return_date","pickup_location","pickup_fuel_level","pickup_km","pickup_damages","pickup_notes","daily_rate","total_days","subtotal","total_amount","deposit_amount","rental_id","uploadedPhotos","setUploadedPhotos","loadInitialData","dailyRate","parseFloat","start","Date","end","diffDays","getTime","diffTime","Math","abs","ceil","prev","selectedVehicle","find","v","id","parseInt","current_km","customersRes","vehiclesRes","categoriesRes","Promise","all","getAll","limit","getCategories","data","error","console","handleChange","e","name","value","target","validateStep","step","handleNext","handleSubmit","handlePrevious","rentalData","response","create","success","_error$response","_error$response$data","message","handleFinish","steps","number","title","icon","renderStepIndicator","style","display","justifyContent","marginBottom","position","children","map","index","Icon","isActive","isCompleted","flex","textAlign","top","left","right","height","background","fileName","_jsxFileName","lineNumber","columnNumber","width","borderRadius","color","alignItems","zIndex","size","fontSize","fontWeight","renderStep1","className","onChange","required","customer","full_name","fiscal_code","marginTop","padding","c","phone","email","address","city","license_number","renderStep2","vehicle","brand","model","license_plate","category_name","year","fuel_type","transmission","toFixed","renderStep3","type","min","max","rows","placeholder","renderStep4","subtotalDisplay","totalAmountDisplay","borderTop","paddingTop","renderStep5","border","rentalId","photoType","onPhotosChange","gap","onClick","maxWidth","margin","minHeight","marginLeft","disabled","_c","$RefreshReg$"],"sources":["D:/Bncrentcar/frontend/src/components/NewRental.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\r\nimport toast from 'react-hot-toast';\r\nimport PhotoUpload from './PhotoUpload';\r\nimport { \r\n  ArrowLeft, \r\n  ArrowRight, \r\n  Save, \r\n  User, \r\n  Car, \r\n  Calendar,\r\n  Camera,\r\n  CheckCircle \r\n} from 'lucide-react';\r\n\r\nconst NewRental = () => {\r\n  const navigate = useNavigate();\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const [customers, setCustomers] = useState([]);\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  const [formData, setFormData] = useState({\r\n    // Step 1: Cliente\r\n    customer_id: '',\r\n    \r\n    // Step 2: Veicolo\r\n    vehicle_id: '',\r\n    category_id: '',\r\n    \r\n    // Step 3: Date e dettagli\r\n    pickup_date: '',\r\n    expected_return_date: '',\r\n    pickup_location: 'BNC Energy Rent Car',\r\n    pickup_fuel_level: '100',\r\n    pickup_km: '',\r\n    pickup_damages: '',\r\n    pickup_notes: '', // Aggiunto per coerenza con il backend\r\n    \r\n    // Step 4: Tariffe (Questi vengono aggiornati automaticamente)\r\n    daily_rate: '',\r\n    total_days: 1,\r\n    subtotal: 0, // <--- CAMPO OBBLIGATORIO AGGIUNTO\r\n    total_amount: 0, // <--- CAMPO OBBLIGATORIO AGGIUNTO\r\n    deposit_amount: 0, // Aggiunto come valore predefinito\r\n    \r\n    // Step 5: Foto\r\n    rental_id: null,\r\n  });\r\n\r\n  const [uploadedPhotos, setUploadedPhotos] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  // Funzione che calcola giorni e prezzi ogni volta che cambiano le date o la tariffa\r\n  useEffect(() => {\r\n    const dailyRate = parseFloat(formData.daily_rate) || 0;\r\n    const start = new Date(formData.pickup_date);\r\n    const end = new Date(formData.expected_return_date);\r\n\r\n    let diffDays = 1;\r\n    let subtotal = 0;\r\n\r\n    if (start.getTime() && end.getTime() && end > start) {\r\n        const diffTime = Math.abs(end - start);\r\n        diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n        subtotal = dailyRate * diffDays;\r\n    } else {\r\n        // Se le date non sono valide o uguali, usa 1 giorno\r\n        subtotal = dailyRate;\r\n    }\r\n\r\n    setFormData(prev => ({ \r\n        ...prev, \r\n        total_days: diffDays, \r\n        subtotal: subtotal,\r\n        total_amount: subtotal // Assumiamo che total_amount = subtotal per ora\r\n    }));\r\n  }, [formData.pickup_date, formData.expected_return_date, formData.daily_rate]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (formData.vehicle_id) {\r\n      const selectedVehicle = vehicles.find(v => v.id === parseInt(formData.vehicle_id));\r\n      if (selectedVehicle) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          category_id: selectedVehicle.category_id,\r\n          daily_rate: selectedVehicle.daily_rate,\r\n          pickup_km: selectedVehicle.current_km,\r\n        }));\r\n      }\r\n    }\r\n  }, [formData.vehicle_id, vehicles]);\r\n\r\n   const loadInitialData = async () => {\r\n    try {\r\n      const [customersRes, vehiclesRes, categoriesRes] = await Promise.all([\r\n        customersAPI.getAll({ limit: 1000 }),\r\n        vehiclesAPI.getAll({ limit: 1000 }),\r\n        vehiclesAPI.getCategories(),\r\n      ]);\r\n\r\n      // ✅ CORREZIONE: Estrae l'array 'customers' da response.data.data\r\n      setCustomers(customersRes.data.data.customers || []); \r\n      setVehicles(vehiclesRes.data.vehicles || []); // Usa || [] per sicurezza\r\n      setCategories(categoriesRes.data.data.categories || []); // Usa || [] per sicurezza\r\n    } catch (error) {\r\n      console.error('Errore caricamento dati:', error);\r\n      toast.error('Errore nel caricamento dei dati');\r\n      // Importante: in caso di errore, setta a array vuoti []\r\n      setCustomers([]);\r\n      setVehicles([]);\r\n      setCategories([]);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const validateStep = (step) => {\r\n    switch (step) {\r\n      case 1:\r\n        if (!formData.customer_id) {\r\n          toast.error('Seleziona un cliente');\r\n          return false;\r\n        }\r\n        break;\r\n      case 2:\r\n        if (!formData.vehicle_id) {\r\n          toast.error('Seleziona un veicolo');\r\n          return false;\r\n        }\r\n        break;\r\n      case 3:\r\n        if (!formData.pickup_date || !formData.expected_return_date || !formData.pickup_km || formData.total_days <= 0) {\r\n          toast.error('Compila tutti i campi obbligatori e verifica le date di noleggio');\r\n          return false;\r\n        }\r\n        break;\r\n      case 4:\r\n        if (parseFloat(formData.daily_rate) <= 0 || formData.total_amount <= 0) {\r\n          toast.error('Tariffa e importo totale devono essere maggiori di zero');\r\n          return false;\r\n        }\r\n        break;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (validateStep(currentStep)) {\r\n      if (currentStep === 4) {\r\n        // Ultimo step prima dell'invio\r\n        handleSubmit();\r\n      } else {\r\n        setCurrentStep(currentStep + 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    setCurrentStep(currentStep - 1);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const rentalData = {\r\n        customer_id: parseInt(formData.customer_id),\r\n        vehicle_id: parseInt(formData.vehicle_id),\r\n        pickup_date: formData.pickup_date,\r\n        expected_return_date: formData.expected_return_date,\r\n        pickup_location: formData.pickup_location,\r\n        pickup_fuel_level: parseFloat(formData.pickup_fuel_level),\r\n        pickup_km: parseInt(formData.pickup_km),\r\n        pickup_damages: formData.pickup_damages,\r\n        pickup_notes: formData.pickup_notes, // Aggiunto\r\n        daily_rate: parseFloat(formData.daily_rate),\r\n        deposit_amount: parseFloat(formData.deposit_amount), // Aggiunto\r\n        total_days: parseInt(formData.total_days),\r\n        subtotal: parseFloat(formData.subtotal), // <--- CAMPO OBBLIGATORIO INVIATO\r\n        total_amount: parseFloat(formData.total_amount), // <--- CAMPO OBBLIGATORIO INVIATO\r\n        // Invia tutti i dati finanziari aggiuntivi richiesti dal DB\r\n        // ...\r\n      };\r\n\r\n      const response = await rentalsAPI.create(rentalData);\r\n      \r\n      setFormData(prev => ({ ...prev, rental_id: response.data.data.id })); // L'ID viene da `RETURNING id`\r\n      setCurrentStep(5); // Vai allo step foto\r\n      \r\n      toast.success('Noleggio creato con successo!');\r\n    } catch (error) {\r\n      console.error('Errore creazione noleggio:', error);\r\n      toast.error(error.response?.data?.message || 'Errore nella creazione del noleggio');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFinish = () => {\r\n    // La logica che blocca il finish se non ci sono foto è stata rimossa per ora,\r\n    // perché non sappiamo se la PhotoUpload funziona correttamente.\r\n    toast.success('Noleggio completato con successo!');\r\n    navigate(`/rentals`); // Naviga alla lista, dato che non abbiamo il dettaglio\r\n  };\r\n\r\n  const steps = [\r\n    { number: 1, title: 'Cliente', icon: User },\r\n    { number: 2, title: 'Veicolo', icon: Car },\r\n    { number: 3, title: 'Dettagli', icon: Calendar },\r\n    { number: 4, title: 'Tariffe', icon: CheckCircle },\r\n    { number: 5, title: 'Foto', icon: Camera },\r\n  ];\r\n\r\n  const renderStepIndicator = () => (\r\n    <div style={{\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      marginBottom: '32px',\r\n      position: 'relative',\r\n    }}>\r\n      {steps.map((step, index) => {\r\n        const Icon = step.icon;\r\n        const isActive = currentStep === step.number;\r\n        const isCompleted = currentStep > step.number;\r\n        \r\n        return (\r\n          <div key={step.number} style={{ flex: 1, textAlign: 'center', position: 'relative' }}>\r\n            {index > 0 && (\r\n              <div style={{\r\n                position: 'absolute',\r\n                top: '20px',\r\n                left: '-50%',\r\n                right: '50%',\r\n                height: '2px',\r\n                background: isCompleted ? '#1a4d2e' : '#dee2e6',\r\n              }} />\r\n            )}\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              borderRadius: '50%',\r\n              background: isActive ? '#1a4d2e' : isCompleted ? '#4a7c59' : '#dee2e6',\r\n              color: isActive || isCompleted ? 'white' : '#6c757d',\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginBottom: '8px',\r\n              position: 'relative',\r\n              zIndex: 1,\r\n            }}>\r\n              <Icon size={20} />\r\n            </div>\r\n            <div style={{\r\n              fontSize: '12px',\r\n              fontWeight: isActive ? '600' : '400',\r\n              color: isActive ? '#1a4d2e' : '#6c757d',\r\n            }}>\r\n              {step.title}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n\r\n  const renderStep1 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Seleziona Cliente</h3>\r\n      \r\n      <div className=\"form-group\">\r\n        <label className=\"form-label required\">Cliente</label>\r\n        <select\r\n          name=\"customer_id\"\r\n          className=\"form-control\"\r\n          value={formData.customer_id}\r\n          onChange={handleChange}\r\n          required\r\n        >\r\n           <option value=\"\">-- Seleziona Cliente --</option>\r\n          {/* ✅ CORREZIONE: Protezione con 'customers &&' */}\r\n          {customers && customers.map(customer => ( \r\n            <option key={customer.id} value={customer.id}>\r\n              {customer.full_name} - {customer.fiscal_code}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {formData.customer_id && (\r\n        <div style={{\r\n          marginTop: '20px',\r\n          padding: '16px',\r\n          background: '#f8f9fa',\r\n          borderRadius: '4px',\r\n        }}>\r\n          {(() => {\r\n            const customer = customers.find(c => c.id === parseInt(formData.customer_id));\r\n            return customer ? (\r\n              <div>\r\n                <strong>Dettagli Cliente:</strong>\r\n                <div style={{ marginTop: '8px', fontSize: '14px' }}>\r\n                  <div>📞 {customer.phone}</div>\r\n                  <div>📧 {customer.email}</div>\r\n                  <div>📍 {customer.address}, {customer.city}</div>\r\n                  <div>🪪 Patente: {customer.license_number}</div>\r\n                </div>\r\n              </div>\r\n            ) : null;\r\n          })()}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderStep2 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Seleziona Veicolo</h3>\r\n      \r\n      <div className=\"form-group\">\r\n        <label className=\"form-label required\">Veicolo Disponibile</label>\r\n        <select\r\n          name=\"vehicle_id\"\r\n          className=\"form-control\"\r\n          value={formData.vehicle_id}\r\n          onChange={handleChange}\r\n          required\r\n        >\r\n          <option value=\"\">-- Seleziona Veicolo --</option>\r\n          {/* ✅ CORREZIONE: Protezione con 'vehicles &&' per evitare 'Cannot read properties of undefined (reading 'map')' */}\r\n          {vehicles && vehicles.map(vehicle => (\r\n            <option key={vehicle.id} value={vehicle.id}>\r\n              {vehicle.brand} {vehicle.model} - {vehicle.license_plate} \r\n              {vehicle.category_name && ` (${vehicle.category_name})`}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {formData.vehicle_id && (\r\n        <div style={{\r\n          marginTop: '20px',\r\n          padding: '16px',\r\n          background: '#f8f9fa',\r\n          borderRadius: '4px',\r\n        }}>\r\n          {(() => {\r\n            const vehicle = vehicles.find(v => v.id === parseInt(formData.vehicle_id));\r\n            return vehicle ? (\r\n              <div>\r\n                <strong>Dettagli Veicolo:</strong>\r\n                <div style={{ marginTop: '8px', fontSize: '14px' }}>\r\n                  <div>🚗 {vehicle.brand} {vehicle.model} ({vehicle.year})</div>\r\n                  <div>🏷️ Targa: {vehicle.license_plate}</div>\r\n                  <div>🎨 Colore: {vehicle.color}</div>\r\n                  <div>⛽ Carburante: {vehicle.fuel_type}</div>\r\n                  <div>⚙️ Cambio: {vehicle.transmission}</div>\r\n                  <div>📊 Km attuali: {vehicle.current_km}</div>\r\n                  {vehicle.daily_rate && (\r\n                    <div style={{ marginTop: '8px', fontWeight: '600', color: '#1a4d2e' }}>\r\n                      💰 Tariffa giornaliera: €{parseFloat(vehicle.daily_rate).toFixed(2)}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null;\r\n          })()}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderStep3 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Dettagli Ritiro e Consegna</h3>\r\n      \r\n      <div className=\"form-row\">\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Data e Ora Ritiro</label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            name=\"pickup_date\"\r\n            className=\"form-control\"\r\n            value={formData.pickup_date}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Data e Ora Rientro Previsto</label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            name=\"expected_return_date\"\r\n            className=\"form-control\"\r\n            value={formData.expected_return_date}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">Luogo di Ritiro</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"pickup_location\"\r\n          className=\"form-control\"\r\n          value={formData.pickup_location}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-row\">\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Livello Carburante (%)</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"pickup_fuel_level\"\r\n            className=\"form-control\"\r\n            value={formData.pickup_fuel_level}\r\n            onChange={handleChange}\r\n            min=\"0\"\r\n            max=\"100\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Km in Uscita</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"pickup_km\"\r\n            className=\"form-control\"\r\n            value={formData.pickup_km}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">Danni Esistenti</label>\r\n        <textarea\r\n          name=\"pickup_damages\"\r\n          className=\"form-control\"\r\n          value={formData.pickup_damages}\r\n          onChange={handleChange}\r\n          rows=\"3\"\r\n          placeholder=\"Descrivi eventuali danni o graffi presenti sul veicolo...\"\r\n        />\r\n      </div>\r\n      \r\n      {/* Aggiunto campo note in più per allinearsi al backend */}\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">Note Aggiuntive Noleggio</label>\r\n        <textarea\r\n          name=\"pickup_notes\"\r\n          className=\"form-control\"\r\n          value={formData.pickup_notes}\r\n          onChange={handleChange}\r\n          rows=\"3\"\r\n          placeholder=\"Note generiche per il noleggio...\"\r\n        />\r\n      </div>\r\n\r\n      {formData.total_days > 0 && (\r\n        <div style={{\r\n          marginTop: '20px',\r\n          padding: '16px',\r\n          background: '#e8f5e9',\r\n          borderRadius: '4px',\r\n          fontSize: '14px',\r\n          fontWeight: '600',\r\n          color: '#1a4d2e',\r\n        }}>\r\n          📅 Durata noleggio: {formData.total_days} giorn{formData.total_days === 1 ? 'o' : 'i'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderStep4 = () => {\r\n    // Si usa lo stato aggiornato dal useEffect\r\n    const subtotalDisplay = formData.subtotal;\r\n    const totalAmountDisplay = formData.total_amount;\r\n    \r\n    return (\r\n      <div>\r\n        <h3 style={{ marginBottom: '24px' }}>Riepilogo Tariffe</h3>\r\n        \r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Tariffa Giornaliera (€)</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"daily_rate\"\r\n            className=\"form-control\"\r\n            value={formData.daily_rate}\r\n            onChange={handleChange}\r\n            step=\"0.01\"\r\n            min=\"0\"\r\n            required\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Importo Deposito (€)</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"deposit_amount\"\r\n            className=\"form-control\"\r\n            value={formData.deposit_amount}\r\n            onChange={handleChange}\r\n            step=\"0.01\"\r\n            min=\"0\"\r\n          />\r\n        </div>\r\n\r\n        <div style={{\r\n          marginTop: '24px',\r\n          padding: '20px',\r\n          background: '#f8f9fa',\r\n          borderRadius: '4px',\r\n        }}>\r\n          <h4 style={{ marginBottom: '16px', fontSize: '16px' }}>Riepilogo Importi</h4>\r\n          \r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n            <span>Tariffa giornaliera:</span>\r\n            <strong>€{parseFloat(formData.daily_rate || 0).toFixed(2)}</strong>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n            <span>Numero giorni:</span>\r\n            <strong>{formData.total_days}</strong>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n            <span>Subtotale (Canone):</span>\r\n            <strong>€{subtotalDisplay.toFixed(2)}</strong>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n            <span>Deposito:</span>\r\n            <strong>€{parseFloat(formData.deposit_amount).toFixed(2)}</strong>\r\n          </div>\r\n          \r\n          <div style={{ \r\n            borderTop: '2px solid #dee2e6', \r\n            marginTop: '12px', \r\n            paddingTop: '12px',\r\n            display: 'flex', \r\n            justifyContent: 'space-between',\r\n            fontSize: '18px',\r\n            fontWeight: '700',\r\n            color: '#1a4d2e',\r\n          }}>\r\n            <span>TOTALE NOLEGGIO:</span>\r\n            <span>€{totalAmountDisplay.toFixed(2)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderStep5 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Foto Veicolo in Uscita</h3>\r\n      \r\n      <div style={{\r\n        padding: '16px',\r\n        background: '#fff3cd',\r\n        border: '1px solid #ffc107',\r\n        borderRadius: '4px',\r\n        marginBottom: '24px',\r\n        fontSize: '14px',\r\n      }}>\r\n        ⚠️ <strong>Importante:</strong> Scatta foto di tutti i lati del veicolo \r\n        per documentare lo stato al momento della consegna.\r\n      </div>\r\n\r\n      <PhotoUpload\r\n        rentalId={formData.rental_id}\r\n        photoType=\"pickup\"\r\n        onPhotosChange={setUploadedPhotos}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"top-bar\">\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n          <button\r\n            onClick={() => navigate('/rentals')}\r\n            className=\"btn btn-outline-secondary\"\r\n          >\r\n            <ArrowLeft size={18} />\r\n          </button>\r\n          <h1>Nuovo Noleggio</h1>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"content-area\">\r\n        <div className=\"card\" style={{ maxWidth: '900px', margin: '0 auto' }}>\r\n          <div className=\"card-body\" style={{ padding: '32px' }}>\r\n            {renderStepIndicator()}\r\n            \r\n            <div style={{ minHeight: '400px' }}>\r\n              {currentStep === 1 && renderStep1()}\r\n              {currentStep === 2 && renderStep2()}\r\n              {currentStep === 3 && renderStep3()}\r\n              {currentStep === 4 && renderStep4()}\r\n              {currentStep === 5 && renderStep5()}\r\n            </div>\r\n\r\n            <div style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              marginTop: '32px',\r\n              paddingTop: '24px',\r\n              borderTop: '1px solid #dee2e6',\r\n            }}>\r\n              {currentStep > 1 && currentStep < 5 && (\r\n                <button\r\n                  onClick={handlePrevious}\r\n                  className=\"btn btn-secondary\"\r\n                >\r\n                  <ArrowLeft size={18} />\r\n                  Indietro\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep < 4 && (\r\n                <button\r\n                  onClick={handleNext}\r\n                  className=\"btn btn-primary\"\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  Avanti\r\n                  <ArrowRight size={18} />\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep === 4 && (\r\n                <button\r\n                  onClick={handleNext}\r\n                  className=\"btn btn-primary\"\r\n                  disabled={loading}\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  {loading ? 'Creazione...' : (\r\n                    <>\r\n                      <Save size={18} />\r\n                      Crea Noleggio\r\n                    </>\r\n                  )}\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep === 5 && (\r\n                <button\r\n                  onClick={handleFinish}\r\n                  className=\"btn btn-success\"\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  <CheckCircle size={18} />\r\n                  Completa\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewRental;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAC3D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,UAAU,EAAEC,YAAY,EAAEC,WAAW,QAAQ,iBAAiB;AACvE,OAAOC,KAAK,MAAM,iBAAiB;AACnC,OAAOC,WAAW,MAAM,eAAe;AACvC,SACEC,SAAS,EACTC,UAAU,EACVC,IAAI,EACJC,IAAI,EACJC,GAAG,EACHC,QAAQ,EACRC,MAAM,EACNC,WAAW,QACN,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtB,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAMC,QAAQ,GAAGpB,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGzB,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAAC0B,OAAO,EAAEC,UAAU,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAM,CAAC4B,SAAS,EAAEC,YAAY,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAAC8B,QAAQ,EAAEC,WAAW,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACgC,UAAU,EAAEC,aAAa,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EAEhD,MAAM,CAACkC,QAAQ,EAAEC,WAAW,CAAC,GAAGnC,QAAQ,CAAC;IACvC;IACAoC,WAAW,EAAE,EAAE;IAEf;IACAC,UAAU,EAAE,EAAE;IACdC,WAAW,EAAE,EAAE;IAEf;IACAC,WAAW,EAAE,EAAE;IACfC,oBAAoB,EAAE,EAAE;IACxBC,eAAe,EAAE,qBAAqB;IACtCC,iBAAiB,EAAE,KAAK;IACxBC,SAAS,EAAE,EAAE;IACbC,cAAc,EAAE,EAAE;IAClBC,YAAY,EAAE,EAAE;IAAE;;IAElB;IACAC,UAAU,EAAE,EAAE;IACdC,UAAU,EAAE,CAAC;IACbC,QAAQ,EAAE,CAAC;IAAE;IACbC,YAAY,EAAE,CAAC;IAAE;IACjBC,cAAc,EAAE,CAAC;IAAE;;IAEnB;IACAC,SAAS,EAAE;EACb,CAAC,CAAC;EAEF,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGrD,QAAQ,CAAC,EAAE,CAAC;EAExDC,SAAS,CAAC,MAAM;IACdqD,eAAe,CAAC,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACArD,SAAS,CAAC,MAAM;IACd,MAAMsD,SAAS,GAAGC,UAAU,CAACtB,QAAQ,CAACY,UAAU,CAAC,IAAI,CAAC;IACtD,MAAMW,KAAK,GAAG,IAAIC,IAAI,CAACxB,QAAQ,CAACK,WAAW,CAAC;IAC5C,MAAMoB,GAAG,GAAG,IAAID,IAAI,CAACxB,QAAQ,CAACM,oBAAoB,CAAC;IAEnD,IAAIoB,QAAQ,GAAG,CAAC;IAChB,IAAIZ,QAAQ,GAAG,CAAC;IAEhB,IAAIS,KAAK,CAACI,OAAO,CAAC,CAAC,IAAIF,GAAG,CAACE,OAAO,CAAC,CAAC,IAAIF,GAAG,GAAGF,KAAK,EAAE;MACjD,MAAMK,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAACL,GAAG,GAAGF,KAAK,CAAC;MACtCG,QAAQ,GAAGG,IAAI,CAACE,IAAI,CAACH,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;MACtDd,QAAQ,GAAGO,SAAS,GAAGK,QAAQ;IACnC,CAAC,MAAM;MACH;MACAZ,QAAQ,GAAGO,SAAS;IACxB;IAEApB,WAAW,CAAC+B,IAAI,KAAK;MACjB,GAAGA,IAAI;MACPnB,UAAU,EAAEa,QAAQ;MACpBZ,QAAQ,EAAEA,QAAQ;MAClBC,YAAY,EAAED,QAAQ,CAAC;IAC3B,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,CAACd,QAAQ,CAACK,WAAW,EAAEL,QAAQ,CAACM,oBAAoB,EAAEN,QAAQ,CAACY,UAAU,CAAC,CAAC;EAG9E7C,SAAS,CAAC,MAAM;IACd,IAAIiC,QAAQ,CAACG,UAAU,EAAE;MACvB,MAAM8B,eAAe,GAAGrC,QAAQ,CAACsC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKC,QAAQ,CAACrC,QAAQ,CAACG,UAAU,CAAC,CAAC;MAClF,IAAI8B,eAAe,EAAE;QACnBhC,WAAW,CAAC+B,IAAI,KAAK;UACnB,GAAGA,IAAI;UACP5B,WAAW,EAAE6B,eAAe,CAAC7B,WAAW;UACxCQ,UAAU,EAAEqB,eAAe,CAACrB,UAAU;UACtCH,SAAS,EAAEwB,eAAe,CAACK;QAC7B,CAAC,CAAC,CAAC;MACL;IACF;EACF,CAAC,EAAE,CAACtC,QAAQ,CAACG,UAAU,EAAEP,QAAQ,CAAC,CAAC;EAElC,MAAMwB,eAAe,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI;MACF,MAAM,CAACmB,YAAY,EAAEC,WAAW,EAAEC,aAAa,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACnExE,YAAY,CAACyE,MAAM,CAAC;QAAEC,KAAK,EAAE;MAAK,CAAC,CAAC,EACpCzE,WAAW,CAACwE,MAAM,CAAC;QAAEC,KAAK,EAAE;MAAK,CAAC,CAAC,EACnCzE,WAAW,CAAC0E,aAAa,CAAC,CAAC,CAC5B,CAAC;;MAEF;MACAnD,YAAY,CAAC4C,YAAY,CAACQ,IAAI,CAACA,IAAI,CAACrD,SAAS,IAAI,EAAE,CAAC;MACpDG,WAAW,CAAC2C,WAAW,CAACO,IAAI,CAACnD,QAAQ,IAAI,EAAE,CAAC,CAAC,CAAC;MAC9CG,aAAa,CAAC0C,aAAa,CAACM,IAAI,CAACA,IAAI,CAACjD,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC,OAAOkD,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD3E,KAAK,CAAC2E,KAAK,CAAC,iCAAiC,CAAC;MAC9C;MACArD,YAAY,CAAC,EAAE,CAAC;MAChBE,WAAW,CAAC,EAAE,CAAC;MACfE,aAAa,CAAC,EAAE,CAAC;IACnB;EACF,CAAC;EAED,MAAMmD,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChCrD,WAAW,CAAC+B,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAACoB,IAAI,GAAGC;IAAM,CAAC,CAAC,CAAC;EACnD,CAAC;EAED,MAAME,YAAY,GAAIC,IAAI,IAAK;IAC7B,QAAQA,IAAI;MACV,KAAK,CAAC;QACJ,IAAI,CAACxD,QAAQ,CAACE,WAAW,EAAE;UACzB7B,KAAK,CAAC2E,KAAK,CAAC,sBAAsB,CAAC;UACnC,OAAO,KAAK;QACd;QACA;MACF,KAAK,CAAC;QACJ,IAAI,CAAChD,QAAQ,CAACG,UAAU,EAAE;UACxB9B,KAAK,CAAC2E,KAAK,CAAC,sBAAsB,CAAC;UACnC,OAAO,KAAK;QACd;QACA;MACF,KAAK,CAAC;QACJ,IAAI,CAAChD,QAAQ,CAACK,WAAW,IAAI,CAACL,QAAQ,CAACM,oBAAoB,IAAI,CAACN,QAAQ,CAACS,SAAS,IAAIT,QAAQ,CAACa,UAAU,IAAI,CAAC,EAAE;UAC9GxC,KAAK,CAAC2E,KAAK,CAAC,kEAAkE,CAAC;UAC/E,OAAO,KAAK;QACd;QACA;MACF,KAAK,CAAC;QACJ,IAAI1B,UAAU,CAACtB,QAAQ,CAACY,UAAU,CAAC,IAAI,CAAC,IAAIZ,QAAQ,CAACe,YAAY,IAAI,CAAC,EAAE;UACtE1C,KAAK,CAAC2E,KAAK,CAAC,yDAAyD,CAAC;UACtE,OAAO,KAAK;QACd;QACA;IACJ;IACA,OAAO,IAAI;EACb,CAAC;EAED,MAAMS,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAIF,YAAY,CAACjE,WAAW,CAAC,EAAE;MAC7B,IAAIA,WAAW,KAAK,CAAC,EAAE;QACrB;QACAoE,YAAY,CAAC,CAAC;MAChB,CAAC,MAAM;QACLnE,cAAc,CAACD,WAAW,GAAG,CAAC,CAAC;MACjC;IACF;EACF,CAAC;EAED,MAAMqE,cAAc,GAAGA,CAAA,KAAM;IAC3BpE,cAAc,CAACD,WAAW,GAAG,CAAC,CAAC;EACjC,CAAC;EAED,MAAMoE,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACFjE,UAAU,CAAC,IAAI,CAAC;MAEhB,MAAMmE,UAAU,GAAG;QACjB1D,WAAW,EAAEmC,QAAQ,CAACrC,QAAQ,CAACE,WAAW,CAAC;QAC3CC,UAAU,EAAEkC,QAAQ,CAACrC,QAAQ,CAACG,UAAU,CAAC;QACzCE,WAAW,EAAEL,QAAQ,CAACK,WAAW;QACjCC,oBAAoB,EAAEN,QAAQ,CAACM,oBAAoB;QACnDC,eAAe,EAAEP,QAAQ,CAACO,eAAe;QACzCC,iBAAiB,EAAEc,UAAU,CAACtB,QAAQ,CAACQ,iBAAiB,CAAC;QACzDC,SAAS,EAAE4B,QAAQ,CAACrC,QAAQ,CAACS,SAAS,CAAC;QACvCC,cAAc,EAAEV,QAAQ,CAACU,cAAc;QACvCC,YAAY,EAAEX,QAAQ,CAACW,YAAY;QAAE;QACrCC,UAAU,EAAEU,UAAU,CAACtB,QAAQ,CAACY,UAAU,CAAC;QAC3CI,cAAc,EAAEM,UAAU,CAACtB,QAAQ,CAACgB,cAAc,CAAC;QAAE;QACrDH,UAAU,EAAEwB,QAAQ,CAACrC,QAAQ,CAACa,UAAU,CAAC;QACzCC,QAAQ,EAAEQ,UAAU,CAACtB,QAAQ,CAACc,QAAQ,CAAC;QAAE;QACzCC,YAAY,EAAEO,UAAU,CAACtB,QAAQ,CAACe,YAAY,CAAC,CAAE;QACjD;QACA;MACF,CAAC;MAED,MAAM8C,QAAQ,GAAG,MAAM3F,UAAU,CAAC4F,MAAM,CAACF,UAAU,CAAC;MAEpD3D,WAAW,CAAC+B,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAEf,SAAS,EAAE4C,QAAQ,CAACd,IAAI,CAACA,IAAI,CAACX;MAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACtE7C,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;;MAEnBlB,KAAK,CAAC0F,OAAO,CAAC,+BAA+B,CAAC;IAChD,CAAC,CAAC,OAAOf,KAAK,EAAE;MAAA,IAAAgB,eAAA,EAAAC,oBAAA;MACdhB,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD3E,KAAK,CAAC2E,KAAK,CAAC,EAAAgB,eAAA,GAAAhB,KAAK,CAACa,QAAQ,cAAAG,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBjB,IAAI,cAAAkB,oBAAA,uBAApBA,oBAAA,CAAsBC,OAAO,KAAI,qCAAqC,CAAC;IACrF,CAAC,SAAS;MACRzE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM0E,YAAY,GAAGA,CAAA,KAAM;IACzB;IACA;IACA9F,KAAK,CAAC0F,OAAO,CAAC,mCAAmC,CAAC;IAClD1E,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;EACxB,CAAC;EAED,MAAM+E,KAAK,GAAG,CACZ;IAAEC,MAAM,EAAE,CAAC;IAAEC,KAAK,EAAE,SAAS;IAAEC,IAAI,EAAE7F;EAAK,CAAC,EAC3C;IAAE2F,MAAM,EAAE,CAAC;IAAEC,KAAK,EAAE,SAAS;IAAEC,IAAI,EAAE5F;EAAI,CAAC,EAC1C;IAAE0F,MAAM,EAAE,CAAC;IAAEC,KAAK,EAAE,UAAU;IAAEC,IAAI,EAAE3F;EAAS,CAAC,EAChD;IAAEyF,MAAM,EAAE,CAAC;IAAEC,KAAK,EAAE,SAAS;IAAEC,IAAI,EAAEzF;EAAY,CAAC,EAClD;IAAEuF,MAAM,EAAE,CAAC;IAAEC,KAAK,EAAE,MAAM;IAAEC,IAAI,EAAE1F;EAAO,CAAC,CAC3C;EAED,MAAM2F,mBAAmB,GAAGA,CAAA,kBAC1BxF,OAAA;IAAKyF,KAAK,EAAE;MACVC,OAAO,EAAE,MAAM;MACfC,cAAc,EAAE,eAAe;MAC/BC,YAAY,EAAE,MAAM;MACpBC,QAAQ,EAAE;IACZ,CAAE;IAAAC,QAAA,EACCV,KAAK,CAACW,GAAG,CAAC,CAACvB,IAAI,EAAEwB,KAAK,KAAK;MAC1B,MAAMC,IAAI,GAAGzB,IAAI,CAACe,IAAI;MACtB,MAAMW,QAAQ,GAAG5F,WAAW,KAAKkE,IAAI,CAACa,MAAM;MAC5C,MAAMc,WAAW,GAAG7F,WAAW,GAAGkE,IAAI,CAACa,MAAM;MAE7C,oBACErF,OAAA;QAAuByF,KAAK,EAAE;UAAEW,IAAI,EAAE,CAAC;UAAEC,SAAS,EAAE,QAAQ;UAAER,QAAQ,EAAE;QAAW,CAAE;QAAAC,QAAA,GAClFE,KAAK,GAAG,CAAC,iBACRhG,OAAA;UAAKyF,KAAK,EAAE;YACVI,QAAQ,EAAE,UAAU;YACpBS,GAAG,EAAE,MAAM;YACXC,IAAI,EAAE,MAAM;YACZC,KAAK,EAAE,KAAK;YACZC,MAAM,EAAE,KAAK;YACbC,UAAU,EAAEP,WAAW,GAAG,SAAS,GAAG;UACxC;QAAE;UAAAQ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CACL,eACD9G,OAAA;UAAKyF,KAAK,EAAE;YACVsB,KAAK,EAAE,MAAM;YACbN,MAAM,EAAE,MAAM;YACdO,YAAY,EAAE,KAAK;YACnBN,UAAU,EAAER,QAAQ,GAAG,SAAS,GAAGC,WAAW,GAAG,SAAS,GAAG,SAAS;YACtEc,KAAK,EAAEf,QAAQ,IAAIC,WAAW,GAAG,OAAO,GAAG,SAAS;YACpDT,OAAO,EAAE,aAAa;YACtBwB,UAAU,EAAE,QAAQ;YACpBvB,cAAc,EAAE,QAAQ;YACxBC,YAAY,EAAE,KAAK;YACnBC,QAAQ,EAAE,UAAU;YACpBsB,MAAM,EAAE;UACV,CAAE;UAAArB,QAAA,eACA9F,OAAA,CAACiG,IAAI;YAACmB,IAAI,EAAE;UAAG;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CAAC,eACN9G,OAAA;UAAKyF,KAAK,EAAE;YACV4B,QAAQ,EAAE,MAAM;YAChBC,UAAU,EAAEpB,QAAQ,GAAG,KAAK,GAAG,KAAK;YACpCe,KAAK,EAAEf,QAAQ,GAAG,SAAS,GAAG;UAChC,CAAE;UAAAJ,QAAA,EACCtB,IAAI,CAACc;QAAK;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC;MAAA,GAhCEtC,IAAI,CAACa,MAAM;QAAAsB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAiChB,CAAC;IAEV,CAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CACN;EAED,MAAMS,WAAW,GAAGA,CAAA,kBAClBvH,OAAA;IAAA8F,QAAA,gBACE9F,OAAA;MAAIyF,KAAK,EAAE;QAAEG,YAAY,EAAE;MAAO,CAAE;MAAAE,QAAA,EAAC;IAAiB;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAE3D9G,OAAA;MAAKwH,SAAS,EAAC,YAAY;MAAA1B,QAAA,gBACzB9F,OAAA;QAAOwH,SAAS,EAAC,qBAAqB;QAAA1B,QAAA,EAAC;MAAO;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACtD9G,OAAA;QACEoE,IAAI,EAAC,aAAa;QAClBoD,SAAS,EAAC,cAAc;QACxBnD,KAAK,EAAErD,QAAQ,CAACE,WAAY;QAC5BuG,QAAQ,EAAEvD,YAAa;QACvBwD,QAAQ;QAAA5B,QAAA,gBAEP9F,OAAA;UAAQqE,KAAK,EAAC,EAAE;UAAAyB,QAAA,EAAC;QAAuB;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAEjDpG,SAAS,IAAIA,SAAS,CAACqF,GAAG,CAAC4B,QAAQ,iBAClC3H,OAAA;UAA0BqE,KAAK,EAAEsD,QAAQ,CAACvE,EAAG;UAAA0C,QAAA,GAC1C6B,QAAQ,CAACC,SAAS,EAAC,KAAG,EAACD,QAAQ,CAACE,WAAW;QAAA,GADjCF,QAAQ,CAACvE,EAAE;UAAAuD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEhB,CACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EAEL9F,QAAQ,CAACE,WAAW,iBACnBlB,OAAA;MAAKyF,KAAK,EAAE;QACVqC,SAAS,EAAE,MAAM;QACjBC,OAAO,EAAE,MAAM;QACfrB,UAAU,EAAE,SAAS;QACrBM,YAAY,EAAE;MAChB,CAAE;MAAAlB,QAAA,EACC,CAAC,MAAM;QACN,MAAM6B,QAAQ,GAAGjH,SAAS,CAACwC,IAAI,CAAC8E,CAAC,IAAIA,CAAC,CAAC5E,EAAE,KAAKC,QAAQ,CAACrC,QAAQ,CAACE,WAAW,CAAC,CAAC;QAC7E,OAAOyG,QAAQ,gBACb3H,OAAA;UAAA8F,QAAA,gBACE9F,OAAA;YAAA8F,QAAA,EAAQ;UAAiB;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAClC9G,OAAA;YAAKyF,KAAK,EAAE;cAAEqC,SAAS,EAAE,KAAK;cAAET,QAAQ,EAAE;YAAO,CAAE;YAAAvB,QAAA,gBACjD9F,OAAA;cAAA8F,QAAA,GAAK,eAAG,EAAC6B,QAAQ,CAACM,KAAK;YAAA;cAAAtB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC9B9G,OAAA;cAAA8F,QAAA,GAAK,eAAG,EAAC6B,QAAQ,CAACO,KAAK;YAAA;cAAAvB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC9B9G,OAAA;cAAA8F,QAAA,GAAK,eAAG,EAAC6B,QAAQ,CAACQ,OAAO,EAAC,IAAE,EAACR,QAAQ,CAACS,IAAI;YAAA;cAAAzB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACjD9G,OAAA;cAAA8F,QAAA,GAAK,wBAAY,EAAC6B,QAAQ,CAACU,cAAc;YAAA;cAAA1B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,GACJ,IAAI;MACV,CAAC,EAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CACN;EAED,MAAMwB,WAAW,GAAGA,CAAA,kBAClBtI,OAAA;IAAA8F,QAAA,gBACE9F,OAAA;MAAIyF,KAAK,EAAE;QAAEG,YAAY,EAAE;MAAO,CAAE;MAAAE,QAAA,EAAC;IAAiB;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAE3D9G,OAAA;MAAKwH,SAAS,EAAC,YAAY;MAAA1B,QAAA,gBACzB9F,OAAA;QAAOwH,SAAS,EAAC,qBAAqB;QAAA1B,QAAA,EAAC;MAAmB;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAClE9G,OAAA;QACEoE,IAAI,EAAC,YAAY;QACjBoD,SAAS,EAAC,cAAc;QACxBnD,KAAK,EAAErD,QAAQ,CAACG,UAAW;QAC3BsG,QAAQ,EAAEvD,YAAa;QACvBwD,QAAQ;QAAA5B,QAAA,gBAER9F,OAAA;UAAQqE,KAAK,EAAC,EAAE;UAAAyB,QAAA,EAAC;QAAuB;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAEhDlG,QAAQ,IAAIA,QAAQ,CAACmF,GAAG,CAACwC,OAAO,iBAC/BvI,OAAA;UAAyBqE,KAAK,EAAEkE,OAAO,CAACnF,EAAG;UAAA0C,QAAA,GACxCyC,OAAO,CAACC,KAAK,EAAC,GAAC,EAACD,OAAO,CAACE,KAAK,EAAC,KAAG,EAACF,OAAO,CAACG,aAAa,EACvDH,OAAO,CAACI,aAAa,IAAI,KAAKJ,OAAO,CAACI,aAAa,GAAG;QAAA,GAF5CJ,OAAO,CAACnF,EAAE;UAAAuD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAGf,CACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EAEL9F,QAAQ,CAACG,UAAU,iBAClBnB,OAAA;MAAKyF,KAAK,EAAE;QACVqC,SAAS,EAAE,MAAM;QACjBC,OAAO,EAAE,MAAM;QACfrB,UAAU,EAAE,SAAS;QACrBM,YAAY,EAAE;MAChB,CAAE;MAAAlB,QAAA,EACC,CAAC,MAAM;QACN,MAAMyC,OAAO,GAAG3H,QAAQ,CAACsC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKC,QAAQ,CAACrC,QAAQ,CAACG,UAAU,CAAC,CAAC;QAC1E,OAAOoH,OAAO,gBACZvI,OAAA;UAAA8F,QAAA,gBACE9F,OAAA;YAAA8F,QAAA,EAAQ;UAAiB;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAClC9G,OAAA;YAAKyF,KAAK,EAAE;cAAEqC,SAAS,EAAE,KAAK;cAAET,QAAQ,EAAE;YAAO,CAAE;YAAAvB,QAAA,gBACjD9F,OAAA;cAAA8F,QAAA,GAAK,eAAG,EAACyC,OAAO,CAACC,KAAK,EAAC,GAAC,EAACD,OAAO,CAACE,KAAK,EAAC,IAAE,EAACF,OAAO,CAACK,IAAI,EAAC,GAAC;YAAA;cAAAjC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC9D9G,OAAA;cAAA8F,QAAA,GAAK,4BAAW,EAACyC,OAAO,CAACG,aAAa;YAAA;cAAA/B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC7C9G,OAAA;cAAA8F,QAAA,GAAK,uBAAW,EAACyC,OAAO,CAACtB,KAAK;YAAA;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACrC9G,OAAA;cAAA8F,QAAA,GAAK,qBAAc,EAACyC,OAAO,CAACM,SAAS;YAAA;cAAAlC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC5C9G,OAAA;cAAA8F,QAAA,GAAK,uBAAW,EAACyC,OAAO,CAACO,YAAY;YAAA;cAAAnC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC5C9G,OAAA;cAAA8F,QAAA,GAAK,2BAAe,EAACyC,OAAO,CAACjF,UAAU;YAAA;cAAAqD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EAC7CyB,OAAO,CAAC3G,UAAU,iBACjB5B,OAAA;cAAKyF,KAAK,EAAE;gBAAEqC,SAAS,EAAE,KAAK;gBAAER,UAAU,EAAE,KAAK;gBAAEL,KAAK,EAAE;cAAU,CAAE;cAAAnB,QAAA,GAAC,0CAC5C,EAACxD,UAAU,CAACiG,OAAO,CAAC3G,UAAU,CAAC,CAACmH,OAAO,CAAC,CAAC,CAAC;YAAA;cAAApC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChE,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,GACJ,IAAI;MACV,CAAC,EAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CACN;EAED,MAAMkC,WAAW,GAAGA,CAAA,kBAClBhJ,OAAA;IAAA8F,QAAA,gBACE9F,OAAA;MAAIyF,KAAK,EAAE;QAAEG,YAAY,EAAE;MAAO,CAAE;MAAAE,QAAA,EAAC;IAA0B;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEpE9G,OAAA;MAAKwH,SAAS,EAAC,UAAU;MAAA1B,QAAA,gBACvB9F,OAAA;QAAKwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,gBACzB9F,OAAA;UAAOwH,SAAS,EAAC,qBAAqB;UAAA1B,QAAA,EAAC;QAAiB;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAChE9G,OAAA;UACEiJ,IAAI,EAAC,gBAAgB;UACrB7E,IAAI,EAAC,aAAa;UAClBoD,SAAS,EAAC,cAAc;UACxBnD,KAAK,EAAErD,QAAQ,CAACK,WAAY;UAC5BoG,QAAQ,EAAEvD,YAAa;UACvBwD,QAAQ;QAAA;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAEN9G,OAAA;QAAKwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,gBACzB9F,OAAA;UAAOwH,SAAS,EAAC,qBAAqB;UAAA1B,QAAA,EAAC;QAA2B;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC1E9G,OAAA;UACEiJ,IAAI,EAAC,gBAAgB;UACrB7E,IAAI,EAAC,sBAAsB;UAC3BoD,SAAS,EAAC,cAAc;UACxBnD,KAAK,EAAErD,QAAQ,CAACM,oBAAqB;UACrCmG,QAAQ,EAAEvD,YAAa;UACvBwD,QAAQ;QAAA;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAEN9G,OAAA;MAAKwH,SAAS,EAAC,YAAY;MAAA1B,QAAA,gBACzB9F,OAAA;QAAOwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,EAAC;MAAe;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACrD9G,OAAA;QACEiJ,IAAI,EAAC,MAAM;QACX7E,IAAI,EAAC,iBAAiB;QACtBoD,SAAS,EAAC,cAAc;QACxBnD,KAAK,EAAErD,QAAQ,CAACO,eAAgB;QAChCkG,QAAQ,EAAEvD;MAAa;QAAAyC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAEN9G,OAAA;MAAKwH,SAAS,EAAC,UAAU;MAAA1B,QAAA,gBACvB9F,OAAA;QAAKwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,gBACzB9F,OAAA;UAAOwH,SAAS,EAAC,qBAAqB;UAAA1B,QAAA,EAAC;QAAsB;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACrE9G,OAAA;UACEiJ,IAAI,EAAC,QAAQ;UACb7E,IAAI,EAAC,mBAAmB;UACxBoD,SAAS,EAAC,cAAc;UACxBnD,KAAK,EAAErD,QAAQ,CAACQ,iBAAkB;UAClCiG,QAAQ,EAAEvD,YAAa;UACvBgF,GAAG,EAAC,GAAG;UACPC,GAAG,EAAC,KAAK;UACTzB,QAAQ;QAAA;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAEN9G,OAAA;QAAKwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,gBACzB9F,OAAA;UAAOwH,SAAS,EAAC,qBAAqB;UAAA1B,QAAA,EAAC;QAAY;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC3D9G,OAAA;UACEiJ,IAAI,EAAC,QAAQ;UACb7E,IAAI,EAAC,WAAW;UAChBoD,SAAS,EAAC,cAAc;UACxBnD,KAAK,EAAErD,QAAQ,CAACS,SAAU;UAC1BgG,QAAQ,EAAEvD,YAAa;UACvBwD,QAAQ;QAAA;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAEN9G,OAAA;MAAKwH,SAAS,EAAC,YAAY;MAAA1B,QAAA,gBACzB9F,OAAA;QAAOwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,EAAC;MAAe;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACrD9G,OAAA;QACEoE,IAAI,EAAC,gBAAgB;QACrBoD,SAAS,EAAC,cAAc;QACxBnD,KAAK,EAAErD,QAAQ,CAACU,cAAe;QAC/B+F,QAAQ,EAAEvD,YAAa;QACvBkF,IAAI,EAAC,GAAG;QACRC,WAAW,EAAC;MAA2D;QAAA1C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAGN9G,OAAA;MAAKwH,SAAS,EAAC,YAAY;MAAA1B,QAAA,gBACzB9F,OAAA;QAAOwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,EAAC;MAAwB;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC9D9G,OAAA;QACEoE,IAAI,EAAC,cAAc;QACnBoD,SAAS,EAAC,cAAc;QACxBnD,KAAK,EAAErD,QAAQ,CAACW,YAAa;QAC7B8F,QAAQ,EAAEvD,YAAa;QACvBkF,IAAI,EAAC,GAAG;QACRC,WAAW,EAAC;MAAmC;QAAA1C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EAEL9F,QAAQ,CAACa,UAAU,GAAG,CAAC,iBACtB7B,OAAA;MAAKyF,KAAK,EAAE;QACVqC,SAAS,EAAE,MAAM;QACjBC,OAAO,EAAE,MAAM;QACfrB,UAAU,EAAE,SAAS;QACrBM,YAAY,EAAE,KAAK;QACnBK,QAAQ,EAAE,MAAM;QAChBC,UAAU,EAAE,KAAK;QACjBL,KAAK,EAAE;MACT,CAAE;MAAAnB,QAAA,GAAC,gCACmB,EAAC9E,QAAQ,CAACa,UAAU,EAAC,QAAM,EAACb,QAAQ,CAACa,UAAU,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG;IAAA;MAAA8E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClF,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CACN;EAED,MAAMwC,WAAW,GAAGA,CAAA,KAAM;IACxB;IACA,MAAMC,eAAe,GAAGvI,QAAQ,CAACc,QAAQ;IACzC,MAAM0H,kBAAkB,GAAGxI,QAAQ,CAACe,YAAY;IAEhD,oBACE/B,OAAA;MAAA8F,QAAA,gBACE9F,OAAA;QAAIyF,KAAK,EAAE;UAAEG,YAAY,EAAE;QAAO,CAAE;QAAAE,QAAA,EAAC;MAAiB;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAE3D9G,OAAA;QAAKwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,gBACzB9F,OAAA;UAAOwH,SAAS,EAAC,qBAAqB;UAAA1B,QAAA,EAAC;QAAuB;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACtE9G,OAAA;UACEiJ,IAAI,EAAC,QAAQ;UACb7E,IAAI,EAAC,YAAY;UACjBoD,SAAS,EAAC,cAAc;UACxBnD,KAAK,EAAErD,QAAQ,CAACY,UAAW;UAC3B6F,QAAQ,EAAEvD,YAAa;UACvBM,IAAI,EAAC,MAAM;UACX0E,GAAG,EAAC,GAAG;UACPxB,QAAQ;QAAA;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAEN9G,OAAA;QAAKwH,SAAS,EAAC,YAAY;QAAA1B,QAAA,gBACzB9F,OAAA;UAAOwH,SAAS,EAAC,YAAY;UAAA1B,QAAA,EAAC;QAAoB;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC1D9G,OAAA;UACEiJ,IAAI,EAAC,QAAQ;UACb7E,IAAI,EAAC,gBAAgB;UACrBoD,SAAS,EAAC,cAAc;UACxBnD,KAAK,EAAErD,QAAQ,CAACgB,cAAe;UAC/ByF,QAAQ,EAAEvD,YAAa;UACvBM,IAAI,EAAC,MAAM;UACX0E,GAAG,EAAC;QAAG;UAAAvC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAEN9G,OAAA;QAAKyF,KAAK,EAAE;UACVqC,SAAS,EAAE,MAAM;UACjBC,OAAO,EAAE,MAAM;UACfrB,UAAU,EAAE,SAAS;UACrBM,YAAY,EAAE;QAChB,CAAE;QAAAlB,QAAA,gBACA9F,OAAA;UAAIyF,KAAK,EAAE;YAAEG,YAAY,EAAE,MAAM;YAAEyB,QAAQ,EAAE;UAAO,CAAE;UAAAvB,QAAA,EAAC;QAAiB;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAE7E9G,OAAA;UAAKyF,KAAK,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAEC,cAAc,EAAE,eAAe;YAAEC,YAAY,EAAE;UAAM,CAAE;UAAAE,QAAA,gBACpF9F,OAAA;YAAA8F,QAAA,EAAM;UAAoB;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACjC9G,OAAA;YAAA8F,QAAA,GAAQ,QAAC,EAACxD,UAAU,CAACtB,QAAQ,CAACY,UAAU,IAAI,CAAC,CAAC,CAACmH,OAAO,CAAC,CAAC,CAAC;UAAA;YAAApC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChE,CAAC,eAEN9G,OAAA;UAAKyF,KAAK,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAEC,cAAc,EAAE,eAAe;YAAEC,YAAY,EAAE;UAAM,CAAE;UAAAE,QAAA,gBACpF9F,OAAA;YAAA8F,QAAA,EAAM;UAAc;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC3B9G,OAAA;YAAA8F,QAAA,EAAS9E,QAAQ,CAACa;UAAU;YAAA8E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnC,CAAC,eAEN9G,OAAA;UAAKyF,KAAK,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAEC,cAAc,EAAE,eAAe;YAAEC,YAAY,EAAE;UAAM,CAAE;UAAAE,QAAA,gBACpF9F,OAAA;YAAA8F,QAAA,EAAM;UAAmB;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAChC9G,OAAA;YAAA8F,QAAA,GAAQ,QAAC,EAACyD,eAAe,CAACR,OAAO,CAAC,CAAC,CAAC;UAAA;YAAApC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3C,CAAC,eAEN9G,OAAA;UAAKyF,KAAK,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAEC,cAAc,EAAE,eAAe;YAAEC,YAAY,EAAE;UAAM,CAAE;UAAAE,QAAA,gBACpF9F,OAAA;YAAA8F,QAAA,EAAM;UAAS;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACtB9G,OAAA;YAAA8F,QAAA,GAAQ,QAAC,EAACxD,UAAU,CAACtB,QAAQ,CAACgB,cAAc,CAAC,CAAC+G,OAAO,CAAC,CAAC,CAAC;UAAA;YAAApC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/D,CAAC,eAEN9G,OAAA;UAAKyF,KAAK,EAAE;YACVgE,SAAS,EAAE,mBAAmB;YAC9B3B,SAAS,EAAE,MAAM;YACjB4B,UAAU,EAAE,MAAM;YAClBhE,OAAO,EAAE,MAAM;YACfC,cAAc,EAAE,eAAe;YAC/B0B,QAAQ,EAAE,MAAM;YAChBC,UAAU,EAAE,KAAK;YACjBL,KAAK,EAAE;UACT,CAAE;UAAAnB,QAAA,gBACA9F,OAAA;YAAA8F,QAAA,EAAM;UAAgB;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC7B9G,OAAA;YAAA8F,QAAA,GAAM,QAAC,EAAC0D,kBAAkB,CAACT,OAAO,CAAC,CAAC,CAAC;UAAA;YAAApC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;EAED,MAAM6C,WAAW,GAAGA,CAAA,kBAClB3J,OAAA;IAAA8F,QAAA,gBACE9F,OAAA;MAAIyF,KAAK,EAAE;QAAEG,YAAY,EAAE;MAAO,CAAE;MAAAE,QAAA,EAAC;IAAsB;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEhE9G,OAAA;MAAKyF,KAAK,EAAE;QACVsC,OAAO,EAAE,MAAM;QACfrB,UAAU,EAAE,SAAS;QACrBkD,MAAM,EAAE,mBAAmB;QAC3B5C,YAAY,EAAE,KAAK;QACnBpB,YAAY,EAAE,MAAM;QACpByB,QAAQ,EAAE;MACZ,CAAE;MAAAvB,QAAA,GAAC,eACE,eAAA9F,OAAA;QAAA8F,QAAA,EAAQ;MAAW;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,gGAEjC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAEN9G,OAAA,CAACV,WAAW;MACVuK,QAAQ,EAAE7I,QAAQ,CAACiB,SAAU;MAC7B6H,SAAS,EAAC,QAAQ;MAClBC,cAAc,EAAE5H;IAAkB;MAAAwE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CACN;EAED,oBACE9G,OAAA;IAAA8F,QAAA,gBACE9F,OAAA;MAAKwH,SAAS,EAAC,SAAS;MAAA1B,QAAA,eACtB9F,OAAA;QAAKyF,KAAK,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAEwB,UAAU,EAAE,QAAQ;UAAE8C,GAAG,EAAE;QAAO,CAAE;QAAAlE,QAAA,gBACjE9F,OAAA;UACEiK,OAAO,EAAEA,CAAA,KAAM5J,QAAQ,CAAC,UAAU,CAAE;UACpCmH,SAAS,EAAC,2BAA2B;UAAA1B,QAAA,eAErC9F,OAAA,CAACT,SAAS;YAAC6H,IAAI,EAAE;UAAG;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjB,CAAC,eACT9G,OAAA;UAAA8F,QAAA,EAAI;QAAc;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAEN9G,OAAA;MAAKwH,SAAS,EAAC,cAAc;MAAA1B,QAAA,eAC3B9F,OAAA;QAAKwH,SAAS,EAAC,MAAM;QAAC/B,KAAK,EAAE;UAAEyE,QAAQ,EAAE,OAAO;UAAEC,MAAM,EAAE;QAAS,CAAE;QAAArE,QAAA,eACnE9F,OAAA;UAAKwH,SAAS,EAAC,WAAW;UAAC/B,KAAK,EAAE;YAAEsC,OAAO,EAAE;UAAO,CAAE;UAAAjC,QAAA,GACnDN,mBAAmB,CAAC,CAAC,eAEtBxF,OAAA;YAAKyF,KAAK,EAAE;cAAE2E,SAAS,EAAE;YAAQ,CAAE;YAAAtE,QAAA,GAChCxF,WAAW,KAAK,CAAC,IAAIiH,WAAW,CAAC,CAAC,EAClCjH,WAAW,KAAK,CAAC,IAAIgI,WAAW,CAAC,CAAC,EAClChI,WAAW,KAAK,CAAC,IAAI0I,WAAW,CAAC,CAAC,EAClC1I,WAAW,KAAK,CAAC,IAAIgJ,WAAW,CAAC,CAAC,EAClChJ,WAAW,KAAK,CAAC,IAAIqJ,WAAW,CAAC,CAAC;UAAA;YAAAhD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC,eAEN9G,OAAA;YAAKyF,KAAK,EAAE;cACVC,OAAO,EAAE,MAAM;cACfC,cAAc,EAAE,eAAe;cAC/BmC,SAAS,EAAE,MAAM;cACjB4B,UAAU,EAAE,MAAM;cAClBD,SAAS,EAAE;YACb,CAAE;YAAA3D,QAAA,GACCxF,WAAW,GAAG,CAAC,IAAIA,WAAW,GAAG,CAAC,iBACjCN,OAAA;cACEiK,OAAO,EAAEtF,cAAe;cACxB6C,SAAS,EAAC,mBAAmB;cAAA1B,QAAA,gBAE7B9F,OAAA,CAACT,SAAS;gBAAC6H,IAAI,EAAE;cAAG;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,YAEzB;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CACT,EAEAxG,WAAW,GAAG,CAAC,iBACdN,OAAA;cACEiK,OAAO,EAAExF,UAAW;cACpB+C,SAAS,EAAC,iBAAiB;cAC3B/B,KAAK,EAAE;gBAAE4E,UAAU,EAAE;cAAO,CAAE;cAAAvE,QAAA,GAC/B,QAEC,eAAA9F,OAAA,CAACR,UAAU;gBAAC4H,IAAI,EAAE;cAAG;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClB,CACT,EAEAxG,WAAW,KAAK,CAAC,iBAChBN,OAAA;cACEiK,OAAO,EAAExF,UAAW;cACpB+C,SAAS,EAAC,iBAAiB;cAC3B8C,QAAQ,EAAE9J,OAAQ;cAClBiF,KAAK,EAAE;gBAAE4E,UAAU,EAAE;cAAO,CAAE;cAAAvE,QAAA,EAE7BtF,OAAO,GAAG,cAAc,gBACvBR,OAAA,CAAAE,SAAA;gBAAA4F,QAAA,gBACE9F,OAAA,CAACP,IAAI;kBAAC2H,IAAI,EAAE;gBAAG;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,iBAEpB;cAAA,eAAE;YACH;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CACT,EAEAxG,WAAW,KAAK,CAAC,iBAChBN,OAAA;cACEiK,OAAO,EAAE9E,YAAa;cACtBqC,SAAS,EAAC,iBAAiB;cAC3B/B,KAAK,EAAE;gBAAE4E,UAAU,EAAE;cAAO,CAAE;cAAAvE,QAAA,gBAE9B9F,OAAA,CAACF,WAAW;gBAACsH,IAAI,EAAE;cAAG;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,YAE3B;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CACT;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC1G,EAAA,CA7pBID,SAAS;EAAA,QACIlB,WAAW;AAAA;AAAAsL,EAAA,GADxBpK,SAAS;AA+pBf,eAAeA,SAAS;AAAC,IAAAoK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}