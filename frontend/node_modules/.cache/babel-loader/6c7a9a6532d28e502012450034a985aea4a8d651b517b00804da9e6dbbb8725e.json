{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bncrentcar\\\\frontend\\\\src\\\\components\\\\NewRental.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport PhotoUpload from './PhotoUpload';\nimport { ArrowLeft, ArrowRight, Save, User, Car, Calendar, Camera, CheckCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NewRental = () => {\n  _s();\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [customers, setCustomers] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [formData, setFormData] = useState({\n    // Step 1: Cliente\n    customer_id: '',\n    // Step 2: Veicolo\n    vehicle_id: '',\n    category_id: '',\n    // Step 3: Date e dettagli\n    pickup_date: '',\n    expected_return_date: '',\n    pickup_location: 'BNC Energy Rent Car',\n    pickup_fuel_level: '100',\n    pickup_km: '',\n    pickup_damages: '',\n    // Step 4: Tariffe\n    daily_rate: '',\n    total_days: 1,\n    // Step 5: Foto (gestito separatamente)\n    rental_id: null\n  });\n  const [uploadedPhotos, setUploadedPhotos] = useState([]);\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n  useEffect(() => {\n    if (formData.pickup_date && formData.expected_return_date) {\n      calculateDays();\n    }\n  }, [formData.pickup_date, formData.expected_return_date]);\n  useEffect(() => {\n    if (formData.vehicle_id) {\n      const selectedVehicle = vehicles.find(v => v.id === parseInt(formData.vehicle_id));\n      if (selectedVehicle) {\n        setFormData(prev => ({\n          ...prev,\n          category_id: selectedVehicle.category_id,\n          daily_rate: selectedVehicle.daily_rate,\n          pickup_km: selectedVehicle.current_km\n        }));\n      }\n    }\n  }, [formData.vehicle_id, vehicles]);\n  const loadInitialData = async () => {\n    try {\n      const [customersRes, vehiclesRes, categoriesRes] = await Promise.all([customersAPI.getAll({\n        limit: 1000\n      }), vehiclesAPI.getAll({\n        available_only: 'true',\n        limit: 1000\n      }), vehiclesAPI.getCategories()]);\n      setCustomers(customersRes.data.data);\n      setVehicles(vehiclesRes.data.data);\n      setCategories(categoriesRes.data.data);\n    } catch (error) {\n      console.error('Errore caricamento dati:', error);\n      toast.error('Errore nel caricamento dei dati');\n    }\n  };\n  const calculateDays = () => {\n    const start = new Date(formData.pickup_date);\n    const end = new Date(formData.expected_return_date);\n    const diffTime = Math.abs(end - start);\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    setFormData(prev => ({\n      ...prev,\n      total_days: diffDays || 1\n    }));\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const validateStep = step => {\n    switch (step) {\n      case 1:\n        if (!formData.customer_id) {\n          toast.error('Seleziona un cliente');\n          return false;\n        }\n        break;\n      case 2:\n        if (!formData.vehicle_id) {\n          toast.error('Seleziona un veicolo');\n          return false;\n        }\n        break;\n      case 3:\n        if (!formData.pickup_date || !formData.expected_return_date || !formData.pickup_km) {\n          toast.error('Compila tutti i campi obbligatori');\n          return false;\n        }\n        break;\n      case 4:\n        if (!formData.daily_rate) {\n          toast.error('Inserisci la tariffa giornaliera');\n          return false;\n        }\n        break;\n    }\n    return true;\n  };\n  const handleNext = () => {\n    if (validateStep(currentStep)) {\n      if (currentStep === 4) {\n        handleSubmit();\n      } else {\n        setCurrentStep(currentStep + 1);\n      }\n    }\n  };\n  const handlePrevious = () => {\n    setCurrentStep(currentStep - 1);\n  };\n  const handleSubmit = async () => {\n    try {\n      setLoading(true);\n      const rentalData = {\n        customer_id: parseInt(formData.customer_id),\n        vehicle_id: parseInt(formData.vehicle_id),\n        pickup_date: formData.pickup_date,\n        expected_return_date: formData.expected_return_date,\n        pickup_location: formData.pickup_location,\n        pickup_fuel_level: parseFloat(formData.pickup_fuel_level),\n        pickup_km: parseInt(formData.pickup_km),\n        pickup_damages: formData.pickup_damages,\n        daily_rate: parseFloat(formData.daily_rate),\n        total_days: parseInt(formData.total_days),\n        extras: []\n      };\n      const response = await rentalsAPI.create(rentalData);\n      setFormData(prev => ({\n        ...prev,\n        rental_id: response.data.data.rental_id\n      }));\n      setCurrentStep(5); // Vai allo step foto\n\n      toast.success('Noleggio creato con successo!');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Errore creazione noleggio:', error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Errore nella creazione del noleggio');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFinish = () => {\n    if (uploadedPhotos.length === 0) {\n      toast.error('Carica almeno una foto del veicolo');\n      return;\n    }\n    toast.success('Noleggio completato con successo!');\n    navigate(`/rentals/${formData.rental_id}`);\n  };\n  const steps = [{\n    number: 1,\n    title: 'Cliente',\n    icon: User\n  }, {\n    number: 2,\n    title: 'Veicolo',\n    icon: Car\n  }, {\n    number: 3,\n    title: 'Dettagli',\n    icon: Calendar\n  }, {\n    number: 4,\n    title: 'Tariffe',\n    icon: CheckCircle\n  }, {\n    number: 5,\n    title: 'Foto',\n    icon: Camera\n  }];\n  const renderStepIndicator = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      marginBottom: '32px',\n      position: 'relative'\n    },\n    children: steps.map((step, index) => {\n      const Icon = step.icon;\n      const isActive = currentStep === step.number;\n      const isCompleted = currentStep > step.number;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          textAlign: 'center',\n          position: 'relative'\n        },\n        children: [index > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '20px',\n            left: '-50%',\n            right: '50%',\n            height: '2px',\n            background: isCompleted ? '#1a4d2e' : '#dee2e6'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '40px',\n            height: '40px',\n            borderRadius: '50%',\n            background: isActive ? '#1a4d2e' : isCompleted ? '#4a7c59' : '#dee2e6',\n            color: isActive || isCompleted ? 'white' : '#6c757d',\n            display: 'inline-flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            marginBottom: '8px',\n            position: 'relative',\n            zIndex: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Icon, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            fontWeight: isActive ? '600' : '400',\n            color: isActive ? '#1a4d2e' : '#6c757d'\n          },\n          children: step.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, step.number, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n  const renderStep1 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Seleziona Cliente\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label required\",\n        children: \"Cliente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"customer_id\",\n        className: \"form-control\",\n        value: formData.customer_id,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Seleziona Cliente --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), customers.map(customer => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: customer.id,\n          children: [customer.full_name, \" - \", customer.fiscal_code]\n        }, customer.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), formData.customer_id && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        padding: '16px',\n        background: '#f8f9fa',\n        borderRadius: '4px'\n      },\n      children: (() => {\n        const customer = customers.find(c => c.id === parseInt(formData.customer_id));\n        return customer ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Dettagli Cliente:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '8px',\n              fontSize: '14px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDCDE \", customer.phone]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDCE7 \", customer.email]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDCCD \", customer.address, \", \", customer.city]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83E\\uDEAA Patente: \", customer.license_number]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 15\n        }, this) : null;\n      })()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 5\n  }, this);\n  const renderStep2 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Seleziona Veicolo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label required\",\n        children: \"Veicolo Disponibile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"vehicle_id\",\n        className: \"form-control\",\n        value: formData.vehicle_id,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Seleziona Veicolo --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), vehicles.map(vehicle => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: vehicle.id,\n          children: [vehicle.brand, \" \", vehicle.model, \" - \", vehicle.license_plate, vehicle.category_name && ` (${vehicle.category_name})`]\n        }, vehicle.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this), formData.vehicle_id && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        padding: '16px',\n        background: '#f8f9fa',\n        borderRadius: '4px'\n      },\n      children: (() => {\n        const vehicle = vehicles.find(v => v.id === parseInt(formData.vehicle_id));\n        return vehicle ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Dettagli Veicolo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '8px',\n              fontSize: '14px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDE97 \", vehicle.brand, \" \", vehicle.model, \" (\", vehicle.year, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83C\\uDFF7\\uFE0F Targa: \", vehicle.license_plate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83C\\uDFA8 Colore: \", vehicle.color]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\u26FD Carburante: \", vehicle.fuel_type]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\u2699\\uFE0F Cambio: \", vehicle.transmission]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDCCA Km attuali: \", vehicle.current_km]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 19\n            }, this), vehicle.daily_rate && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '8px',\n                fontWeight: '600',\n                color: '#1a4d2e'\n              },\n              children: [\"\\uD83D\\uDCB0 Tariffa giornaliera: \\u20AC\", parseFloat(vehicle.daily_rate).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 15\n        }, this) : null;\n      })()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 300,\n    columnNumber: 5\n  }, this);\n  const renderStep3 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Dettagli Ritiro e Consegna\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Data e Ora Ritiro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          name: \"pickup_date\",\n          className: \"form-control\",\n          value: formData.pickup_date,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Data e Ora Rientro Previsto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          name: \"expected_return_date\",\n          className: \"form-control\",\n          value: formData.expected_return_date,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Luogo di Ritiro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"pickup_location\",\n        className: \"form-control\",\n        value: formData.pickup_location,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Livello Carburante (%)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"pickup_fuel_level\",\n          className: \"form-control\",\n          value: formData.pickup_fuel_level,\n          onChange: handleChange,\n          min: \"0\",\n          max: \"100\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Km in Uscita\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"pickup_km\",\n          className: \"form-control\",\n          value: formData.pickup_km,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Danni Esistenti\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"pickup_damages\",\n        className: \"form-control\",\n        value: formData.pickup_damages,\n        onChange: handleChange,\n        rows: \"3\",\n        placeholder: \"Descrivi eventuali danni o graffi presenti sul veicolo...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this), formData.total_days > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        padding: '16px',\n        background: '#e8f5e9',\n        borderRadius: '4px',\n        fontSize: '14px',\n        fontWeight: '600',\n        color: '#1a4d2e'\n      },\n      children: [\"\\uD83D\\uDCC5 Durata noleggio: \", formData.total_days, \" giorn\", formData.total_days === 1 ? 'o' : 'i']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 356,\n    columnNumber: 5\n  }, this);\n  const renderStep4 = () => {\n    const subtotal = parseFloat(formData.daily_rate || 0) * parseInt(formData.total_days || 1);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: '24px'\n        },\n        children: \"Riepilogo Tariffe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label required\",\n          children: \"Tariffa Giornaliera (\\u20AC)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"daily_rate\",\n          className: \"form-control\",\n          value: formData.daily_rate,\n          onChange: handleChange,\n          step: \"0.01\",\n          min: \"0\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '24px',\n          padding: '20px',\n          background: '#f8f9fa',\n          borderRadius: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            marginBottom: '16px',\n            fontSize: '16px'\n          },\n          children: \"Riepilogo Importi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Tariffa giornaliera:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"\\u20AC\", parseFloat(formData.daily_rate || 0).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Numero giorni:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: formData.total_days\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderTop: '2px solid #dee2e6',\n            marginTop: '12px',\n            paddingTop: '12px',\n            display: 'flex',\n            justifyContent: 'space-between',\n            fontSize: '18px',\n            fontWeight: '700',\n            color: '#1a4d2e'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"TOTALE:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u20AC\", subtotal.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this);\n  };\n  const renderStep5 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Foto Veicolo in Uscita\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '16px',\n        background: '#fff3cd',\n        border: '1px solid #ffc107',\n        borderRadius: '4px',\n        marginBottom: '24px',\n        fontSize: '14px'\n      },\n      children: [\"\\u26A0\\uFE0F \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Importante:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 12\n      }, this), \" Scatta foto di tutti i lati del veicolo per documentare lo stato al momento della consegna.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PhotoUpload, {\n      rentalId: formData.rental_id,\n      photoType: \"pickup\",\n      onPhotosChange: setUploadedPhotos\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 510,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-bar\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '16px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/rentals'),\n          className: \"btn btn-outline-secondary\",\n          children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Nuovo Noleggio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-area\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          maxWidth: '900px',\n          margin: '0 auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          style: {\n            padding: '32px'\n          },\n          children: [renderStepIndicator(), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              minHeight: '400px'\n            },\n            children: [currentStep === 1 && renderStep1(), currentStep === 2 && renderStep2(), currentStep === 3 && renderStep3(), currentStep === 4 && renderStep4(), currentStep === 5 && renderStep5()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              marginTop: '32px',\n              paddingTop: '24px',\n              borderTop: '1px solid #dee2e6'\n            },\n            children: [currentStep > 1 && currentStep < 5 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePrevious,\n              className: \"btn btn-secondary\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 19\n              }, this), \"Indietro\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 17\n            }, this), currentStep < 4 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNext,\n              className: \"btn btn-primary\",\n              style: {\n                marginLeft: 'auto'\n              },\n              children: [\"Avanti\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 17\n            }, this), currentStep === 4 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNext,\n              className: \"btn btn-primary\",\n              disabled: loading,\n              style: {\n                marginLeft: 'auto'\n              },\n              children: loading ? 'Creazione...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 23\n                }, this), \"Crea Noleggio\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 17\n            }, this), currentStep === 5 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleFinish,\n              className: \"btn btn-success\",\n              style: {\n                marginLeft: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 19\n              }, this), \"Completa\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 534,\n    columnNumber: 5\n  }, this);\n};\n_s(NewRental, \"OCjjIROQdMz6D+3ECCF0P5gf1AY=\", false, function () {\n  return [useNavigate];\n});\n_c = NewRental;\nexport default NewRental;\nvar _c;\n$RefreshReg$(_c, \"NewRental\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","rentalsAPI","customersAPI","vehiclesAPI","toast","PhotoUpload","ArrowLeft","ArrowRight","Save","User","Car","Calendar","Camera","CheckCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","NewRental","_s","navigate","currentStep","setCurrentStep","loading","setLoading","customers","setCustomers","vehicles","setVehicles","categories","setCategories","formData","setFormData","customer_id","vehicle_id","category_id","pickup_date","expected_return_date","pickup_location","pickup_fuel_level","pickup_km","pickup_damages","daily_rate","total_days","rental_id","uploadedPhotos","setUploadedPhotos","loadInitialData","calculateDays","selectedVehicle","find","v","id","parseInt","prev","current_km","customersRes","vehiclesRes","categoriesRes","Promise","all","getAll","limit","available_only","getCategories","data","error","console","start","Date","end","diffTime","Math","abs","diffDays","ceil","handleChange","e","name","value","target","validateStep","step","handleNext","handleSubmit","handlePrevious","rentalData","parseFloat","extras","response","create","success","_error$response","_error$response$data","message","handleFinish","length","steps","number","title","icon","renderStepIndicator","style","display","justifyContent","marginBottom","position","children","map","index","Icon","isActive","isCompleted","flex","textAlign","top","left","right","height","background","fileName","_jsxFileName","lineNumber","columnNumber","width","borderRadius","color","alignItems","zIndex","size","fontSize","fontWeight","renderStep1","className","onChange","required","customer","full_name","fiscal_code","marginTop","padding","c","phone","email","address","city","license_number","renderStep2","vehicle","brand","model","license_plate","category_name","year","fuel_type","transmission","toFixed","renderStep3","type","min","max","rows","placeholder","renderStep4","subtotal","borderTop","paddingTop","renderStep5","border","rentalId","photoType","onPhotosChange","gap","onClick","maxWidth","margin","minHeight","marginLeft","disabled","_c","$RefreshReg$"],"sources":["D:/Bncrentcar/frontend/src/components/NewRental.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\r\nimport toast from 'react-hot-toast';\r\nimport PhotoUpload from './PhotoUpload';\r\nimport { \r\n  ArrowLeft, \r\n  ArrowRight, \r\n  Save, \r\n  User, \r\n  Car, \r\n  Calendar,\r\n  Camera,\r\n  CheckCircle \r\n} from 'lucide-react';\r\n\r\nconst NewRental = () => {\r\n  const navigate = useNavigate();\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const [customers, setCustomers] = useState([]);\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  const [formData, setFormData] = useState({\r\n    // Step 1: Cliente\r\n    customer_id: '',\r\n    \r\n    // Step 2: Veicolo\r\n    vehicle_id: '',\r\n    category_id: '',\r\n    \r\n    // Step 3: Date e dettagli\r\n    pickup_date: '',\r\n    expected_return_date: '',\r\n    pickup_location: 'BNC Energy Rent Car',\r\n    pickup_fuel_level: '100',\r\n    pickup_km: '',\r\n    pickup_damages: '',\r\n    \r\n    // Step 4: Tariffe\r\n    daily_rate: '',\r\n    total_days: 1,\r\n    \r\n    // Step 5: Foto (gestito separatamente)\r\n    rental_id: null,\r\n  });\r\n\r\n  const [uploadedPhotos, setUploadedPhotos] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (formData.pickup_date && formData.expected_return_date) {\r\n      calculateDays();\r\n    }\r\n  }, [formData.pickup_date, formData.expected_return_date]);\r\n\r\n  useEffect(() => {\r\n    if (formData.vehicle_id) {\r\n      const selectedVehicle = vehicles.find(v => v.id === parseInt(formData.vehicle_id));\r\n      if (selectedVehicle) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          category_id: selectedVehicle.category_id,\r\n          daily_rate: selectedVehicle.daily_rate,\r\n          pickup_km: selectedVehicle.current_km,\r\n        }));\r\n      }\r\n    }\r\n  }, [formData.vehicle_id, vehicles]);\r\n\r\n  const loadInitialData = async () => {\r\n    try {\r\n      const [customersRes, vehiclesRes, categoriesRes] = await Promise.all([\r\n        customersAPI.getAll({ limit: 1000 }),\r\n        vehiclesAPI.getAll({ available_only: 'true', limit: 1000 }),\r\n        vehiclesAPI.getCategories(),\r\n      ]);\r\n\r\n      setCustomers(customersRes.data.data);\r\n      setVehicles(vehiclesRes.data.data);\r\n      setCategories(categoriesRes.data.data);\r\n    } catch (error) {\r\n      console.error('Errore caricamento dati:', error);\r\n      toast.error('Errore nel caricamento dei dati');\r\n    }\r\n  };\r\n\r\n  const calculateDays = () => {\r\n    const start = new Date(formData.pickup_date);\r\n    const end = new Date(formData.expected_return_date);\r\n    const diffTime = Math.abs(end - start);\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    setFormData(prev => ({ ...prev, total_days: diffDays || 1 }));\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const validateStep = (step) => {\r\n    switch (step) {\r\n      case 1:\r\n        if (!formData.customer_id) {\r\n          toast.error('Seleziona un cliente');\r\n          return false;\r\n        }\r\n        break;\r\n      case 2:\r\n        if (!formData.vehicle_id) {\r\n          toast.error('Seleziona un veicolo');\r\n          return false;\r\n        }\r\n        break;\r\n      case 3:\r\n        if (!formData.pickup_date || !formData.expected_return_date || !formData.pickup_km) {\r\n          toast.error('Compila tutti i campi obbligatori');\r\n          return false;\r\n        }\r\n        break;\r\n      case 4:\r\n        if (!formData.daily_rate) {\r\n          toast.error('Inserisci la tariffa giornaliera');\r\n          return false;\r\n        }\r\n        break;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (validateStep(currentStep)) {\r\n      if (currentStep === 4) {\r\n        handleSubmit();\r\n      } else {\r\n        setCurrentStep(currentStep + 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    setCurrentStep(currentStep - 1);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const rentalData = {\r\n        customer_id: parseInt(formData.customer_id),\r\n        vehicle_id: parseInt(formData.vehicle_id),\r\n        pickup_date: formData.pickup_date,\r\n        expected_return_date: formData.expected_return_date,\r\n        pickup_location: formData.pickup_location,\r\n        pickup_fuel_level: parseFloat(formData.pickup_fuel_level),\r\n        pickup_km: parseInt(formData.pickup_km),\r\n        pickup_damages: formData.pickup_damages,\r\n        daily_rate: parseFloat(formData.daily_rate),\r\n        total_days: parseInt(formData.total_days),\r\n        extras: [],\r\n      };\r\n\r\n      const response = await rentalsAPI.create(rentalData);\r\n      \r\n      setFormData(prev => ({ ...prev, rental_id: response.data.data.rental_id }));\r\n      setCurrentStep(5); // Vai allo step foto\r\n      \r\n      toast.success('Noleggio creato con successo!');\r\n    } catch (error) {\r\n      console.error('Errore creazione noleggio:', error);\r\n      toast.error(error.response?.data?.message || 'Errore nella creazione del noleggio');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFinish = () => {\r\n    if (uploadedPhotos.length === 0) {\r\n      toast.error('Carica almeno una foto del veicolo');\r\n      return;\r\n    }\r\n    toast.success('Noleggio completato con successo!');\r\n    navigate(`/rentals/${formData.rental_id}`);\r\n  };\r\n\r\n  const steps = [\r\n    { number: 1, title: 'Cliente', icon: User },\r\n    { number: 2, title: 'Veicolo', icon: Car },\r\n    { number: 3, title: 'Dettagli', icon: Calendar },\r\n    { number: 4, title: 'Tariffe', icon: CheckCircle },\r\n    { number: 5, title: 'Foto', icon: Camera },\r\n  ];\r\n\r\n  const renderStepIndicator = () => (\r\n    <div style={{\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      marginBottom: '32px',\r\n      position: 'relative',\r\n    }}>\r\n      {steps.map((step, index) => {\r\n        const Icon = step.icon;\r\n        const isActive = currentStep === step.number;\r\n        const isCompleted = currentStep > step.number;\r\n        \r\n        return (\r\n          <div key={step.number} style={{ flex: 1, textAlign: 'center', position: 'relative' }}>\r\n            {index > 0 && (\r\n              <div style={{\r\n                position: 'absolute',\r\n                top: '20px',\r\n                left: '-50%',\r\n                right: '50%',\r\n                height: '2px',\r\n                background: isCompleted ? '#1a4d2e' : '#dee2e6',\r\n              }} />\r\n            )}\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              borderRadius: '50%',\r\n              background: isActive ? '#1a4d2e' : isCompleted ? '#4a7c59' : '#dee2e6',\r\n              color: isActive || isCompleted ? 'white' : '#6c757d',\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginBottom: '8px',\r\n              position: 'relative',\r\n              zIndex: 1,\r\n            }}>\r\n              <Icon size={20} />\r\n            </div>\r\n            <div style={{\r\n              fontSize: '12px',\r\n              fontWeight: isActive ? '600' : '400',\r\n              color: isActive ? '#1a4d2e' : '#6c757d',\r\n            }}>\r\n              {step.title}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n\r\n  const renderStep1 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Seleziona Cliente</h3>\r\n      \r\n      <div className=\"form-group\">\r\n        <label className=\"form-label required\">Cliente</label>\r\n        <select\r\n          name=\"customer_id\"\r\n          className=\"form-control\"\r\n          value={formData.customer_id}\r\n          onChange={handleChange}\r\n          required\r\n        >\r\n          <option value=\"\">-- Seleziona Cliente --</option>\r\n          {customers.map(customer => (\r\n            <option key={customer.id} value={customer.id}>\r\n              {customer.full_name} - {customer.fiscal_code}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {formData.customer_id && (\r\n        <div style={{\r\n          marginTop: '20px',\r\n          padding: '16px',\r\n          background: '#f8f9fa',\r\n          borderRadius: '4px',\r\n        }}>\r\n          {(() => {\r\n            const customer = customers.find(c => c.id === parseInt(formData.customer_id));\r\n            return customer ? (\r\n              <div>\r\n                <strong>Dettagli Cliente:</strong>\r\n                <div style={{ marginTop: '8px', fontSize: '14px' }}>\r\n                  <div>ğŸ“ {customer.phone}</div>\r\n                  <div>ğŸ“§ {customer.email}</div>\r\n                  <div>ğŸ“ {customer.address}, {customer.city}</div>\r\n                  <div>ğŸªª Patente: {customer.license_number}</div>\r\n                </div>\r\n              </div>\r\n            ) : null;\r\n          })()}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderStep2 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Seleziona Veicolo</h3>\r\n      \r\n      <div className=\"form-group\">\r\n        <label className=\"form-label required\">Veicolo Disponibile</label>\r\n        <select\r\n          name=\"vehicle_id\"\r\n          className=\"form-control\"\r\n          value={formData.vehicle_id}\r\n          onChange={handleChange}\r\n          required\r\n        >\r\n          <option value=\"\">-- Seleziona Veicolo --</option>\r\n          {vehicles.map(vehicle => (\r\n            <option key={vehicle.id} value={vehicle.id}>\r\n              {vehicle.brand} {vehicle.model} - {vehicle.license_plate} \r\n              {vehicle.category_name && ` (${vehicle.category_name})`}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {formData.vehicle_id && (\r\n        <div style={{\r\n          marginTop: '20px',\r\n          padding: '16px',\r\n          background: '#f8f9fa',\r\n          borderRadius: '4px',\r\n        }}>\r\n          {(() => {\r\n            const vehicle = vehicles.find(v => v.id === parseInt(formData.vehicle_id));\r\n            return vehicle ? (\r\n              <div>\r\n                <strong>Dettagli Veicolo:</strong>\r\n                <div style={{ marginTop: '8px', fontSize: '14px' }}>\r\n                  <div>ğŸš— {vehicle.brand} {vehicle.model} ({vehicle.year})</div>\r\n                  <div>ğŸ·ï¸ Targa: {vehicle.license_plate}</div>\r\n                  <div>ğŸ¨ Colore: {vehicle.color}</div>\r\n                  <div>â›½ Carburante: {vehicle.fuel_type}</div>\r\n                  <div>âš™ï¸ Cambio: {vehicle.transmission}</div>\r\n                  <div>ğŸ“Š Km attuali: {vehicle.current_km}</div>\r\n                  {vehicle.daily_rate && (\r\n                    <div style={{ marginTop: '8px', fontWeight: '600', color: '#1a4d2e' }}>\r\n                      ğŸ’° Tariffa giornaliera: â‚¬{parseFloat(vehicle.daily_rate).toFixed(2)}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null;\r\n          })()}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderStep3 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Dettagli Ritiro e Consegna</h3>\r\n      \r\n      <div className=\"form-row\">\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Data e Ora Ritiro</label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            name=\"pickup_date\"\r\n            className=\"form-control\"\r\n            value={formData.pickup_date}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Data e Ora Rientro Previsto</label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            name=\"expected_return_date\"\r\n            className=\"form-control\"\r\n            value={formData.expected_return_date}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">Luogo di Ritiro</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"pickup_location\"\r\n          className=\"form-control\"\r\n          value={formData.pickup_location}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-row\">\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Livello Carburante (%)</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"pickup_fuel_level\"\r\n            className=\"form-control\"\r\n            value={formData.pickup_fuel_level}\r\n            onChange={handleChange}\r\n            min=\"0\"\r\n            max=\"100\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Km in Uscita</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"pickup_km\"\r\n            className=\"form-control\"\r\n            value={formData.pickup_km}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">Danni Esistenti</label>\r\n        <textarea\r\n          name=\"pickup_damages\"\r\n          className=\"form-control\"\r\n          value={formData.pickup_damages}\r\n          onChange={handleChange}\r\n          rows=\"3\"\r\n          placeholder=\"Descrivi eventuali danni o graffi presenti sul veicolo...\"\r\n        />\r\n      </div>\r\n\r\n      {formData.total_days > 0 && (\r\n        <div style={{\r\n          marginTop: '20px',\r\n          padding: '16px',\r\n          background: '#e8f5e9',\r\n          borderRadius: '4px',\r\n          fontSize: '14px',\r\n          fontWeight: '600',\r\n          color: '#1a4d2e',\r\n        }}>\r\n          ğŸ“… Durata noleggio: {formData.total_days} giorn{formData.total_days === 1 ? 'o' : 'i'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderStep4 = () => {\r\n    const subtotal = parseFloat(formData.daily_rate || 0) * parseInt(formData.total_days || 1);\r\n    \r\n    return (\r\n      <div>\r\n        <h3 style={{ marginBottom: '24px' }}>Riepilogo Tariffe</h3>\r\n        \r\n        <div className=\"form-group\">\r\n          <label className=\"form-label required\">Tariffa Giornaliera (â‚¬)</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"daily_rate\"\r\n            className=\"form-control\"\r\n            value={formData.daily_rate}\r\n            onChange={handleChange}\r\n            step=\"0.01\"\r\n            min=\"0\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div style={{\r\n          marginTop: '24px',\r\n          padding: '20px',\r\n          background: '#f8f9fa',\r\n          borderRadius: '4px',\r\n        }}>\r\n          <h4 style={{ marginBottom: '16px', fontSize: '16px' }}>Riepilogo Importi</h4>\r\n          \r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n            <span>Tariffa giornaliera:</span>\r\n            <strong>â‚¬{parseFloat(formData.daily_rate || 0).toFixed(2)}</strong>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n            <span>Numero giorni:</span>\r\n            <strong>{formData.total_days}</strong>\r\n          </div>\r\n          \r\n          <div style={{ \r\n            borderTop: '2px solid #dee2e6', \r\n            marginTop: '12px', \r\n            paddingTop: '12px',\r\n            display: 'flex', \r\n            justifyContent: 'space-between',\r\n            fontSize: '18px',\r\n            fontWeight: '700',\r\n            color: '#1a4d2e',\r\n          }}>\r\n            <span>TOTALE:</span>\r\n            <span>â‚¬{subtotal.toFixed(2)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderStep5 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Foto Veicolo in Uscita</h3>\r\n      \r\n      <div style={{\r\n        padding: '16px',\r\n        background: '#fff3cd',\r\n        border: '1px solid #ffc107',\r\n        borderRadius: '4px',\r\n        marginBottom: '24px',\r\n        fontSize: '14px',\r\n      }}>\r\n        âš ï¸ <strong>Importante:</strong> Scatta foto di tutti i lati del veicolo \r\n        per documentare lo stato al momento della consegna.\r\n      </div>\r\n\r\n      <PhotoUpload\r\n        rentalId={formData.rental_id}\r\n        photoType=\"pickup\"\r\n        onPhotosChange={setUploadedPhotos}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"top-bar\">\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n          <button\r\n            onClick={() => navigate('/rentals')}\r\n            className=\"btn btn-outline-secondary\"\r\n          >\r\n            <ArrowLeft size={18} />\r\n          </button>\r\n          <h1>Nuovo Noleggio</h1>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"content-area\">\r\n        <div className=\"card\" style={{ maxWidth: '900px', margin: '0 auto' }}>\r\n          <div className=\"card-body\" style={{ padding: '32px' }}>\r\n            {renderStepIndicator()}\r\n            \r\n            <div style={{ minHeight: '400px' }}>\r\n              {currentStep === 1 && renderStep1()}\r\n              {currentStep === 2 && renderStep2()}\r\n              {currentStep === 3 && renderStep3()}\r\n              {currentStep === 4 && renderStep4()}\r\n              {currentStep === 5 && renderStep5()}\r\n            </div>\r\n\r\n            <div style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              marginTop: '32px',\r\n              paddingTop: '24px',\r\n              borderTop: '1px solid #dee2e6',\r\n            }}>\r\n              {currentStep > 1 && currentStep < 5 && (\r\n                <button\r\n                  onClick={handlePrevious}\r\n                  className=\"btn btn-secondary\"\r\n                >\r\n                  <ArrowLeft size={18} />\r\n                  Indietro\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep < 4 && (\r\n                <button\r\n                  onClick={handleNext}\r\n                  className=\"btn btn-primary\"\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  Avanti\r\n                  <ArrowRight size={18} />\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep === 4 && (\r\n                <button\r\n                  onClick={handleNext}\r\n                  className=\"btn btn-primary\"\r\n                  disabled={loading}\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  {loading ? 'Creazione...' : (\r\n                    <>\r\n                      <Save size={18} />\r\n                      Crea Noleggio\r\n                    </>\r\n                  )}\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep === 5 && (\r\n                <button\r\n                  onClick={handleFinish}\r\n                  className=\"btn btn-success\"\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  <CheckCircle size={18} />\r\n                  Completa\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewRental;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}