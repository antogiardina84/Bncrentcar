{"ast":null,"code":"import _objectSpread from\"D:/Bncrentcar/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{rentalsAPI,photosAPI}from'../services/api';import toast from'react-hot-toast';import PhotoUpload from'./PhotoUpload';import{ArrowLeft,Download,CheckCircle,User,Car,Calendar,Camera,X}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RentalDetail=()=>{const{id}=useParams();const navigate=useNavigate();const[rental,setRental]=useState(null);const[loading,setLoading]=useState(true);const[showCloseModal,setShowCloseModal]=useState(false);const[showReturnPhotosModal,setShowReturnPhotosModal]=useState(false);const[closeData,setCloseData]=useState({return_date:new Date().toISOString().slice(0,16),return_location:'',return_fuel_level:'100',return_km:'',return_damages:'',final_total:0,amount_paid:0,amount_due:0});useEffect(()=>{loadRentalDetail();},[id]);const loadRentalDetail=async()=>{try{setLoading(true);const response=await rentalsAPI.getById(id);const rentalData=response.data.data;setRental(rentalData);// Imposta i dati di chiusura con valori predefiniti\nsetCloseData(prev=>_objectSpread(_objectSpread({},prev),{},{return_location:rentalData.pickup_location||'',final_total:rentalData.total_amount||0,amount_paid:rentalData.amount_paid||0,amount_due:rentalData.amount_due||0}));}catch(error){console.error('Errore caricamento dettaglio:',error);toast.error('Errore nel caricamento del noleggio');}finally{setLoading(false);}};const handleDownloadContract=async()=>{try{// Prima genera il contratto\nawait rentalsAPI.generateContract(id);// Poi scaricalo\nconst response=await rentalsAPI.downloadContract(id);const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',\"contratto_\".concat(rental.rental_number,\".pdf\"));document.body.appendChild(link);link.click();link.remove();window.URL.revokeObjectURL(url);toast.success('Contratto scaricato con successo');}catch(error){var _error$response,_error$response$data;console.error('Errore download contratto:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Errore nel download del contratto');}};const handleCloseRental=async()=>{try{// Validazione\nif(!closeData.return_km){toast.error('Inserisci i km al rientro');return;}const returnKm=parseInt(closeData.return_km);const pickupKm=parseInt(rental.pickup_km);if(returnKm<pickupKm){toast.error('I km al rientro non possono essere inferiori ai km in uscita');return;}// Chiudi il noleggio\nawait rentalsAPI.close(id,closeData);toast.success('Noleggio chiuso con successo!');setShowCloseModal(false);// Ricarica i dati del noleggio\nawait loadRentalDetail();// Mostra il modal per caricare foto di rientro\nsetTimeout(()=>{setShowReturnPhotosModal(true);},500);}catch(error){var _error$response2,_error$response2$data;console.error('Errore chiusura noleggio:',error);toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Errore nella chiusura del noleggio');}};const handleReturnPhotosComplete=()=>{setShowReturnPhotosModal(false);toast.success('Foto di rientro salvate!');loadRentalDetail();// Ricarica per mostrare le nuove foto\n};const formatDate=dateString=>{if(!dateString)return'N/A';return new Date(dateString).toLocaleString('it-IT');};const formatCurrency=amount=>{if(!amount&&amount!==0)return'€ 0,00';return new Intl.NumberFormat('it-IT',{style:'currency',currency:'EUR'}).format(amount);};const getStatusBadge=status=>{const statusConfig={active:{label:'Attivo',className:'badge-success'},closed:{label:'Chiuso',className:'badge-secondary'},cancelled:{label:'Annullato',className:'badge-danger'}};const config=statusConfig[status]||statusConfig.active;return/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(config.className),children:config.label});};if(loading){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"top-bar\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Caricamento...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"content-area\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})})]});}if(!rental){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"top-bar\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Noleggio non trovato\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"content-area\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Il noleggio richiesto non \\xE8 stato trovato.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/rentals'),className:\"btn btn-primary mt-2\",children:\"Torna alla lista\"})]})})})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'16px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/rentals'),className:\"btn btn-outline-secondary\",children:/*#__PURE__*/_jsx(ArrowLeft,{size:18})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Noleggio \",rental.rental_number]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#6c757d',marginTop:'4px'},children:[\"Codice: \",rental.booking_code]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleDownloadContract,className:\"btn btn-outline-primary\",children:[/*#__PURE__*/_jsx(Download,{size:18}),\"Scarica Contratto\"]}),rental.status==='active'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCloseModal(true),className:\"btn btn-success\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:18}),\"Chiudi Noleggio\"]}),rental.status==='closed'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowReturnPhotosModal(true),className:\"btn btn-outline-primary\",children:[/*#__PURE__*/_jsx(Camera,{size:18}),\"Gestisci Foto Rientro\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-area\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(300px, 1fr))',gap:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(User,{size:20,color:\"#1a4d2e\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"Cliente\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'12px'},children:/*#__PURE__*/_jsx(\"strong\",{children:rental.customer_name})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',lineHeight:'1.8'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCDE \",rental.customer_phone||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCE7 \",rental.customer_email||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83C\\uDD94 CF: \",rental.fiscal_code||'N/A']})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Car,{size:20,color:\"#17a2b8\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"Veicolo\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'12px'},children:/*#__PURE__*/_jsxs(\"strong\",{style:{fontSize:'16px'},children:[rental.brand,\" \",rental.model]})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',lineHeight:'1.8'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83C\\uDFF7\\uFE0F \",/*#__PURE__*/_jsx(\"strong\",{children:\"Targa:\"}),\" \",rental.license_plate]}),rental.category_name&&/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCA \",/*#__PURE__*/_jsx(\"strong\",{children:\"Categoria:\"}),\" \",rental.category_name]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Calendar,{size:20,color:\"#f4a261\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',lineHeight:'2'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ritiro:\"}),/*#__PURE__*/_jsx(\"br\",{}),formatDate(rental.pickup_date)]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rientro Previsto:\"}),/*#__PURE__*/_jsx(\"br\",{}),formatDate(rental.expected_return_date)]}),rental.return_date&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px',paddingTop:'12px',borderTop:'1px solid #dee2e6',color:'#28a745',fontWeight:'600'},children:[\"\\u2713 Rientrato:\",/*#__PURE__*/_jsx(\"br\",{}),formatDate(rental.return_date)]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px',paddingTop:'12px',borderTop:'1px solid #dee2e6'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Durata:\"}),\" \",rental.total_days,\" giorn\",rental.total_days===1?'o':'i']})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"Dettagli Noleggio\"}),getStatusBadge(rental.status)]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(250px, 1fr))',gap:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'14px',fontWeight:'600',marginBottom:'12px',color:'#1a4d2e'},children:\"Informazioni Uscita\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',lineHeight:'1.8'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCD \",/*#__PURE__*/_jsx(\"strong\",{children:\"Luogo:\"}),\" \",rental.pickup_location]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u26FD \",/*#__PURE__*/_jsx(\"strong\",{children:\"Carburante:\"}),\" \",rental.pickup_fuel_level,\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCA \",/*#__PURE__*/_jsx(\"strong\",{children:\"Km:\"}),\" \",rental.pickup_km]}),rental.pickup_damages&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Danni:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#6c757d'},children:rental.pickup_damages})]})]})]}),rental.return_date&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'14px',fontWeight:'600',marginBottom:'12px',color:'#28a745'},children:\"Informazioni Rientro\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',lineHeight:'1.8'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCD \",/*#__PURE__*/_jsx(\"strong\",{children:\"Luogo:\"}),\" \",rental.return_location]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u26FD \",/*#__PURE__*/_jsx(\"strong\",{children:\"Carburante:\"}),\" \",rental.return_fuel_level,\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCA \",/*#__PURE__*/_jsx(\"strong\",{children:\"Km:\"}),\" \",rental.return_km]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDEE3\\uFE0F \",/*#__PURE__*/_jsx(\"strong\",{children:\"Km percorsi:\"}),\" \",rental.return_km-rental.pickup_km]}),rental.return_damages&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Danni:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#6c757d'},children:rental.return_damages})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'14px',fontWeight:'600',marginBottom:'12px',color:'#e76f51'},children:\"Importi\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',lineHeight:'1.8'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCB0 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Tariffa/giorno:\"}),\" \",formatCurrency(rental.daily_rate)]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCC5 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Giorni:\"}),\" \",rental.total_days]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px',paddingTop:'12px',borderTop:'1px solid #dee2e6'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"TOTALE:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'18px',fontWeight:'700',color:'#1a4d2e'},children:formatCurrency(rental.total_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Versato:\"}),\" \",formatCurrency(rental.amount_paid||0)]}),parseFloat(rental.amount_due||0)>0&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#dc3545',fontWeight:'600'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Da versare:\"}),\" \",formatCurrency(rental.amount_due)]})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Camera,{size:20}),/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"Foto Veicolo\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'16px',fontWeight:'600',marginBottom:'12px',color:'#1a4d2e'},children:\"Foto in Uscita\"}),/*#__PURE__*/_jsx(PhotoUpload,{rentalId:id,photoType:\"pickup\",onPhotosChange:photos=>console.log('Pickup photos:',photos)})]}),rental.status==='closed'&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'32px',paddingTop:'24px',borderTop:'2px solid #dee2e6'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'16px',fontWeight:'600',marginBottom:'12px',color:'#28a745'},children:\"Foto al Rientro\"}),/*#__PURE__*/_jsx(PhotoUpload,{rentalId:id,photoType:\"return\",onPhotosChange:photos=>console.log('Return photos:',photos)})]})]})]})]}),showCloseModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:()=>setShowCloseModal(false),style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0, 0, 0, 0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),style:{backgroundColor:'white',borderRadius:'8px',width:'90%',maxWidth:'600px',maxHeight:'90vh',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{padding:'20px',borderBottom:'1px solid #dee2e6',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:'20px',fontWeight:'600'},children:\"Chiudi Noleggio\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCloseModal(false),style:{background:'none',border:'none',fontSize:'28px',cursor:'pointer',color:'#6c757d',lineHeight:1},children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Data e Ora Rientro *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",className:\"form-control\",value:closeData.return_date,onChange:e=>setCloseData(_objectSpread(_objectSpread({},closeData),{},{return_date:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Luogo Rientro\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:closeData.return_location,onChange:e=>setCloseData(_objectSpread(_objectSpread({},closeData),{},{return_location:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Carburante (%) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:closeData.return_fuel_level,onChange:e=>setCloseData(_objectSpread(_objectSpread({},closeData),{},{return_fuel_level:e.target.value})),min:\"0\",max:\"100\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Km al Rientro *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:closeData.return_km,onChange:e=>setCloseData(_objectSpread(_objectSpread({},closeData),{},{return_km:e.target.value})),min:rental.pickup_km,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Nuovi Danni\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:closeData.return_damages,onChange:e=>setCloseData(_objectSpread(_objectSpread({},closeData),{},{return_damages:e.target.value})),rows:\"3\",placeholder:\"Descrivi eventuali nuovi danni...\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'16px',background:'#fff3cd',borderRadius:'4px',fontSize:'14px',marginTop:'16px'},children:[\"\\u26A0\\uFE0F \",/*#__PURE__*/_jsx(\"strong\",{children:\"Nota:\"}),\" Dopo aver chiuso il noleggio, potrai immediatamente caricare le foto del rientro.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",style:{padding:'16px 20px',borderTop:'1px solid #dee2e6',display:'flex',justifyContent:'flex-end',gap:'12px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCloseModal(false),className:\"btn btn-secondary\",children:\"Annulla\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCloseRental,className:\"btn btn-success\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:18}),\"Chiudi Noleggio\"]})]})]})}),showReturnPhotosModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:()=>setShowReturnPhotosModal(false),style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0, 0, 0, 0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),style:{backgroundColor:'white',borderRadius:'8px',width:'90%',maxWidth:'800px',maxHeight:'90vh',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{padding:'20px',borderBottom:'1px solid #dee2e6',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'20px',fontWeight:'600'},children:[/*#__PURE__*/_jsx(Camera,{size:24,style:{marginRight:'8px',verticalAlign:'middle'}}),\"Foto Veicolo al Rientro\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowReturnPhotosModal(false),style:{background:'none',border:'none',fontSize:'28px',cursor:'pointer',color:'#6c757d',lineHeight:1},children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'16px',background:'#e8f5e9',borderRadius:'4px',fontSize:'14px',marginBottom:'20px',color:'#1a4d2e'},children:[\"\\uD83D\\uDCF8 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Importante:\"}),\" Scatta foto di tutti i lati del veicolo per documentare lo stato al momento del rientro.\"]}),/*#__PURE__*/_jsx(PhotoUpload,{rentalId:id,photoType:\"return\",onPhotosChange:photos=>console.log('Return photos updated:',photos)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",style:{padding:'16px 20px',borderTop:'1px solid #dee2e6',display:'flex',justifyContent:'flex-end',gap:'12px'},children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleReturnPhotosComplete,className:\"btn btn-success\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:18}),\"Conferma\"]})})]})})]});};export default RentalDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","rentalsAPI","photosAPI","toast","PhotoUpload","ArrowLeft","Download","CheckCircle","User","Car","Calendar","Camera","X","jsx","_jsx","jsxs","_jsxs","RentalDetail","id","navigate","rental","setRental","loading","setLoading","showCloseModal","setShowCloseModal","showReturnPhotosModal","setShowReturnPhotosModal","closeData","setCloseData","return_date","Date","toISOString","slice","return_location","return_fuel_level","return_km","return_damages","final_total","amount_paid","amount_due","loadRentalDetail","response","getById","rentalData","data","prev","_objectSpread","pickup_location","total_amount","error","console","handleDownloadContract","generateContract","downloadContract","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","concat","rental_number","body","appendChild","click","remove","revokeObjectURL","success","_error$response","_error$response$data","message","handleCloseRental","returnKm","parseInt","pickupKm","pickup_km","close","setTimeout","_error$response2","_error$response2$data","handleReturnPhotosComplete","formatDate","dateString","toLocaleString","formatCurrency","amount","Intl","NumberFormat","style","currency","format","getStatusBadge","status","statusConfig","active","label","className","closed","cancelled","config","children","onClick","display","alignItems","gap","size","fontSize","color","marginTop","booking_code","gridTemplateColumns","marginBottom","customer_name","lineHeight","customer_phone","customer_email","fiscal_code","brand","model","license_plate","category_name","pickup_date","expected_return_date","paddingTop","borderTop","fontWeight","total_days","justifyContent","pickup_fuel_level","pickup_damages","daily_rate","parseFloat","rentalId","photoType","onPhotosChange","photos","log","position","top","left","width","height","backgroundColor","zIndex","e","stopPropagation","borderRadius","maxWidth","maxHeight","overflow","padding","borderBottom","margin","background","border","cursor","type","value","onChange","target","required","min","max","rows","placeholder","marginRight","verticalAlign"],"sources":["D:/Bncrentcar/frontend/src/components/RentalDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { rentalsAPI, photosAPI } from '../services/api';\r\nimport toast from 'react-hot-toast';\r\nimport PhotoUpload from './PhotoUpload';\r\nimport { \r\n  ArrowLeft, \r\n  Download, \r\n  CheckCircle,\r\n  User,\r\n  Car,\r\n  Calendar,\r\n  Camera,\r\n  X\r\n} from 'lucide-react';\r\n\r\nconst RentalDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [rental, setRental] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCloseModal, setShowCloseModal] = useState(false);\r\n  const [showReturnPhotosModal, setShowReturnPhotosModal] = useState(false);\r\n  const [closeData, setCloseData] = useState({\r\n    return_date: new Date().toISOString().slice(0, 16),\r\n    return_location: '',\r\n    return_fuel_level: '100',\r\n    return_km: '',\r\n    return_damages: '',\r\n    final_total: 0,\r\n    amount_paid: 0,\r\n    amount_due: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadRentalDetail();\r\n  }, [id]);\r\n\r\n  const loadRentalDetail = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await rentalsAPI.getById(id);\r\n      const rentalData = response.data.data;\r\n      \r\n      setRental(rentalData);\r\n      \r\n      // Imposta i dati di chiusura con valori predefiniti\r\n      setCloseData(prev => ({\r\n        ...prev,\r\n        return_location: rentalData.pickup_location || '',\r\n        final_total: rentalData.total_amount || 0,\r\n        amount_paid: rentalData.amount_paid || 0,\r\n        amount_due: rentalData.amount_due || 0,\r\n      }));\r\n    } catch (error) {\r\n      console.error('Errore caricamento dettaglio:', error);\r\n      toast.error('Errore nel caricamento del noleggio');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDownloadContract = async () => {\r\n    try {\r\n      // Prima genera il contratto\r\n      await rentalsAPI.generateContract(id);\r\n      \r\n      // Poi scaricalo\r\n      const response = await rentalsAPI.downloadContract(id);\r\n      const url = window.URL.createObjectURL(new Blob([response.data]));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', `contratto_${rental.rental_number}.pdf`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      window.URL.revokeObjectURL(url);\r\n      \r\n      toast.success('Contratto scaricato con successo');\r\n    } catch (error) {\r\n      console.error('Errore download contratto:', error);\r\n      toast.error(error.response?.data?.message || 'Errore nel download del contratto');\r\n    }\r\n  };\r\n\r\n  const handleCloseRental = async () => {\r\n    try {\r\n      // Validazione\r\n      if (!closeData.return_km) {\r\n        toast.error('Inserisci i km al rientro');\r\n        return;\r\n      }\r\n\r\n      const returnKm = parseInt(closeData.return_km);\r\n      const pickupKm = parseInt(rental.pickup_km);\r\n\r\n      if (returnKm < pickupKm) {\r\n        toast.error('I km al rientro non possono essere inferiori ai km in uscita');\r\n        return;\r\n      }\r\n\r\n      // Chiudi il noleggio\r\n      await rentalsAPI.close(id, closeData);\r\n      \r\n      toast.success('Noleggio chiuso con successo!');\r\n      setShowCloseModal(false);\r\n      \r\n      // Ricarica i dati del noleggio\r\n      await loadRentalDetail();\r\n      \r\n      // Mostra il modal per caricare foto di rientro\r\n      setTimeout(() => {\r\n        setShowReturnPhotosModal(true);\r\n      }, 500);\r\n      \r\n    } catch (error) {\r\n      console.error('Errore chiusura noleggio:', error);\r\n      toast.error(error.response?.data?.message || 'Errore nella chiusura del noleggio');\r\n    }\r\n  };\r\n\r\n  const handleReturnPhotosComplete = () => {\r\n    setShowReturnPhotosModal(false);\r\n    toast.success('Foto di rientro salvate!');\r\n    loadRentalDetail(); // Ricarica per mostrare le nuove foto\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    return new Date(dateString).toLocaleString('it-IT');\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    if (!amount && amount !== 0) return '€ 0,00';\r\n    return new Intl.NumberFormat('it-IT', {\r\n      style: 'currency',\r\n      currency: 'EUR',\r\n    }).format(amount);\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const statusConfig = {\r\n      active: { label: 'Attivo', className: 'badge-success' },\r\n      closed: { label: 'Chiuso', className: 'badge-secondary' },\r\n      cancelled: { label: 'Annullato', className: 'badge-danger' },\r\n    };\r\n    const config = statusConfig[status] || statusConfig.active;\r\n    return <span className={`badge ${config.className}`}>{config.label}</span>;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div>\r\n        <div className=\"top-bar\">\r\n          <h1>Caricamento...</h1>\r\n        </div>\r\n        <div className=\"content-area\">\r\n          <div className=\"spinner\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!rental) {\r\n    return (\r\n      <div>\r\n        <div className=\"top-bar\">\r\n          <h1>Noleggio non trovato</h1>\r\n        </div>\r\n        <div className=\"content-area\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <p>Il noleggio richiesto non è stato trovato.</p>\r\n              <button onClick={() => navigate('/rentals')} className=\"btn btn-primary mt-2\">\r\n                Torna alla lista\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"top-bar\">\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n          <button\r\n            onClick={() => navigate('/rentals')}\r\n            className=\"btn btn-outline-secondary\"\r\n          >\r\n            <ArrowLeft size={18} />\r\n          </button>\r\n          <div>\r\n            <h1>Noleggio {rental.rental_number}</h1>\r\n            <div style={{ fontSize: '14px', color: '#6c757d', marginTop: '4px' }}>\r\n              Codice: {rental.booking_code}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style={{ display: 'flex', gap: '12px' }}>\r\n          <button\r\n            onClick={handleDownloadContract}\r\n            className=\"btn btn-outline-primary\"\r\n          >\r\n            <Download size={18} />\r\n            Scarica Contratto\r\n          </button>\r\n          {rental.status === 'active' && (\r\n            <button\r\n              onClick={() => setShowCloseModal(true)}\r\n              className=\"btn btn-success\"\r\n            >\r\n              <CheckCircle size={18} />\r\n              Chiudi Noleggio\r\n            </button>\r\n          )}\r\n          {rental.status === 'closed' && (\r\n            <button\r\n              onClick={() => setShowReturnPhotosModal(true)}\r\n              className=\"btn btn-outline-primary\"\r\n            >\r\n              <Camera size={18} />\r\n              Gestisci Foto Rientro\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"content-area\">\r\n        {/* Cards informazioni cliente, veicolo, date - INVARIATE */}\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '24px' }}>\r\n          \r\n          {/* Informazioni Cliente */}\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                <User size={20} color=\"#1a4d2e\" />\r\n                <h3 className=\"card-title\">Cliente</h3>\r\n              </div>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div style={{ marginBottom: '12px' }}>\r\n                <strong>{rental.customer_name}</strong>\r\n              </div>\r\n              <div style={{ fontSize: '14px', lineHeight: '1.8' }}>\r\n                <div>📞 {rental.customer_phone || 'N/A'}</div>\r\n                <div>📧 {rental.customer_email || 'N/A'}</div>\r\n                <div>🆔 CF: {rental.fiscal_code || 'N/A'}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Informazioni Veicolo */}\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                <Car size={20} color=\"#17a2b8\" />\r\n                <h3 className=\"card-title\">Veicolo</h3>\r\n              </div>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div style={{ marginBottom: '12px' }}>\r\n                <strong style={{ fontSize: '16px' }}>\r\n                  {rental.brand} {rental.model}\r\n                </strong>\r\n              </div>\r\n              <div style={{ fontSize: '14px', lineHeight: '1.8' }}>\r\n                <div>🏷️ <strong>Targa:</strong> {rental.license_plate}</div>\r\n                {rental.category_name && <div>📊 <strong>Categoria:</strong> {rental.category_name}</div>}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Date e Orari */}\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                <Calendar size={20} color=\"#f4a261\" />\r\n                <h3 className=\"card-title\">Date</h3>\r\n              </div>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div style={{ fontSize: '14px', lineHeight: '2' }}>\r\n                <div>\r\n                  <strong>Ritiro:</strong><br />\r\n                  {formatDate(rental.pickup_date)}\r\n                </div>\r\n                <div style={{ marginTop: '12px' }}>\r\n                  <strong>Rientro Previsto:</strong><br />\r\n                  {formatDate(rental.expected_return_date)}\r\n                </div>\r\n                {rental.return_date && (\r\n                  <div style={{ \r\n                    marginTop: '12px', \r\n                    paddingTop: '12px', \r\n                    borderTop: '1px solid #dee2e6',\r\n                    color: '#28a745',\r\n                    fontWeight: '600',\r\n                  }}>\r\n                    ✓ Rientrato:<br />\r\n                    {formatDate(rental.return_date)}\r\n                  </div>\r\n                )}\r\n                <div style={{ marginTop: '12px', paddingTop: '12px', borderTop: '1px solid #dee2e6' }}>\r\n                  <strong>Durata:</strong> {rental.total_days} giorn{rental.total_days === 1 ? 'o' : 'i'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Dettagli Noleggio */}\r\n        <div className=\"card mt-3\">\r\n          <div className=\"card-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <h3 className=\"card-title\">Dettagli Noleggio</h3>\r\n            {getStatusBadge(rental.status)}\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '24px' }}>\r\n              {/* Info Uscita */}\r\n              <div>\r\n                <h4 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '12px', color: '#1a4d2e' }}>\r\n                  Informazioni Uscita\r\n                </h4>\r\n                <div style={{ fontSize: '14px', lineHeight: '1.8' }}>\r\n                  <div>📍 <strong>Luogo:</strong> {rental.pickup_location}</div>\r\n                  <div>⛽ <strong>Carburante:</strong> {rental.pickup_fuel_level}%</div>\r\n                  <div>📊 <strong>Km:</strong> {rental.pickup_km}</div>\r\n                  {rental.pickup_damages && (\r\n                    <div style={{ marginTop: '8px' }}>\r\n                      <strong>Danni:</strong><br />\r\n                      <span style={{ color: '#6c757d' }}>{rental.pickup_damages}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Info Rientro (se presente) */}\r\n              {rental.return_date && (\r\n                <div>\r\n                  <h4 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '12px', color: '#28a745' }}>\r\n                    Informazioni Rientro\r\n                  </h4>\r\n                  <div style={{ fontSize: '14px', lineHeight: '1.8' }}>\r\n                    <div>📍 <strong>Luogo:</strong> {rental.return_location}</div>\r\n                    <div>⛽ <strong>Carburante:</strong> {rental.return_fuel_level}%</div>\r\n                    <div>📊 <strong>Km:</strong> {rental.return_km}</div>\r\n                    <div>🛣️ <strong>Km percorsi:</strong> {rental.return_km - rental.pickup_km}</div>\r\n                    {rental.return_damages && (\r\n                      <div style={{ marginTop: '8px' }}>\r\n                        <strong>Danni:</strong><br />\r\n                        <span style={{ color: '#6c757d' }}>{rental.return_damages}</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Importi */}\r\n              <div>\r\n                <h4 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '12px', color: '#e76f51' }}>\r\n                  Importi\r\n                </h4>\r\n                <div style={{ fontSize: '14px', lineHeight: '1.8' }}>\r\n                  <div>💰 <strong>Tariffa/giorno:</strong> {formatCurrency(rental.daily_rate)}</div>\r\n                  <div>📅 <strong>Giorni:</strong> {rental.total_days}</div>\r\n                  <div style={{ marginTop: '12px', paddingTop: '12px', borderTop: '1px solid #dee2e6' }}>\r\n                    <strong>TOTALE:</strong> <span style={{ fontSize: '18px', fontWeight: '700', color: '#1a4d2e' }}>\r\n                      {formatCurrency(rental.total_amount)}\r\n                    </span>\r\n                  </div>\r\n                  <div><strong>Versato:</strong> {formatCurrency(rental.amount_paid || 0)}</div>\r\n                  {parseFloat(rental.amount_due || 0) > 0 && (\r\n                    <div style={{ color: '#dc3545', fontWeight: '600' }}>\r\n                      <strong>Da versare:</strong> {formatCurrency(rental.amount_due)}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Sezione Foto */}\r\n        <div className=\"card mt-3\">\r\n          <div className=\"card-header\">\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n              <Camera size={20} />\r\n              <h3 className=\"card-title\">Foto Veicolo</h3>\r\n            </div>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            {/* Foto Uscita */}\r\n            <div style={{ marginBottom: '24px' }}>\r\n              <h4 style={{ fontSize: '16px', fontWeight: '600', marginBottom: '12px', color: '#1a4d2e' }}>\r\n                Foto in Uscita\r\n              </h4>\r\n              <PhotoUpload\r\n                rentalId={id}\r\n                photoType=\"pickup\"\r\n                onPhotosChange={(photos) => console.log('Pickup photos:', photos)}\r\n              />\r\n            </div>\r\n\r\n            {/* Foto Rientro - Solo se noleggio chiuso */}\r\n            {rental.status === 'closed' && (\r\n              <div style={{ marginTop: '32px', paddingTop: '24px', borderTop: '2px solid #dee2e6' }}>\r\n                <h4 style={{ fontSize: '16px', fontWeight: '600', marginBottom: '12px', color: '#28a745' }}>\r\n                  Foto al Rientro\r\n                </h4>\r\n                <PhotoUpload\r\n                  rentalId={id}\r\n                  photoType=\"return\"\r\n                  onPhotosChange={(photos) => console.log('Return photos:', photos)}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal Chiusura Noleggio */}\r\n      {showCloseModal && (\r\n        <div \r\n          className=\"modal-backdrop\" \r\n          onClick={() => setShowCloseModal(false)}\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n          }}\r\n        >\r\n          <div \r\n            className=\"modal\"\r\n            onClick={(e) => e.stopPropagation()}\r\n            style={{\r\n              backgroundColor: 'white',\r\n              borderRadius: '8px',\r\n              width: '90%',\r\n              maxWidth: '600px',\r\n              maxHeight: '90vh',\r\n              overflow: 'auto',\r\n            }}\r\n          >\r\n            <div \r\n              className=\"modal-header\"\r\n              style={{\r\n                padding: '20px',\r\n                borderBottom: '1px solid #dee2e6',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n              }}\r\n            >\r\n              <h3 style={{ margin: 0, fontSize: '20px', fontWeight: '600' }}>Chiudi Noleggio</h3>\r\n              <button\r\n                onClick={() => setShowCloseModal(false)}\r\n                style={{ \r\n                  background: 'none', \r\n                  border: 'none', \r\n                  fontSize: '28px', \r\n                  cursor: 'pointer',\r\n                  color: '#6c757d',\r\n                  lineHeight: 1,\r\n                }}\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"modal-body\" style={{ padding: '20px' }}>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Data e Ora Rientro *</label>\r\n                <input\r\n                  type=\"datetime-local\"\r\n                  className=\"form-control\"\r\n                  value={closeData.return_date}\r\n                  onChange={(e) => setCloseData({ ...closeData, return_date: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Luogo Rientro</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  value={closeData.return_location}\r\n                  onChange={(e) => setCloseData({ ...closeData, return_location: e.target.value })}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-row\">\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Carburante (%) *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={closeData.return_fuel_level}\r\n                    onChange={(e) => setCloseData({ ...closeData, return_fuel_level: e.target.value })}\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">Km al Rientro *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={closeData.return_km}\r\n                    onChange={(e) => setCloseData({ ...closeData, return_km: e.target.value })}\r\n                    min={rental.pickup_km}\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Nuovi Danni</label>\r\n                <textarea\r\n                  className=\"form-control\"\r\n                  value={closeData.return_damages}\r\n                  onChange={(e) => setCloseData({ ...closeData, return_damages: e.target.value })}\r\n                  rows=\"3\"\r\n                  placeholder=\"Descrivi eventuali nuovi danni...\"\r\n                />\r\n              </div>\r\n\r\n              <div style={{ \r\n                padding: '16px', \r\n                background: '#fff3cd', \r\n                borderRadius: '4px',\r\n                fontSize: '14px',\r\n                marginTop: '16px',\r\n              }}>\r\n                ⚠️ <strong>Nota:</strong> Dopo aver chiuso il noleggio, potrai immediatamente caricare le foto del rientro.\r\n              </div>\r\n            </div>\r\n            \r\n            <div \r\n              className=\"modal-footer\"\r\n              style={{\r\n                padding: '16px 20px',\r\n                borderTop: '1px solid #dee2e6',\r\n                display: 'flex',\r\n                justifyContent: 'flex-end',\r\n                gap: '12px',\r\n              }}\r\n            >\r\n              <button\r\n                onClick={() => setShowCloseModal(false)}\r\n                className=\"btn btn-secondary\"\r\n              >\r\n                Annulla\r\n              </button>\r\n              <button\r\n                onClick={handleCloseRental}\r\n                className=\"btn btn-success\"\r\n              >\r\n                <CheckCircle size={18} />\r\n                Chiudi Noleggio\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal Foto Rientro */}\r\n      {showReturnPhotosModal && (\r\n        <div \r\n          className=\"modal-backdrop\" \r\n          onClick={() => setShowReturnPhotosModal(false)}\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n          }}\r\n        >\r\n          <div \r\n            className=\"modal\"\r\n            onClick={(e) => e.stopPropagation()}\r\n            style={{\r\n              backgroundColor: 'white',\r\n              borderRadius: '8px',\r\n              width: '90%',\r\n              maxWidth: '800px',\r\n              maxHeight: '90vh',\r\n              overflow: 'auto',\r\n            }}\r\n          >\r\n            <div \r\n              className=\"modal-header\"\r\n              style={{\r\n                padding: '20px',\r\n                borderBottom: '1px solid #dee2e6',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n              }}\r\n            >\r\n              <h3 style={{ margin: 0, fontSize: '20px', fontWeight: '600' }}>\r\n                <Camera size={24} style={{ marginRight: '8px', verticalAlign: 'middle' }} />\r\n                Foto Veicolo al Rientro\r\n              </h3>\r\n              <button\r\n                onClick={() => setShowReturnPhotosModal(false)}\r\n                style={{ \r\n                  background: 'none', \r\n                  border: 'none', \r\n                  fontSize: '28px', \r\n                  cursor: 'pointer',\r\n                  color: '#6c757d',\r\n                  lineHeight: 1,\r\n                }}\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"modal-body\" style={{ padding: '20px' }}>\r\n              <div style={{ \r\n                padding: '16px', \r\n                background: '#e8f5e9', \r\n                borderRadius: '4px',\r\n                fontSize: '14px',\r\n                marginBottom: '20px',\r\n                color: '#1a4d2e',\r\n              }}>\r\n                📸 <strong>Importante:</strong> Scatta foto di tutti i lati del veicolo per documentare lo stato al momento del rientro.\r\n              </div>\r\n              \r\n              <PhotoUpload\r\n                rentalId={id}\r\n                photoType=\"return\"\r\n                onPhotosChange={(photos) => console.log('Return photos updated:', photos)}\r\n              />\r\n            </div>\r\n            \r\n            <div \r\n              className=\"modal-footer\"\r\n              style={{\r\n                padding: '16px 20px',\r\n                borderTop: '1px solid #dee2e6',\r\n                display: 'flex',\r\n                justifyContent: 'flex-end',\r\n                gap: '12px',\r\n              }}\r\n            >\r\n              <button\r\n                onClick={handleReturnPhotosComplete}\r\n                className=\"btn btn-success\"\r\n              >\r\n                <CheckCircle size={18} />\r\n                Conferma\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RentalDetail;"],"mappings":"2GAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,UAAU,CAAEC,SAAS,KAAQ,iBAAiB,CACvD,MAAO,CAAAC,KAAK,KAAM,iBAAiB,CACnC,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,OACEC,SAAS,CACTC,QAAQ,CACRC,WAAW,CACXC,IAAI,CACJC,GAAG,CACHC,QAAQ,CACRC,MAAM,CACNC,CAAC,KACI,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtB,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAEC,EAAG,CAAC,CAAGnB,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAoB,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACoB,MAAM,CAAEC,SAAS,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACyB,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC2B,cAAc,CAAEC,iBAAiB,CAAC,CAAG5B,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAC6B,qBAAqB,CAAEC,wBAAwB,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CACzE,KAAM,CAAC+B,SAAS,CAAEC,YAAY,CAAC,CAAGhC,QAAQ,CAAC,CACzCiC,WAAW,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAClDC,eAAe,CAAE,EAAE,CACnBC,iBAAiB,CAAE,KAAK,CACxBC,SAAS,CAAE,EAAE,CACbC,cAAc,CAAE,EAAE,CAClBC,WAAW,CAAE,CAAC,CACdC,WAAW,CAAE,CAAC,CACdC,UAAU,CAAE,CACd,CAAC,CAAC,CAEF1C,SAAS,CAAC,IAAM,CACd2C,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,CAACvB,EAAE,CAAC,CAAC,CAER,KAAM,CAAAuB,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACFlB,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAmB,QAAQ,CAAG,KAAM,CAAAzC,UAAU,CAAC0C,OAAO,CAACzB,EAAE,CAAC,CAC7C,KAAM,CAAA0B,UAAU,CAAGF,QAAQ,CAACG,IAAI,CAACA,IAAI,CAErCxB,SAAS,CAACuB,UAAU,CAAC,CAErB;AACAf,YAAY,CAACiB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACZD,IAAI,MACPZ,eAAe,CAAEU,UAAU,CAACI,eAAe,EAAI,EAAE,CACjDV,WAAW,CAAEM,UAAU,CAACK,YAAY,EAAI,CAAC,CACzCV,WAAW,CAAEK,UAAU,CAACL,WAAW,EAAI,CAAC,CACxCC,UAAU,CAAEI,UAAU,CAACJ,UAAU,EAAI,CAAC,EACtC,CAAC,CACL,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrD/C,KAAK,CAAC+C,KAAK,CAAC,qCAAqC,CAAC,CACpD,CAAC,OAAS,CACR3B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAA6B,sBAAsB,CAAG,KAAAA,CAAA,GAAY,CACzC,GAAI,CACF;AACA,KAAM,CAAAnD,UAAU,CAACoD,gBAAgB,CAACnC,EAAE,CAAC,CAErC;AACA,KAAM,CAAAwB,QAAQ,CAAG,KAAM,CAAAzC,UAAU,CAACqD,gBAAgB,CAACpC,EAAE,CAAC,CACtD,KAAM,CAAAqC,GAAG,CAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAAC,GAAI,CAAAC,IAAI,CAAC,CAACjB,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC,CACjE,KAAM,CAAAe,IAAI,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACxCF,IAAI,CAACG,IAAI,CAAGR,GAAG,CACfK,IAAI,CAACI,YAAY,CAAC,UAAU,cAAAC,MAAA,CAAe7C,MAAM,CAAC8C,aAAa,QAAM,CAAC,CACtEL,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,IAAI,CAAC,CAC/BA,IAAI,CAACS,KAAK,CAAC,CAAC,CACZT,IAAI,CAACU,MAAM,CAAC,CAAC,CACbd,MAAM,CAACC,GAAG,CAACc,eAAe,CAAChB,GAAG,CAAC,CAE/BpD,KAAK,CAACqE,OAAO,CAAC,kCAAkC,CAAC,CACnD,CAAE,MAAOtB,KAAK,CAAE,KAAAuB,eAAA,CAAAC,oBAAA,CACdvB,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClD/C,KAAK,CAAC+C,KAAK,CAAC,EAAAuB,eAAA,CAAAvB,KAAK,CAACR,QAAQ,UAAA+B,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgB5B,IAAI,UAAA6B,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAI,mCAAmC,CAAC,CACnF,CACF,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF;AACA,GAAI,CAAChD,SAAS,CAACQ,SAAS,CAAE,CACxBjC,KAAK,CAAC+C,KAAK,CAAC,2BAA2B,CAAC,CACxC,OACF,CAEA,KAAM,CAAA2B,QAAQ,CAAGC,QAAQ,CAAClD,SAAS,CAACQ,SAAS,CAAC,CAC9C,KAAM,CAAA2C,QAAQ,CAAGD,QAAQ,CAAC1D,MAAM,CAAC4D,SAAS,CAAC,CAE3C,GAAIH,QAAQ,CAAGE,QAAQ,CAAE,CACvB5E,KAAK,CAAC+C,KAAK,CAAC,8DAA8D,CAAC,CAC3E,OACF,CAEA;AACA,KAAM,CAAAjD,UAAU,CAACgF,KAAK,CAAC/D,EAAE,CAAEU,SAAS,CAAC,CAErCzB,KAAK,CAACqE,OAAO,CAAC,+BAA+B,CAAC,CAC9C/C,iBAAiB,CAAC,KAAK,CAAC,CAExB;AACA,KAAM,CAAAgB,gBAAgB,CAAC,CAAC,CAExB;AACAyC,UAAU,CAAC,IAAM,CACfvD,wBAAwB,CAAC,IAAI,CAAC,CAChC,CAAC,CAAE,GAAG,CAAC,CAET,CAAE,MAAOuB,KAAK,CAAE,KAAAiC,gBAAA,CAAAC,qBAAA,CACdjC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACjD/C,KAAK,CAAC+C,KAAK,CAAC,EAAAiC,gBAAA,CAAAjC,KAAK,CAACR,QAAQ,UAAAyC,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBtC,IAAI,UAAAuC,qBAAA,iBAApBA,qBAAA,CAAsBT,OAAO,GAAI,oCAAoC,CAAC,CACpF,CACF,CAAC,CAED,KAAM,CAAAU,0BAA0B,CAAGA,CAAA,GAAM,CACvC1D,wBAAwB,CAAC,KAAK,CAAC,CAC/BxB,KAAK,CAACqE,OAAO,CAAC,0BAA0B,CAAC,CACzC/B,gBAAgB,CAAC,CAAC,CAAE;AACtB,CAAC,CAED,KAAM,CAAA6C,UAAU,CAAIC,UAAU,EAAK,CACjC,GAAI,CAACA,UAAU,CAAE,MAAO,KAAK,CAC7B,MAAO,IAAI,CAAAxD,IAAI,CAACwD,UAAU,CAAC,CAACC,cAAc,CAAC,OAAO,CAAC,CACrD,CAAC,CAED,KAAM,CAAAC,cAAc,CAAIC,MAAM,EAAK,CACjC,GAAI,CAACA,MAAM,EAAIA,MAAM,GAAK,CAAC,CAAE,MAAO,QAAQ,CAC5C,MAAO,IAAI,CAAAC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAE,CACpCC,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,KACZ,CAAC,CAAC,CAACC,MAAM,CAACL,MAAM,CAAC,CACnB,CAAC,CAED,KAAM,CAAAM,cAAc,CAAIC,MAAM,EAAK,CACjC,KAAM,CAAAC,YAAY,CAAG,CACnBC,MAAM,CAAE,CAAEC,KAAK,CAAE,QAAQ,CAAEC,SAAS,CAAE,eAAgB,CAAC,CACvDC,MAAM,CAAE,CAAEF,KAAK,CAAE,QAAQ,CAAEC,SAAS,CAAE,iBAAkB,CAAC,CACzDE,SAAS,CAAE,CAAEH,KAAK,CAAE,WAAW,CAAEC,SAAS,CAAE,cAAe,CAC7D,CAAC,CACD,KAAM,CAAAG,MAAM,CAAGN,YAAY,CAACD,MAAM,CAAC,EAAIC,YAAY,CAACC,MAAM,CAC1D,mBAAOrF,IAAA,SAAMuF,SAAS,UAAApC,MAAA,CAAWuC,MAAM,CAACH,SAAS,CAAG,CAAAI,QAAA,CAAED,MAAM,CAACJ,KAAK,CAAO,CAAC,CAC5E,CAAC,CAED,GAAI9E,OAAO,CAAE,CACX,mBACEN,KAAA,QAAAyF,QAAA,eACE3F,IAAA,QAAKuF,SAAS,CAAC,SAAS,CAAAI,QAAA,cACtB3F,IAAA,OAAA2F,QAAA,CAAI,gBAAc,CAAI,CAAC,CACpB,CAAC,cACN3F,IAAA,QAAKuF,SAAS,CAAC,cAAc,CAAAI,QAAA,cAC3B3F,IAAA,QAAKuF,SAAS,CAAC,SAAS,CAAM,CAAC,CAC5B,CAAC,EACH,CAAC,CAEV,CAEA,GAAI,CAACjF,MAAM,CAAE,CACX,mBACEJ,KAAA,QAAAyF,QAAA,eACE3F,IAAA,QAAKuF,SAAS,CAAC,SAAS,CAAAI,QAAA,cACtB3F,IAAA,OAAA2F,QAAA,CAAI,sBAAoB,CAAI,CAAC,CAC1B,CAAC,cACN3F,IAAA,QAAKuF,SAAS,CAAC,cAAc,CAAAI,QAAA,cAC3B3F,IAAA,QAAKuF,SAAS,CAAC,MAAM,CAAAI,QAAA,cACnBzF,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAI,QAAA,eACxB3F,IAAA,MAAA2F,QAAA,CAAG,+CAA0C,CAAG,CAAC,cACjD3F,IAAA,WAAQ4F,OAAO,CAAEA,CAAA,GAAMvF,QAAQ,CAAC,UAAU,CAAE,CAACkF,SAAS,CAAC,sBAAsB,CAAAI,QAAA,CAAC,kBAE9E,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAEA,mBACEzF,KAAA,QAAAyF,QAAA,eACEzF,KAAA,QAAKqF,SAAS,CAAC,SAAS,CAAAI,QAAA,eACtBzF,KAAA,QAAK6E,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAJ,QAAA,eACjE3F,IAAA,WACE4F,OAAO,CAAEA,CAAA,GAAMvF,QAAQ,CAAC,UAAU,CAAE,CACpCkF,SAAS,CAAC,2BAA2B,CAAAI,QAAA,cAErC3F,IAAA,CAACT,SAAS,EAACyG,IAAI,CAAE,EAAG,CAAE,CAAC,CACjB,CAAC,cACT9F,KAAA,QAAAyF,QAAA,eACEzF,KAAA,OAAAyF,QAAA,EAAI,WAAS,CAACrF,MAAM,CAAC8C,aAAa,EAAK,CAAC,cACxClD,KAAA,QAAK6E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAS,CAAEC,SAAS,CAAE,KAAM,CAAE,CAAAR,QAAA,EAAC,UAC5D,CAACrF,MAAM,CAAC8F,YAAY,EACzB,CAAC,EACH,CAAC,EACH,CAAC,cACNlG,KAAA,QAAK6E,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAAJ,QAAA,eAC3CzF,KAAA,WACE0F,OAAO,CAAEtD,sBAAuB,CAChCiD,SAAS,CAAC,yBAAyB,CAAAI,QAAA,eAEnC3F,IAAA,CAACR,QAAQ,EAACwG,IAAI,CAAE,EAAG,CAAE,CAAC,oBAExB,EAAQ,CAAC,CACR1F,MAAM,CAAC6E,MAAM,GAAK,QAAQ,eACzBjF,KAAA,WACE0F,OAAO,CAAEA,CAAA,GAAMjF,iBAAiB,CAAC,IAAI,CAAE,CACvC4E,SAAS,CAAC,iBAAiB,CAAAI,QAAA,eAE3B3F,IAAA,CAACP,WAAW,EAACuG,IAAI,CAAE,EAAG,CAAE,CAAC,kBAE3B,EAAQ,CACT,CACA1F,MAAM,CAAC6E,MAAM,GAAK,QAAQ,eACzBjF,KAAA,WACE0F,OAAO,CAAEA,CAAA,GAAM/E,wBAAwB,CAAC,IAAI,CAAE,CAC9C0E,SAAS,CAAC,yBAAyB,CAAAI,QAAA,eAEnC3F,IAAA,CAACH,MAAM,EAACmG,IAAI,CAAE,EAAG,CAAE,CAAC,wBAEtB,EAAQ,CACT,EACE,CAAC,EACH,CAAC,cAEN9F,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAI,QAAA,eAE3BzF,KAAA,QAAK6E,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEQ,mBAAmB,CAAE,sCAAsC,CAAEN,GAAG,CAAE,MAAO,CAAE,CAAAJ,QAAA,eAGxGzF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAI,QAAA,eACnB3F,IAAA,QAAKuF,SAAS,CAAC,aAAa,CAAAI,QAAA,cAC1BzF,KAAA,QAAK6E,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,GAAG,CAAE,KAAM,CAAE,CAAAJ,QAAA,eAChE3F,IAAA,CAACN,IAAI,EAACsG,IAAI,CAAE,EAAG,CAACE,KAAK,CAAC,SAAS,CAAE,CAAC,cAClClG,IAAA,OAAIuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,SAAO,CAAI,CAAC,EACpC,CAAC,CACH,CAAC,cACNzF,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAI,QAAA,eACxB3F,IAAA,QAAK+E,KAAK,CAAE,CAAEuB,YAAY,CAAE,MAAO,CAAE,CAAAX,QAAA,cACnC3F,IAAA,WAAA2F,QAAA,CAASrF,MAAM,CAACiG,aAAa,CAAS,CAAC,CACpC,CAAC,cACNrG,KAAA,QAAK6E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEO,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,eAClDzF,KAAA,QAAAyF,QAAA,EAAK,eAAG,CAACrF,MAAM,CAACmG,cAAc,EAAI,KAAK,EAAM,CAAC,cAC9CvG,KAAA,QAAAyF,QAAA,EAAK,eAAG,CAACrF,MAAM,CAACoG,cAAc,EAAI,KAAK,EAAM,CAAC,cAC9CxG,KAAA,QAAAyF,QAAA,EAAK,mBAAO,CAACrF,MAAM,CAACqG,WAAW,EAAI,KAAK,EAAM,CAAC,EAC5C,CAAC,EACH,CAAC,EACH,CAAC,cAGNzG,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAI,QAAA,eACnB3F,IAAA,QAAKuF,SAAS,CAAC,aAAa,CAAAI,QAAA,cAC1BzF,KAAA,QAAK6E,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,GAAG,CAAE,KAAM,CAAE,CAAAJ,QAAA,eAChE3F,IAAA,CAACL,GAAG,EAACqG,IAAI,CAAE,EAAG,CAACE,KAAK,CAAC,SAAS,CAAE,CAAC,cACjClG,IAAA,OAAIuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,SAAO,CAAI,CAAC,EACpC,CAAC,CACH,CAAC,cACNzF,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAI,QAAA,eACxB3F,IAAA,QAAK+E,KAAK,CAAE,CAAEuB,YAAY,CAAE,MAAO,CAAE,CAAAX,QAAA,cACnCzF,KAAA,WAAQ6E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAO,CAAE,CAAAN,QAAA,EACjCrF,MAAM,CAACsG,KAAK,CAAC,GAAC,CAACtG,MAAM,CAACuG,KAAK,EACtB,CAAC,CACN,CAAC,cACN3G,KAAA,QAAK6E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEO,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,eAClDzF,KAAA,QAAAyF,QAAA,EAAK,qBAAI,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAACwG,aAAa,EAAM,CAAC,CAC5DxG,MAAM,CAACyG,aAAa,eAAI7G,KAAA,QAAAyF,QAAA,EAAK,eAAG,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAACyG,aAAa,EAAM,CAAC,EACtF,CAAC,EACH,CAAC,EACH,CAAC,cAGN7G,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAI,QAAA,eACnB3F,IAAA,QAAKuF,SAAS,CAAC,aAAa,CAAAI,QAAA,cAC1BzF,KAAA,QAAK6E,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,GAAG,CAAE,KAAM,CAAE,CAAAJ,QAAA,eAChE3F,IAAA,CAACJ,QAAQ,EAACoG,IAAI,CAAE,EAAG,CAACE,KAAK,CAAC,SAAS,CAAE,CAAC,cACtClG,IAAA,OAAIuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,MAAI,CAAI,CAAC,EACjC,CAAC,CACH,CAAC,cACN3F,IAAA,QAAKuF,SAAS,CAAC,WAAW,CAAAI,QAAA,cACxBzF,KAAA,QAAK6E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEO,UAAU,CAAE,GAAI,CAAE,CAAAb,QAAA,eAChDzF,KAAA,QAAAyF,QAAA,eACE3F,IAAA,WAAA2F,QAAA,CAAQ,SAAO,CAAQ,CAAC,cAAA3F,IAAA,QAAK,CAAC,CAC7BwE,UAAU,CAAClE,MAAM,CAAC0G,WAAW,CAAC,EAC5B,CAAC,cACN9G,KAAA,QAAK6E,KAAK,CAAE,CAAEoB,SAAS,CAAE,MAAO,CAAE,CAAAR,QAAA,eAChC3F,IAAA,WAAA2F,QAAA,CAAQ,mBAAiB,CAAQ,CAAC,cAAA3F,IAAA,QAAK,CAAC,CACvCwE,UAAU,CAAClE,MAAM,CAAC2G,oBAAoB,CAAC,EACrC,CAAC,CACL3G,MAAM,CAACU,WAAW,eACjBd,KAAA,QAAK6E,KAAK,CAAE,CACVoB,SAAS,CAAE,MAAM,CACjBe,UAAU,CAAE,MAAM,CAClBC,SAAS,CAAE,mBAAmB,CAC9BjB,KAAK,CAAE,SAAS,CAChBkB,UAAU,CAAE,KACd,CAAE,CAAAzB,QAAA,EAAC,mBACW,cAAA3F,IAAA,QAAK,CAAC,CACjBwE,UAAU,CAAClE,MAAM,CAACU,WAAW,CAAC,EAC5B,CACN,cACDd,KAAA,QAAK6E,KAAK,CAAE,CAAEoB,SAAS,CAAE,MAAM,CAAEe,UAAU,CAAE,MAAM,CAAEC,SAAS,CAAE,mBAAoB,CAAE,CAAAxB,QAAA,eACpF3F,IAAA,WAAA2F,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAAC+G,UAAU,CAAC,QAAM,CAAC/G,MAAM,CAAC+G,UAAU,GAAK,CAAC,CAAG,GAAG,CAAG,GAAG,EACnF,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,EACH,CAAC,cAGNnH,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAI,QAAA,eACxBzF,KAAA,QAAKqF,SAAS,CAAC,aAAa,CAACR,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEyB,cAAc,CAAE,eAAe,CAAExB,UAAU,CAAE,QAAS,CAAE,CAAAH,QAAA,eAC7G3F,IAAA,OAAIuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,mBAAiB,CAAI,CAAC,CAChDT,cAAc,CAAC5E,MAAM,CAAC6E,MAAM,CAAC,EAC3B,CAAC,cACNnF,IAAA,QAAKuF,SAAS,CAAC,WAAW,CAAAI,QAAA,cACxBzF,KAAA,QAAK6E,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEQ,mBAAmB,CAAE,sCAAsC,CAAEN,GAAG,CAAE,MAAO,CAAE,CAAAJ,QAAA,eAExGzF,KAAA,QAAAyF,QAAA,eACE3F,IAAA,OAAI+E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEmB,UAAU,CAAE,KAAK,CAAEd,YAAY,CAAE,MAAM,CAAEJ,KAAK,CAAE,SAAU,CAAE,CAAAP,QAAA,CAAC,qBAE5F,CAAI,CAAC,cACLzF,KAAA,QAAK6E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEO,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,eAClDzF,KAAA,QAAAyF,QAAA,EAAK,eAAG,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAAC4B,eAAe,EAAM,CAAC,cAC9DhC,KAAA,QAAAyF,QAAA,EAAK,SAAE,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,aAAW,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAACiH,iBAAiB,CAAC,GAAC,EAAK,CAAC,cACrErH,KAAA,QAAAyF,QAAA,EAAK,eAAG,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,KAAG,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAAC4D,SAAS,EAAM,CAAC,CACpD5D,MAAM,CAACkH,cAAc,eACpBtH,KAAA,QAAK6E,KAAK,CAAE,CAAEoB,SAAS,CAAE,KAAM,CAAE,CAAAR,QAAA,eAC/B3F,IAAA,WAAA2F,QAAA,CAAQ,QAAM,CAAQ,CAAC,cAAA3F,IAAA,QAAK,CAAC,cAC7BA,IAAA,SAAM+E,KAAK,CAAE,CAAEmB,KAAK,CAAE,SAAU,CAAE,CAAAP,QAAA,CAAErF,MAAM,CAACkH,cAAc,CAAO,CAAC,EAC9D,CACN,EACE,CAAC,EACH,CAAC,CAGLlH,MAAM,CAACU,WAAW,eACjBd,KAAA,QAAAyF,QAAA,eACE3F,IAAA,OAAI+E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEmB,UAAU,CAAE,KAAK,CAAEd,YAAY,CAAE,MAAM,CAAEJ,KAAK,CAAE,SAAU,CAAE,CAAAP,QAAA,CAAC,sBAE5F,CAAI,CAAC,cACLzF,KAAA,QAAK6E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEO,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,eAClDzF,KAAA,QAAAyF,QAAA,EAAK,eAAG,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAACc,eAAe,EAAM,CAAC,cAC9DlB,KAAA,QAAAyF,QAAA,EAAK,SAAE,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,aAAW,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAACe,iBAAiB,CAAC,GAAC,EAAK,CAAC,cACrEnB,KAAA,QAAAyF,QAAA,EAAK,eAAG,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,KAAG,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAACgB,SAAS,EAAM,CAAC,cACrDpB,KAAA,QAAAyF,QAAA,EAAK,qBAAI,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAACgB,SAAS,CAAGhB,MAAM,CAAC4D,SAAS,EAAM,CAAC,CACjF5D,MAAM,CAACiB,cAAc,eACpBrB,KAAA,QAAK6E,KAAK,CAAE,CAAEoB,SAAS,CAAE,KAAM,CAAE,CAAAR,QAAA,eAC/B3F,IAAA,WAAA2F,QAAA,CAAQ,QAAM,CAAQ,CAAC,cAAA3F,IAAA,QAAK,CAAC,cAC7BA,IAAA,SAAM+E,KAAK,CAAE,CAAEmB,KAAK,CAAE,SAAU,CAAE,CAAAP,QAAA,CAAErF,MAAM,CAACiB,cAAc,CAAO,CAAC,EAC9D,CACN,EACE,CAAC,EACH,CACN,cAGDrB,KAAA,QAAAyF,QAAA,eACE3F,IAAA,OAAI+E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEmB,UAAU,CAAE,KAAK,CAAEd,YAAY,CAAE,MAAM,CAAEJ,KAAK,CAAE,SAAU,CAAE,CAAAP,QAAA,CAAC,SAE5F,CAAI,CAAC,cACLzF,KAAA,QAAK6E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEO,UAAU,CAAE,KAAM,CAAE,CAAAb,QAAA,eAClDzF,KAAA,QAAAyF,QAAA,EAAK,eAAG,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,iBAAe,CAAQ,CAAC,IAAC,CAAChB,cAAc,CAACrE,MAAM,CAACmH,UAAU,CAAC,EAAM,CAAC,cAClFvH,KAAA,QAAAyF,QAAA,EAAK,eAAG,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACrF,MAAM,CAAC+G,UAAU,EAAM,CAAC,cAC1DnH,KAAA,QAAK6E,KAAK,CAAE,CAAEoB,SAAS,CAAE,MAAM,CAAEe,UAAU,CAAE,MAAM,CAAEC,SAAS,CAAE,mBAAoB,CAAE,CAAAxB,QAAA,eACpF3F,IAAA,WAAA2F,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,cAAA3F,IAAA,SAAM+E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEmB,UAAU,CAAE,KAAK,CAAElB,KAAK,CAAE,SAAU,CAAE,CAAAP,QAAA,CAC7FhB,cAAc,CAACrE,MAAM,CAAC6B,YAAY,CAAC,CAChC,CAAC,EACJ,CAAC,cACNjC,KAAA,QAAAyF,QAAA,eAAK3F,IAAA,WAAA2F,QAAA,CAAQ,UAAQ,CAAQ,CAAC,IAAC,CAAChB,cAAc,CAACrE,MAAM,CAACmB,WAAW,EAAI,CAAC,CAAC,EAAM,CAAC,CAC7EiG,UAAU,CAACpH,MAAM,CAACoB,UAAU,EAAI,CAAC,CAAC,CAAG,CAAC,eACrCxB,KAAA,QAAK6E,KAAK,CAAE,CAAEmB,KAAK,CAAE,SAAS,CAAEkB,UAAU,CAAE,KAAM,CAAE,CAAAzB,QAAA,eAClD3F,IAAA,WAAA2F,QAAA,CAAQ,aAAW,CAAQ,CAAC,IAAC,CAAChB,cAAc,CAACrE,MAAM,CAACoB,UAAU,CAAC,EAC5D,CACN,EACE,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,cAGNxB,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAI,QAAA,eACxB3F,IAAA,QAAKuF,SAAS,CAAC,aAAa,CAAAI,QAAA,cAC1BzF,KAAA,QAAK6E,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,GAAG,CAAE,KAAM,CAAE,CAAAJ,QAAA,eAChE3F,IAAA,CAACH,MAAM,EAACmG,IAAI,CAAE,EAAG,CAAE,CAAC,cACpBhG,IAAA,OAAIuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,cAAY,CAAI,CAAC,EACzC,CAAC,CACH,CAAC,cACNzF,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAI,QAAA,eAExBzF,KAAA,QAAK6E,KAAK,CAAE,CAAEuB,YAAY,CAAE,MAAO,CAAE,CAAAX,QAAA,eACnC3F,IAAA,OAAI+E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEmB,UAAU,CAAE,KAAK,CAAEd,YAAY,CAAE,MAAM,CAAEJ,KAAK,CAAE,SAAU,CAAE,CAAAP,QAAA,CAAC,gBAE5F,CAAI,CAAC,cACL3F,IAAA,CAACV,WAAW,EACVqI,QAAQ,CAAEvH,EAAG,CACbwH,SAAS,CAAC,QAAQ,CAClBC,cAAc,CAAGC,MAAM,EAAKzF,OAAO,CAAC0F,GAAG,CAAC,gBAAgB,CAAED,MAAM,CAAE,CACnE,CAAC,EACC,CAAC,CAGLxH,MAAM,CAAC6E,MAAM,GAAK,QAAQ,eACzBjF,KAAA,QAAK6E,KAAK,CAAE,CAAEoB,SAAS,CAAE,MAAM,CAAEe,UAAU,CAAE,MAAM,CAAEC,SAAS,CAAE,mBAAoB,CAAE,CAAAxB,QAAA,eACpF3F,IAAA,OAAI+E,KAAK,CAAE,CAAEkB,QAAQ,CAAE,MAAM,CAAEmB,UAAU,CAAE,KAAK,CAAEd,YAAY,CAAE,MAAM,CAAEJ,KAAK,CAAE,SAAU,CAAE,CAAAP,QAAA,CAAC,iBAE5F,CAAI,CAAC,cACL3F,IAAA,CAACV,WAAW,EACVqI,QAAQ,CAAEvH,EAAG,CACbwH,SAAS,CAAC,QAAQ,CAClBC,cAAc,CAAGC,MAAM,EAAKzF,OAAO,CAAC0F,GAAG,CAAC,gBAAgB,CAAED,MAAM,CAAE,CACnE,CAAC,EACC,CACN,EACE,CAAC,EACH,CAAC,EACH,CAAC,CAGLpH,cAAc,eACbV,IAAA,QACEuF,SAAS,CAAC,gBAAgB,CAC1BK,OAAO,CAAEA,CAAA,GAAMjF,iBAAiB,CAAC,KAAK,CAAE,CACxCoE,KAAK,CAAE,CACLiD,QAAQ,CAAE,OAAO,CACjBC,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACdC,eAAe,CAAE,oBAAoB,CACrCxC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBwB,cAAc,CAAE,QAAQ,CACxBgB,MAAM,CAAE,IACV,CAAE,CAAA3C,QAAA,cAEFzF,KAAA,QACEqF,SAAS,CAAC,OAAO,CACjBK,OAAO,CAAG2C,CAAC,EAAKA,CAAC,CAACC,eAAe,CAAC,CAAE,CACpCzD,KAAK,CAAE,CACLsD,eAAe,CAAE,OAAO,CACxBI,YAAY,CAAE,KAAK,CACnBN,KAAK,CAAE,KAAK,CACZO,QAAQ,CAAE,OAAO,CACjBC,SAAS,CAAE,MAAM,CACjBC,QAAQ,CAAE,MACZ,CAAE,CAAAjD,QAAA,eAEFzF,KAAA,QACEqF,SAAS,CAAC,cAAc,CACxBR,KAAK,CAAE,CACL8D,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,mBAAmB,CACjCjD,OAAO,CAAE,MAAM,CACfyB,cAAc,CAAE,eAAe,CAC/BxB,UAAU,CAAE,QACd,CAAE,CAAAH,QAAA,eAEF3F,IAAA,OAAI+E,KAAK,CAAE,CAAEgE,MAAM,CAAE,CAAC,CAAE9C,QAAQ,CAAE,MAAM,CAAEmB,UAAU,CAAE,KAAM,CAAE,CAAAzB,QAAA,CAAC,iBAAe,CAAI,CAAC,cACnF3F,IAAA,WACE4F,OAAO,CAAEA,CAAA,GAAMjF,iBAAiB,CAAC,KAAK,CAAE,CACxCoE,KAAK,CAAE,CACLiE,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE,MAAM,CACdhD,QAAQ,CAAE,MAAM,CAChBiD,MAAM,CAAE,SAAS,CACjBhD,KAAK,CAAE,SAAS,CAChBM,UAAU,CAAE,CACd,CAAE,CAAAb,QAAA,cAEF3F,IAAA,CAACF,CAAC,EAACkG,IAAI,CAAE,EAAG,CAAE,CAAC,CACT,CAAC,EACN,CAAC,cAEN9F,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAACR,KAAK,CAAE,CAAE8D,OAAO,CAAE,MAAO,CAAE,CAAAlD,QAAA,eACrDzF,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAI,QAAA,eACzB3F,IAAA,UAAOuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,sBAAoB,CAAO,CAAC,cAC1D3F,IAAA,UACEmJ,IAAI,CAAC,gBAAgB,CACrB5D,SAAS,CAAC,cAAc,CACxB6D,KAAK,CAAEtI,SAAS,CAACE,WAAY,CAC7BqI,QAAQ,CAAGd,CAAC,EAAKxH,YAAY,CAAAkB,aAAA,CAAAA,aAAA,IAAMnB,SAAS,MAAEE,WAAW,CAAEuH,CAAC,CAACe,MAAM,CAACF,KAAK,EAAE,CAAE,CAC7EG,QAAQ,MACT,CAAC,EACC,CAAC,cAENrJ,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAI,QAAA,eACzB3F,IAAA,UAAOuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,eAAa,CAAO,CAAC,cACnD3F,IAAA,UACEmJ,IAAI,CAAC,MAAM,CACX5D,SAAS,CAAC,cAAc,CACxB6D,KAAK,CAAEtI,SAAS,CAACM,eAAgB,CACjCiI,QAAQ,CAAGd,CAAC,EAAKxH,YAAY,CAAAkB,aAAA,CAAAA,aAAA,IAAMnB,SAAS,MAAEM,eAAe,CAAEmH,CAAC,CAACe,MAAM,CAACF,KAAK,EAAE,CAAE,CAClF,CAAC,EACC,CAAC,cAENlJ,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAI,QAAA,eACvBzF,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAI,QAAA,eACzB3F,IAAA,UAAOuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,kBAAgB,CAAO,CAAC,cACtD3F,IAAA,UACEmJ,IAAI,CAAC,QAAQ,CACb5D,SAAS,CAAC,cAAc,CACxB6D,KAAK,CAAEtI,SAAS,CAACO,iBAAkB,CACnCgI,QAAQ,CAAGd,CAAC,EAAKxH,YAAY,CAAAkB,aAAA,CAAAA,aAAA,IAAMnB,SAAS,MAAEO,iBAAiB,CAAEkH,CAAC,CAACe,MAAM,CAACF,KAAK,EAAE,CAAE,CACnFI,GAAG,CAAC,GAAG,CACPC,GAAG,CAAC,KAAK,CACTF,QAAQ,MACT,CAAC,EACC,CAAC,cAENrJ,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAI,QAAA,eACzB3F,IAAA,UAAOuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,iBAAe,CAAO,CAAC,cACrD3F,IAAA,UACEmJ,IAAI,CAAC,QAAQ,CACb5D,SAAS,CAAC,cAAc,CACxB6D,KAAK,CAAEtI,SAAS,CAACQ,SAAU,CAC3B+H,QAAQ,CAAGd,CAAC,EAAKxH,YAAY,CAAAkB,aAAA,CAAAA,aAAA,IAAMnB,SAAS,MAAEQ,SAAS,CAAEiH,CAAC,CAACe,MAAM,CAACF,KAAK,EAAE,CAAE,CAC3EI,GAAG,CAAElJ,MAAM,CAAC4D,SAAU,CACtBqF,QAAQ,MACT,CAAC,EACC,CAAC,EACH,CAAC,cAENrJ,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAI,QAAA,eACzB3F,IAAA,UAAOuF,SAAS,CAAC,YAAY,CAAAI,QAAA,CAAC,aAAW,CAAO,CAAC,cACjD3F,IAAA,aACEuF,SAAS,CAAC,cAAc,CACxB6D,KAAK,CAAEtI,SAAS,CAACS,cAAe,CAChC8H,QAAQ,CAAGd,CAAC,EAAKxH,YAAY,CAAAkB,aAAA,CAAAA,aAAA,IAAMnB,SAAS,MAAES,cAAc,CAAEgH,CAAC,CAACe,MAAM,CAACF,KAAK,EAAE,CAAE,CAChFM,IAAI,CAAC,GAAG,CACRC,WAAW,CAAC,mCAAmC,CAChD,CAAC,EACC,CAAC,cAENzJ,KAAA,QAAK6E,KAAK,CAAE,CACV8D,OAAO,CAAE,MAAM,CACfG,UAAU,CAAE,SAAS,CACrBP,YAAY,CAAE,KAAK,CACnBxC,QAAQ,CAAE,MAAM,CAChBE,SAAS,CAAE,MACb,CAAE,CAAAR,QAAA,EAAC,eACE,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,OAAK,CAAQ,CAAC,qFAC3B,EAAK,CAAC,EACH,CAAC,cAENzF,KAAA,QACEqF,SAAS,CAAC,cAAc,CACxBR,KAAK,CAAE,CACL8D,OAAO,CAAE,WAAW,CACpB1B,SAAS,CAAE,mBAAmB,CAC9BtB,OAAO,CAAE,MAAM,CACfyB,cAAc,CAAE,UAAU,CAC1BvB,GAAG,CAAE,MACP,CAAE,CAAAJ,QAAA,eAEF3F,IAAA,WACE4F,OAAO,CAAEA,CAAA,GAAMjF,iBAAiB,CAAC,KAAK,CAAE,CACxC4E,SAAS,CAAC,mBAAmB,CAAAI,QAAA,CAC9B,SAED,CAAQ,CAAC,cACTzF,KAAA,WACE0F,OAAO,CAAE9B,iBAAkB,CAC3ByB,SAAS,CAAC,iBAAiB,CAAAI,QAAA,eAE3B3F,IAAA,CAACP,WAAW,EAACuG,IAAI,CAAE,EAAG,CAAE,CAAC,kBAE3B,EAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CACN,CAGApF,qBAAqB,eACpBZ,IAAA,QACEuF,SAAS,CAAC,gBAAgB,CAC1BK,OAAO,CAAEA,CAAA,GAAM/E,wBAAwB,CAAC,KAAK,CAAE,CAC/CkE,KAAK,CAAE,CACLiD,QAAQ,CAAE,OAAO,CACjBC,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACdC,eAAe,CAAE,oBAAoB,CACrCxC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBwB,cAAc,CAAE,QAAQ,CACxBgB,MAAM,CAAE,IACV,CAAE,CAAA3C,QAAA,cAEFzF,KAAA,QACEqF,SAAS,CAAC,OAAO,CACjBK,OAAO,CAAG2C,CAAC,EAAKA,CAAC,CAACC,eAAe,CAAC,CAAE,CACpCzD,KAAK,CAAE,CACLsD,eAAe,CAAE,OAAO,CACxBI,YAAY,CAAE,KAAK,CACnBN,KAAK,CAAE,KAAK,CACZO,QAAQ,CAAE,OAAO,CACjBC,SAAS,CAAE,MAAM,CACjBC,QAAQ,CAAE,MACZ,CAAE,CAAAjD,QAAA,eAEFzF,KAAA,QACEqF,SAAS,CAAC,cAAc,CACxBR,KAAK,CAAE,CACL8D,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,mBAAmB,CACjCjD,OAAO,CAAE,MAAM,CACfyB,cAAc,CAAE,eAAe,CAC/BxB,UAAU,CAAE,QACd,CAAE,CAAAH,QAAA,eAEFzF,KAAA,OAAI6E,KAAK,CAAE,CAAEgE,MAAM,CAAE,CAAC,CAAE9C,QAAQ,CAAE,MAAM,CAAEmB,UAAU,CAAE,KAAM,CAAE,CAAAzB,QAAA,eAC5D3F,IAAA,CAACH,MAAM,EAACmG,IAAI,CAAE,EAAG,CAACjB,KAAK,CAAE,CAAE6E,WAAW,CAAE,KAAK,CAAEC,aAAa,CAAE,QAAS,CAAE,CAAE,CAAC,0BAE9E,EAAI,CAAC,cACL7J,IAAA,WACE4F,OAAO,CAAEA,CAAA,GAAM/E,wBAAwB,CAAC,KAAK,CAAE,CAC/CkE,KAAK,CAAE,CACLiE,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE,MAAM,CACdhD,QAAQ,CAAE,MAAM,CAChBiD,MAAM,CAAE,SAAS,CACjBhD,KAAK,CAAE,SAAS,CAChBM,UAAU,CAAE,CACd,CAAE,CAAAb,QAAA,cAEF3F,IAAA,CAACF,CAAC,EAACkG,IAAI,CAAE,EAAG,CAAE,CAAC,CACT,CAAC,EACN,CAAC,cAEN9F,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAACR,KAAK,CAAE,CAAE8D,OAAO,CAAE,MAAO,CAAE,CAAAlD,QAAA,eACrDzF,KAAA,QAAK6E,KAAK,CAAE,CACV8D,OAAO,CAAE,MAAM,CACfG,UAAU,CAAE,SAAS,CACrBP,YAAY,CAAE,KAAK,CACnBxC,QAAQ,CAAE,MAAM,CAChBK,YAAY,CAAE,MAAM,CACpBJ,KAAK,CAAE,SACT,CAAE,CAAAP,QAAA,EAAC,eACE,cAAA3F,IAAA,WAAA2F,QAAA,CAAQ,aAAW,CAAQ,CAAC,4FACjC,EAAK,CAAC,cAEN3F,IAAA,CAACV,WAAW,EACVqI,QAAQ,CAAEvH,EAAG,CACbwH,SAAS,CAAC,QAAQ,CAClBC,cAAc,CAAGC,MAAM,EAAKzF,OAAO,CAAC0F,GAAG,CAAC,wBAAwB,CAAED,MAAM,CAAE,CAC3E,CAAC,EACC,CAAC,cAEN9H,IAAA,QACEuF,SAAS,CAAC,cAAc,CACxBR,KAAK,CAAE,CACL8D,OAAO,CAAE,WAAW,CACpB1B,SAAS,CAAE,mBAAmB,CAC9BtB,OAAO,CAAE,MAAM,CACfyB,cAAc,CAAE,UAAU,CAC1BvB,GAAG,CAAE,MACP,CAAE,CAAAJ,QAAA,cAEFzF,KAAA,WACE0F,OAAO,CAAErB,0BAA2B,CACpCgB,SAAS,CAAC,iBAAiB,CAAAI,QAAA,eAE3B3F,IAAA,CAACP,WAAW,EAACuG,IAAI,CAAE,EAAG,CAAE,CAAC,WAE3B,EAAQ,CAAC,CACN,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7F,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}