{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bncrentcar\\\\frontend\\\\src\\\\components\\\\NewRental.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport PhotoUpload from './PhotoUpload';\nimport { ArrowLeft, ArrowRight, Save, User, Car, Calendar, DollarSign, CreditCard, Shield, Camera, CheckCircle, UserPlus, FileText // âœ… CORREZIONE: Importa FileText\n} from 'lucide-react';\n\n// --- INIZIO: Implementazione Mock SignaturePad ---\n// NOTA: Per un funzionamento reale su mobile, DEVI installare e utilizzare una libreria \n// come 'react-signature-canvas' e decommentare la riga di importazione.\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SignaturePad = ({\n  ref,\n  penColor,\n  canvasProps,\n  onEnd\n}) => {\n  _s();\n  // Implementazione minima per non interrompere il codice.\n  React.useImperativeHandle(ref, () => ({\n    clear: () => console.log('Signature cleared (simulation)'),\n    isEmpty: () => false,\n    getTrimmedCanvas: () => ({\n      toDataURL: () => 'data:image/png;base64,SIMULATED_SIGNATURE'\n    })\n  }));\n\n  // Usa un elemento canvas standard come placeholder\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ...canvasProps,\n    style: {\n      ...canvasProps.style,\n      backgroundColor: '#f5f5f5'\n    },\n    onMouseUp: onEnd,\n    onTouchEnd: onEnd,\n    children: \"Disegna qui (Solo Placeholder: installa `react-signature-canvas`)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n};\n// --- FINE: Implementazione Mock SignaturePad ---\n_s(SignaturePad, \"PYzlZ2AGFM0KxtNOGoZVRb5EOEw=\");\n_c = SignaturePad;\nconst NewRental = () => {\n  _s2();\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [customers, setCustomers] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n\n  // Riferimento al canvas per la firma\n  const sigCanvas = useRef({});\n\n  // âœ… STATO COMPLETO CON VALORI DI DEFAULT E FIRMA\n  const [formData, setFormData] = useState({\n    // Step 1: Cliente\n    customer_id: '',\n    // Step 2: Veicolo\n    vehicle_id: '',\n    // Step 3: Date e Dettagli Noleggio\n    pickup_date: new Date().toISOString().slice(0, 16),\n    // Data/ora attuali\n    expected_return_date: '',\n    // Da calcolare o inserire\n    pickup_location: 'BNC Energy Rent Car',\n    pickup_fuel_level: '100',\n    // 100%\n    pickup_km: '',\n    pickup_damages: 'Nessun danno',\n    pickup_notes: '',\n    // Step 4: Conducente Aggiuntivo\n    additional_driver_name: '',\n    additional_driver_birth_place: '',\n    additional_driver_birth_date: '',\n    additional_driver_license: '',\n    additional_driver_license_issued_by: '',\n    additional_driver_license_issue_date: '',\n    additional_driver_license_expiry: '',\n    // Step 5: Tariffe e Costi\n    daily_rate: '',\n    deposit_amount: '0',\n    // Cauzione\n    total_days: 1,\n    km_included: 'Illimitati',\n    // âœ… VALORI DI DEFAULT RICHIESTI\n    delivery_cost: '0',\n    fuel_charge: '2.50',\n    // Carburante a litro\n    after_hours_charge: '20.00',\n    // Addebito fuori orario\n    km_extra_cost: '0.56',\n    // Costo unitario KM extra\n    extras_charge: '0',\n    // Costo extra (seggiolini, navigatore, ecc.)\n\n    // Step 6: Finanziario\n    extra_km_charge: '0',\n    // Totale extra km\n    franchise_charge: '0',\n    // Coperture aggiuntive\n    discount: '0',\n    subtotal: 0,\n    total_amount: 0,\n    // Step 7: Coperture Assicurative\n    franchise_theft: '0',\n    franchise_damage: '0',\n    franchise_rca: '0',\n    // Step 8: Pagamento\n    payment_method: 'Contanti',\n    deposit_method: 'Contanti',\n    cc_holder_name: '',\n    cc_type: 'VISA',\n    cc_number_masked: '',\n    cc_expiry: '',\n    // Step 9: Riepilogo Dati (Nessun campo in questo step)\n\n    // Step 10: Consensi e Firma\n    contract_signed: false,\n    privacy_consent: false,\n    marketing_consent: false,\n    customer_signature: '',\n    // âœ… NUOVO CAMPO\n\n    // Step 11: Foto\n    rental_id: null\n  });\n\n  // Funzioni di calcolo (omesse per brevitÃ , ma essenziali in un'app reale)\n  // ...\n\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n  const loadInitialData = async () => {\n    try {\n      var _vehiclesRes$data, _vehiclesRes$data$dat;\n      // Carica clienti e veicoli\n      const [customersRes, vehiclesRes] = await Promise.all([customersAPI.getAll(),\n      // ðŸš¨ MODIFICA PER DIAGNOSI: Rimosso { available_only: true }\n      // Se ora i veicoli compaiono, il problema Ã¨ che NESSUN veicolo ha status='available' nel DB.\n      vehiclesAPI.getAll({})]);\n      setCustomers(customersRes.data.data);\n\n      // âœ… CONTROLLO ROBUSTO E LOG DI DIAGNOSI\n      const fetchedVehicles = (_vehiclesRes$data = vehiclesRes.data) === null || _vehiclesRes$data === void 0 ? void 0 : (_vehiclesRes$data$dat = _vehiclesRes$data.data) === null || _vehiclesRes$data$dat === void 0 ? void 0 : _vehiclesRes$data$dat.vehicles;\n      if (Array.isArray(fetchedVehicles)) {\n        setVehicles(fetchedVehicles);\n        console.log(`âœ… Caricati ${fetchedVehicles.length} veicoli. Status risposta: 200 OK.`);\n      } else {\n        // Se non Ã¨ un array, logga l'intera risposta per debugging\n        console.error(\"âŒ Errore nel formato dati veicoli. Risposta API:\", vehiclesRes);\n        setVehicles([]); // Assicura che sia un array vuoto per evitare il 'map' error\n        toast.error('Errore nel formato dati veicoli ricevuti dal server.');\n      }\n\n      // Imposta la data di riconsegna prevista 24h dopo il ritiro\n      const initialPickup = new Date();\n      const initialReturn = new Date(initialPickup.getTime() + 24 * 60 * 60 * 1000);\n      setFormData(prev => ({\n        ...prev,\n        pickup_date: initialPickup.toISOString().slice(0, 16),\n        expected_return_date: initialReturn.toISOString().slice(0, 16)\n      }));\n    } catch (error) {\n      console.error('Errore nel caricamento dati iniziali (API call failed):', error.response || error);\n      toast.error('Errore nel caricamento dati iniziali. Controlla la console del browser per i dettagli.');\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  // âœ… NUOVE FUNZIONI PER GESTIRE LA FIRMA\n  const handleSignatureClear = () => {\n    sigCanvas.current.clear();\n    setFormData(prev => ({\n      ...prev,\n      customer_signature: ''\n    }));\n  };\n  const handleSignatureEnd = () => {\n    // Simula l'acquisizione della firma Base64\n    if (sigCanvas.current.isEmpty()) {\n      setFormData(prev => ({\n        ...prev,\n        customer_signature: ''\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        customer_signature: sigCanvas.current.getTrimmedCanvas().toDataURL('image/png')\n      }));\n    }\n  };\n\n  // âœ… LOGICA DI VALIDAZIONE AGGIORNATA PER FIRMA OBBLIGATORIA\n  const validateStep = step => {\n    switch (step) {\n      case 1:\n        // Cliente\n        if (!formData.customer_id) {\n          toast.error('Seleziona un cliente.');\n          return false;\n        }\n        break;\n      case 2:\n        // Veicolo\n        if (!formData.vehicle_id) {\n          toast.error('Seleziona un veicolo.');\n          return false;\n        }\n        break;\n      case 3:\n        // Date\n        if (!formData.pickup_date || !formData.expected_return_date) {\n          toast.error('Date di ritiro e riconsegna sono obbligatorie.');\n          return false;\n        }\n        // Aggiungere logica per controllare se data riconsegna Ã¨ >= data ritiro\n        break;\n      case 10:\n        // Consensi e Firma\n        if (!formData.contract_signed || !formData.privacy_consent) {\n          toast.error('Devi accettare il contratto e l\\'informativa sulla privacy.');\n          return false;\n        }\n        if (!formData.customer_signature) {\n          // NUOVA VALIDAZIONE\n          toast.error('La firma del cliente Ã¨ obbligatoria.');\n          return false;\n        }\n        break;\n      default:\n        break;\n    }\n    return true;\n  };\n  const handleNext = () => {\n    if (validateStep(currentStep)) {\n      setCurrentStep(prev => prev + 1);\n    }\n  };\n  const handlePrevious = () => {\n    setCurrentStep(prev => prev - 1);\n  };\n  const handleSubmit = async () => {\n    if (!validateStep(10)) return;\n    try {\n      setLoading(true);\n      const rentalData = {\n        ...formData,\n        // Conversione esplicita dei campi numerici al server\n        daily_rate: parseFloat(formData.daily_rate) || 0,\n        deposit_amount: parseFloat(formData.deposit_amount) || 0,\n        total_days: parseInt(formData.total_days) || 1,\n        delivery_cost: parseFloat(formData.delivery_cost) || 0,\n        fuel_charge: parseFloat(formData.fuel_charge) || 0,\n        after_hours_charge: parseFloat(formData.after_hours_charge) || 0,\n        km_extra_cost: parseFloat(formData.km_extra_cost) || 0,\n        // Nuovo campo inviato\n        extras_charge: parseFloat(formData.extras_charge) || 0,\n        extra_km_charge: parseFloat(formData.extra_km_charge) || 0,\n        franchise_charge: parseFloat(formData.franchise_charge) || 0,\n        discount: parseFloat(formData.discount) || 0,\n        subtotal: formData.subtotal,\n        total_amount: formData.total_amount,\n        franchise_theft: parseFloat(formData.franchise_theft) || 0,\n        franchise_damage: parseFloat(formData.franchise_damage) || 0,\n        franchise_rca: parseFloat(formData.franchise_rca) || 0,\n        // Firma Base64\n        customer_signature: formData.customer_signature\n      };\n      const response = await rentalsAPI.create(rentalData);\n      const newRentalId = response.data.data.id;\n      setFormData(prev => ({\n        ...prev,\n        rental_id: newRentalId\n      }));\n      setCurrentStep(11); // Passa allo step Foto\n      toast.success('Noleggio creato con successo! Continua con le foto.');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Errore creazione noleggio:', error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Errore durante la creazione del noleggio.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFinish = () => {\n    if (formData.rental_id) {\n      navigate(`/rentals/${formData.rental_id}`);\n    } else {\n      navigate('/rentals');\n    }\n  };\n  const steps = [{\n    num: 1,\n    name: 'Cliente',\n    icon: /*#__PURE__*/_jsxDEV(User, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 38\n    }, this)\n  }, {\n    num: 2,\n    name: 'Veicolo',\n    icon: /*#__PURE__*/_jsxDEV(Car, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 38\n    }, this)\n  }, {\n    num: 3,\n    name: 'Date/Ritiro',\n    icon: /*#__PURE__*/_jsxDEV(Calendar, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 42\n    }, this)\n  }, {\n    num: 4,\n    name: 'Conducente Add.',\n    icon: /*#__PURE__*/_jsxDEV(UserPlus, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 46\n    }, this)\n  }, {\n    num: 5,\n    name: 'Tariffe/Costi',\n    icon: /*#__PURE__*/_jsxDEV(DollarSign, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 44\n    }, this)\n  }, {\n    num: 6,\n    name: 'Riepilogo Costi',\n    icon: /*#__PURE__*/_jsxDEV(DollarSign, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 46\n    }, this)\n  }, {\n    num: 7,\n    name: 'Coperture',\n    icon: /*#__PURE__*/_jsxDEV(Shield, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 40\n    }, this)\n  }, {\n    num: 8,\n    name: 'Pagamento',\n    icon: /*#__PURE__*/_jsxDEV(CreditCard, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 40\n    }, this)\n  }, {\n    num: 9,\n    name: 'Riepilogo',\n    icon: /*#__PURE__*/_jsxDEV(FileText, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 40\n    }, this)\n  },\n  // L'errore era qui\n  {\n    num: 10,\n    name: 'Firma/Consensi',\n    icon: /*#__PURE__*/_jsxDEV(CheckCircle, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 46\n    }, this)\n  }, {\n    num: 11,\n    name: 'Foto Iniziali',\n    icon: /*#__PURE__*/_jsxDEV(Camera, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 45\n    }, this)\n  }];\n  const renderStep1 = () => {\n    var _customers$find, _customers$find2, _customers$find3;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: '24px'\n        },\n        children: \"Selezione Cliente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"customer_id\",\n        value: formData.customer_id,\n        onChange: handleChange,\n        className: \"form-control\",\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Seleziona un Cliente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 9\n        }, this), customers === null || customers === void 0 ? void 0 : customers.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c.id,\n          children: [c.full_name, \" (\", c.tax_code, \")\"]\n        }, c.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 7\n      }, this), formData.customer_id && (customers === null || customers === void 0 ? void 0 : customers.find(c => c.id === parseInt(formData.customer_id))) && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '20px',\n          padding: '15px',\n          border: '1px solid #ccc',\n          borderRadius: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Dettagli Cliente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Nome:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 14\n          }, this), \" \", (_customers$find = customers.find(c => c.id === parseInt(formData.customer_id))) === null || _customers$find === void 0 ? void 0 : _customers$find.full_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 14\n          }, this), \" \", (_customers$find2 = customers.find(c => c.id === parseInt(formData.customer_id))) === null || _customers$find2 === void 0 ? void 0 : _customers$find2.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Telefono:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 14\n          }, this), \" \", (_customers$find3 = customers.find(c => c.id === parseInt(formData.customer_id))) === null || _customers$find3 === void 0 ? void 0 : _customers$find3.phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 5\n    }, this);\n  };\n  const renderStep2 = () => {\n    var _vehicles$find, _vehicles$find2, _vehicles$find3, _vehicles$find4;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: '24px'\n        },\n        children: \"Selezione Veicolo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"vehicle_id\",\n        value: formData.vehicle_id,\n        onChange: handleChange,\n        className: \"form-control\",\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Seleziona un Veicolo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 9\n        }, this), vehicles === null || vehicles === void 0 ? void 0 : vehicles.map(v => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: v.id,\n          children: [v.brand, \" \", v.model, \" (\", v.license_plate, \") - \", v.category_name]\n        }, v.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 7\n      }, this), formData.vehicle_id && (vehicles === null || vehicles === void 0 ? void 0 : vehicles.find(v => v.id === parseInt(formData.vehicle_id))) && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '20px',\n          padding: '15px',\n          border: '1px solid #ccc',\n          borderRadius: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Dettagli Veicolo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Targa:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 14\n          }, this), \" \", (_vehicles$find = vehicles.find(v => v.id === parseInt(formData.vehicle_id))) === null || _vehicles$find === void 0 ? void 0 : _vehicles$find.license_plate]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Categoria:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 14\n          }, this), \" \", (_vehicles$find2 = vehicles.find(v => v.id === parseInt(formData.vehicle_id))) === null || _vehicles$find2 === void 0 ? void 0 : _vehicles$find2.category_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Km Attuali:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 14\n          }, this), \" \", (_vehicles$find3 = vehicles.find(v => v.id === parseInt(formData.vehicle_id))) === null || _vehicles$find3 === void 0 ? void 0 : _vehicles$find3.current_km, \" km\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Tariffa Base:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 14\n          }, this), \" \", (_vehicles$find4 = vehicles.find(v => v.id === parseInt(formData.vehicle_id))) === null || _vehicles$find4 === void 0 ? void 0 : _vehicles$find4.daily_rate, \" \\u20AC/giorno\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 5\n    }, this);\n  };\n  const renderStep3 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Dettagli Ritiro e Riconsegna\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Data/Ora Ritiro Effettivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"datetime-local\",\n        name: \"pickup_date\",\n        value: formData.pickup_date,\n        onChange: handleChange,\n        className: \"form-control\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Data/Ora Riconsegna Prevista\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"datetime-local\",\n        name: \"expected_return_date\",\n        value: formData.expected_return_date,\n        onChange: handleChange,\n        className: \"form-control\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Luogo di Ritiro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"pickup_location\",\n        value: formData.pickup_location,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Livello Carburante al Ritiro (%)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"pickup_fuel_level\",\n        value: formData.pickup_fuel_level,\n        onChange: handleChange,\n        className: \"form-control\",\n        min: \"0\",\n        max: \"100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Km al Ritiro (OBBLIGATORIO)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"pickup_km\",\n        value: formData.pickup_km,\n        onChange: handleChange,\n        className: \"form-control\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Danni Visibili al Ritiro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"pickup_damages\",\n        value: formData.pickup_damages,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Note di Ritiro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"pickup_notes\",\n        value: formData.pickup_notes,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 373,\n    columnNumber: 5\n  }, this);\n  const renderStep4 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Conducente Aggiuntivo (Opzionale)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nome Completo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"additional_driver_name\",\n        value: formData.additional_driver_name,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Luogo di Nascita\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"additional_driver_birth_place\",\n        value: formData.additional_driver_birth_place,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Data di Nascita\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"additional_driver_birth_date\",\n        value: formData.additional_driver_birth_date,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Numero Patente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"additional_driver_license\",\n        value: formData.additional_driver_license,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Rilasciata da\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"additional_driver_license_issued_by\",\n        value: formData.additional_driver_license_issued_by,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Data Rilascio Patente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"additional_driver_license_issue_date\",\n        value: formData.additional_driver_license_issue_date,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Data Scadenza Patente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"additional_driver_license_expiry\",\n        value: formData.additional_driver_license_expiry,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 459,\n    columnNumber: 5\n  }, this);\n  const renderStep5 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Tariffe e Costi Base\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tariffa Giornaliera (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"daily_rate\",\n        value: formData.daily_rate,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Giorni di Noleggio (Totali)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"total_days\",\n        value: formData.total_days,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Cauzione (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"deposit_amount\",\n        value: formData.deposit_amount,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Km Inclusi (es. Illimitati o 100km/giorno)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"km_included\",\n        value: formData.km_included,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      style: {\n        marginTop: '30px'\n      },\n      children: \"Costi Aggiuntivi Preimpostati\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Costo Carburante (a litro - default: **2.50** \\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"fuel_charge\",\n        value: formData.fuel_charge,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Addebito Fuori Orario (default: **20.00** \\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"after_hours_charge\",\n        value: formData.after_hours_charge,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Costo KM Extra (a km - default: **0.56** \\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"km_extra_cost\",\n        value: formData.km_extra_cost,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Costo Consegna/Ritiro (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"delivery_cost\",\n        value: formData.delivery_cost,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Costi Extra Generici (es. Seggiolino, Navigatore)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"extras_charge\",\n        value: formData.extras_charge,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 493,\n    columnNumber: 5\n  }, this);\n  const renderStep6 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Riepilogo Costi e Totali\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Addebito KM Extra Totale (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"extra_km_charge\",\n        value: formData.extra_km_charge,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Addebito Coperture Aggiuntive Totale (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"franchise_charge\",\n        value: formData.franchise_charge,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Sconto Applicato (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"discount\",\n        value: formData.discount,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '30px',\n        padding: '15px',\n        border: '1px solid #007bff',\n        borderRadius: '4px',\n        background: '#e9f5ff'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Totali (Calcolati o Inseriti Manualmente)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Subtotale Noleggio (\\u20AC)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"subtotal\",\n          value: formData.subtotal,\n          onChange: handleChange,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Totale Contratto (\\u20AC)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"total_amount\",\n          value: formData.total_amount,\n          onChange: handleChange,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 544,\n    columnNumber: 5\n  }, this);\n  const renderStep7 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Coperture Assicurative (Franchigie)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '14px',\n        color: '#6c757d'\n      },\n      children: \"Valori franchigie in caso di sinistro/furto/incendio.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Franchigia Furto/Incendio (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"franchise_theft\",\n        value: formData.franchise_theft,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Franchigia Danni (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"franchise_damage\",\n        value: formData.franchise_damage,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Massimale RCA (\\u20AC)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"franchise_rca\",\n        value: formData.franchise_rca,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 578,\n    columnNumber: 5\n  }, this);\n  const renderStep8 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Dettagli Pagamento\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Metodo Pagamento Totale\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"payment_method\",\n        value: formData.payment_method,\n        onChange: handleChange,\n        className: \"form-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Contanti\",\n          children: \"Contanti\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Carta di Credito\",\n          children: \"Carta di Credito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Bonifico\",\n          children: \"Bonifico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Metodo Pagamento Cauzione\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"deposit_method\",\n        value: formData.deposit_method,\n        onChange: handleChange,\n        className: \"form-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Contanti\",\n          children: \"Contanti\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Carta di Credito\",\n          children: \"Carta di Credito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Assegno\",\n          children: \"Assegno\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      style: {\n        marginTop: '30px'\n      },\n      children: \"Dati Carta di Credito (Se usata)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nome Intestatario CC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"cc_holder_name\",\n        value: formData.cc_holder_name,\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tipo Carta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"cc_type\",\n        value: formData.cc_type,\n        onChange: handleChange,\n        className: \"form-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"VISA\",\n          children: \"VISA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"MasterCard\",\n          children: \"MasterCard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"AMEX\",\n          children: \"AMEX\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Diners\",\n          children: \"Diners\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 630,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Numero Carta (Masked)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"cc_number_masked\",\n        value: formData.cc_number_masked,\n        onChange: handleChange,\n        className: \"form-control\",\n        placeholder: \"**** **** **** 1234\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Scadenza (MM/AA)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"cc_expiry\",\n        value: formData.cc_expiry,\n        onChange: handleChange,\n        className: \"form-control\",\n        placeholder: \"05/26\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 602,\n    columnNumber: 5\n  }, this);\n  const renderStep9 = () => {\n    var _customers$find4, _vehicles$find5, _vehicles$find6, _vehicles$find7;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: '24px'\n        },\n        children: \"Riepilogo Finale del Contratto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          border: '1px solid #007bff',\n          borderRadius: '8px',\n          background: '#f8f9fa'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Informazioni Essenziali\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Cliente:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 12\n          }, this), \" \", (_customers$find4 = customers.find(c => c.id === parseInt(formData.customer_id))) === null || _customers$find4 === void 0 ? void 0 : _customers$find4.full_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Veicolo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 12\n          }, this), \" \", (_vehicles$find5 = vehicles.find(v => v.id === parseInt(formData.vehicle_id))) === null || _vehicles$find5 === void 0 ? void 0 : _vehicles$find5.brand, \" \", (_vehicles$find6 = vehicles.find(v => v.id === parseInt(formData.vehicle_id))) === null || _vehicles$find6 === void 0 ? void 0 : _vehicles$find6.model, \" (\", (_vehicles$find7 = vehicles.find(v => v.id === parseInt(formData.vehicle_id))) === null || _vehicles$find7 === void 0 ? void 0 : _vehicles$find7.license_plate, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Ritiro:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 12\n          }, this), \" \", new Date(formData.pickup_date).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Riconsegna Prevista:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 12\n          }, this), \" \", new Date(formData.expected_return_date).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Totale Contratto:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 12\n          }, this), \" **\", parseFloat(formData.total_amount).toFixed(2), \" \\u20AC**\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Cauzione:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 12\n          }, this), \" \", parseFloat(formData.deposit_amount).toFixed(2), \" \\u20AC\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          style: {\n            marginTop: '15px'\n          },\n          children: \"Dettagli Costi Extra:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"**Carburante a Litro:** \", formData.fuel_charge, \" \\u20AC\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"**Addebito Fuori Orario:** \", formData.after_hours_charge, \" \\u20AC\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"**Costo KM Extra (unitario):** \", formData.km_extra_cost, \" \\u20AC/km\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"**Totale Extra:** \", (parseFloat(formData.delivery_cost) + parseFloat(formData.extras_charge)).toFixed(2), \" \\u20AC\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '20px',\n          color: '#dc3545'\n        },\n        children: \"**AVVISO:** La pressione del tasto \\\"Crea Noleggio\\\" finalizzer\\xE0 il contratto e lo render\\xE0 attivo.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 5\n    }, this);\n  };\n\n  // âœ… STEP 10: CONSENSI E FIRMA (AGGIUNTO SIGNATURE PAD)\n  const renderStep10 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Consensi e Firma Contratto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 684,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Firma del Cliente\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '14px',\n          color: '#6c757d'\n        },\n        children: \"Apponi la firma con il tuo dito o stilo sul dispositivo mobile.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 688,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '1px solid #ccc',\n          borderRadius: '4px',\n          maxWidth: '400px',\n          margin: '0 auto',\n          background: '#fff'\n        },\n        children: /*#__PURE__*/_jsxDEV(SignaturePad, {\n          ref: sigCanvas,\n          penColor: \"black\",\n          canvasProps: {\n            width: 400,\n            // Larghezza fissa\n            height: 200,\n            // Altezza fissa\n            className: 'sigCanvas',\n            style: {\n              border: '1px solid transparent',\n              borderRadius: '4px',\n              touchAction: 'none' // Essenziale per un buon supporto touch\n            }\n          },\n          onEnd: handleSignatureEnd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 692,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          marginTop: '10px',\n          gap: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleSignatureClear,\n          className: \"btn btn-sm btn-outline-danger\",\n          children: \"Cancella Firma\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 11\n        }, this), formData.customer_signature && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: '#1a4d2e',\n            fontSize: '14px',\n            lineHeight: '30px'\n          },\n          children: \"\\u2705 Firma acquisita\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 9\n      }, this), !formData.customer_signature && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#dc3545',\n          textAlign: 'center',\n          marginTop: '10px'\n        },\n        children: \"*Firma obbligatoria per procedere.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 733,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Dichiarazioni e Consensi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 739,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group form-check\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"contract_signed\",\n        name: \"contract_signed\",\n        checked: formData.contract_signed,\n        onChange: handleChange,\n        className: \"form-check-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"contract_signed\",\n        children: \"Dichiaro di aver letto e accettato integralmente il contratto di noleggio e le condizioni generali.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 749,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 740,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group form-check\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"privacy_consent\",\n        name: \"privacy_consent\",\n        checked: formData.privacy_consent,\n        onChange: handleChange,\n        className: \"form-check-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"privacy_consent\",\n        children: \"Acconsento al trattamento dei dati personali (OBBLIGATORIO).\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 763,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 754,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group form-check\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"marketing_consent\",\n        name: \"marketing_consent\",\n        checked: formData.marketing_consent,\n        onChange: handleChange,\n        className: \"form-check-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"marketing_consent\",\n        children: \"Acconsento a ricevere comunicazioni promozionali e di marketing.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 777,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 683,\n    columnNumber: 5\n  }, this);\n  const renderStep11 = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginBottom: '24px'\n      },\n      children: \"Foto Iniziali del Veicolo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 786,\n      columnNumber: 7\n    }, this), formData.rental_id ? /*#__PURE__*/_jsxDEV(PhotoUpload, {\n      rentalId: formData.rental_id,\n      photoType: \"pickup\"\n      // Funzione per aggiornare la lista delle foto, se necessario\n      ,\n      onPhotosChange: photos => console.log('Pickup photos updated:', photos)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 789,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-warning\",\n      children: \"Noleggio non ancora creato. Torna indietro e premi \\\"Crea Noleggio\\\".\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '20px',\n        color: '#6c757d'\n      },\n      children: \"Carica qui le foto che documentano lo stato del veicolo al momento del ritiro.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 785,\n    columnNumber: 5\n  }, this);\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 1:\n        return renderStep1();\n      case 2:\n        return renderStep2();\n      case 3:\n        return renderStep3();\n      case 4:\n        return renderStep4();\n      case 5:\n        return renderStep5();\n      case 6:\n        return renderStep6();\n      case 7:\n        return renderStep7();\n      case 8:\n        return renderStep8();\n      case 9:\n        return renderStep9();\n      case 10:\n        return renderStep10();\n      case 11:\n        return renderStep11();\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Step non trovato\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 821,\n          columnNumber: 23\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      paddingTop: '30px'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-10\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header bg-primary text-white\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mb-0\",\n              children: \"Nuovo Contratto di Noleggio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 831,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 830,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: '30px',\n                overflowX: 'auto',\n                paddingBottom: '10px'\n              },\n              children: steps.map(step => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  textAlign: 'center',\n                  minWidth: '100px',\n                  cursor: 'pointer',\n                  opacity: currentStep === step.num ? 1 : 0.6,\n                  borderBottom: currentStep === step.num ? '3px solid #007bff' : '3px solid transparent',\n                  paddingBottom: '5px'\n                },\n                onClick: () => setCurrentStep(step.num),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'inline-flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    width: '30px',\n                    height: '30px',\n                    borderRadius: '50%',\n                    background: currentStep >= step.num ? '#007bff' : '#ccc',\n                    color: 'white',\n                    marginBottom: '5px'\n                  },\n                  children: step.icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 856,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '12px',\n                    fontWeight: 'bold',\n                    color: currentStep >= step.num ? '#007bff' : '#6c757d'\n                  },\n                  children: step.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 869,\n                  columnNumber: 21\n                }, this)]\n              }, step.num, true, {\n                fileName: _jsxFileName,\n                lineNumber: 844,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 836,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                minHeight: '400px',\n                padding: '20px',\n                border: '1px solid #eee',\n                borderRadius: '4px'\n              },\n              children: renderStepContent()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 877,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 834,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-footer\",\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              padding: '15px 20px',\n              backgroundColor: '#f8f9fa'\n            },\n            children: [currentStep > 1 && currentStep < 11 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePrevious,\n              className: \"btn btn-secondary\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 897,\n                columnNumber: 19\n              }, this), \"Indietro\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 17\n            }, this), currentStep < 10 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNext,\n              className: \"btn btn-primary\",\n              style: {\n                marginLeft: currentStep > 1 ? '' : 'auto'\n              },\n              children: [\"Avanti\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 909,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 903,\n              columnNumber: 17\n            }, this), currentStep === 10 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSubmit,\n              className: \"btn btn-success\",\n              disabled: loading || !formData.contract_signed || !formData.privacy_consent || !formData.customer_signature,\n              style: {\n                marginLeft: currentStep > 1 ? 'auto' : 'auto'\n              },\n              children: loading ? 'Creazione...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 922,\n                  columnNumber: 23\n                }, this), \"Crea Noleggio\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 914,\n              columnNumber: 17\n            }, this), currentStep === 11 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleFinish,\n              className: \"btn btn-success\",\n              style: {\n                marginLeft: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 935,\n                columnNumber: 19\n              }, this), \"Completa\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 930,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 883,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 829,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 828,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 827,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 826,\n    columnNumber: 5\n  }, this);\n};\n_s2(NewRental, \"DnOkqjUJekKZLn2ayRkeSmGEGxE=\", false, function () {\n  return [useNavigate];\n});\n_c2 = NewRental;\nexport default NewRental;\nvar _c, _c2;\n$RefreshReg$(_c, \"SignaturePad\");\n$RefreshReg$(_c2, \"NewRental\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","rentalsAPI","customersAPI","vehiclesAPI","toast","PhotoUpload","ArrowLeft","ArrowRight","Save","User","Car","Calendar","DollarSign","CreditCard","Shield","Camera","CheckCircle","UserPlus","FileText","jsxDEV","_jsxDEV","Fragment","_Fragment","SignaturePad","ref","penColor","canvasProps","onEnd","_s","useImperativeHandle","clear","console","log","isEmpty","getTrimmedCanvas","toDataURL","style","backgroundColor","onMouseUp","onTouchEnd","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","NewRental","_s2","navigate","currentStep","setCurrentStep","loading","setLoading","customers","setCustomers","vehicles","setVehicles","sigCanvas","formData","setFormData","customer_id","vehicle_id","pickup_date","Date","toISOString","slice","expected_return_date","pickup_location","pickup_fuel_level","pickup_km","pickup_damages","pickup_notes","additional_driver_name","additional_driver_birth_place","additional_driver_birth_date","additional_driver_license","additional_driver_license_issued_by","additional_driver_license_issue_date","additional_driver_license_expiry","daily_rate","deposit_amount","total_days","km_included","delivery_cost","fuel_charge","after_hours_charge","km_extra_cost","extras_charge","extra_km_charge","franchise_charge","discount","subtotal","total_amount","franchise_theft","franchise_damage","franchise_rca","payment_method","deposit_method","cc_holder_name","cc_type","cc_number_masked","cc_expiry","contract_signed","privacy_consent","marketing_consent","customer_signature","rental_id","loadInitialData","_vehiclesRes$data","_vehiclesRes$data$dat","customersRes","vehiclesRes","Promise","all","getAll","data","fetchedVehicles","Array","isArray","length","error","initialPickup","initialReturn","getTime","prev","response","handleChange","e","name","value","type","checked","target","handleSignatureClear","current","handleSignatureEnd","validateStep","step","handleNext","handlePrevious","handleSubmit","rentalData","parseFloat","parseInt","create","newRentalId","id","success","_error$response","_error$response$data","message","handleFinish","steps","num","icon","size","renderStep1","_customers$find","_customers$find2","_customers$find3","marginBottom","onChange","className","required","map","c","full_name","tax_code","find","marginTop","padding","border","borderRadius","email","phone","renderStep2","_vehicles$find","_vehicles$find2","_vehicles$find3","_vehicles$find4","v","brand","model","license_plate","category_name","current_km","renderStep3","min","max","renderStep4","renderStep5","renderStep6","background","renderStep7","fontSize","color","renderStep8","placeholder","renderStep9","_customers$find4","_vehicles$find5","_vehicles$find6","_vehicles$find7","toLocaleString","toFixed","renderStep10","maxWidth","margin","width","height","touchAction","display","justifyContent","gap","onClick","lineHeight","textAlign","htmlFor","renderStep11","rentalId","photoType","onPhotosChange","photos","renderStepContent","paddingTop","overflowX","paddingBottom","minWidth","cursor","opacity","borderBottom","alignItems","fontWeight","minHeight","marginLeft","disabled","_c2","$RefreshReg$"],"sources":["D:/Bncrentcar/frontend/src/components/NewRental.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\r\nimport toast from 'react-hot-toast';\r\nimport PhotoUpload from './PhotoUpload';\r\nimport {\r\n  ArrowLeft,\r\n  ArrowRight,\r\n  Save,\r\n  User,\r\n  Car,\r\n  Calendar,\r\n  DollarSign,\r\n  CreditCard,\r\n  Shield,\r\n  Camera,\r\n  CheckCircle,\r\n  UserPlus,\r\n  FileText // âœ… CORREZIONE: Importa FileText\r\n} from 'lucide-react';\r\n\r\n// --- INIZIO: Implementazione Mock SignaturePad ---\r\n// NOTA: Per un funzionamento reale su mobile, DEVI installare e utilizzare una libreria \r\n// come 'react-signature-canvas' e decommentare la riga di importazione.\r\nconst SignaturePad = ({ ref, penColor, canvasProps, onEnd }) => {\r\n    // Implementazione minima per non interrompere il codice.\r\n    React.useImperativeHandle(ref, () => ({\r\n        clear: () => console.log('Signature cleared (simulation)'),\r\n        isEmpty: () => false, \r\n        getTrimmedCanvas: () => ({ toDataURL: () => 'data:image/png;base64,SIMULATED_SIGNATURE' }),\r\n    }));\r\n    \r\n    // Usa un elemento canvas standard come placeholder\r\n    return (\r\n        <canvas {...canvasProps} style={{...canvasProps.style, backgroundColor: '#f5f5f5'}} \r\n            onMouseUp={onEnd} onTouchEnd={onEnd} \r\n        >\r\n            Disegna qui (Solo Placeholder: installa `react-signature-canvas`)\r\n        </canvas>\r\n    );\r\n};\r\n// --- FINE: Implementazione Mock SignaturePad ---\r\n\r\nconst NewRental = () => {\r\n  const navigate = useNavigate();\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const [customers, setCustomers] = useState([]);\r\n  const [vehicles, setVehicles] = useState([]);\r\n  \r\n  // Riferimento al canvas per la firma\r\n  const sigCanvas = useRef({}); \r\n  \r\n  // âœ… STATO COMPLETO CON VALORI DI DEFAULT E FIRMA\r\n  const [formData, setFormData] = useState({\r\n    // Step 1: Cliente\r\n    customer_id: '',\r\n    \r\n    // Step 2: Veicolo\r\n    vehicle_id: '',\r\n    \r\n    // Step 3: Date e Dettagli Noleggio\r\n    pickup_date: new Date().toISOString().slice(0, 16), // Data/ora attuali\r\n    expected_return_date: '', // Da calcolare o inserire\r\n    pickup_location: 'BNC Energy Rent Car',\r\n    pickup_fuel_level: '100', // 100%\r\n    pickup_km: '',\r\n    pickup_damages: 'Nessun danno',\r\n    pickup_notes: '',\r\n\r\n    // Step 4: Conducente Aggiuntivo\r\n    additional_driver_name: '',\r\n    additional_driver_birth_place: '',\r\n    additional_driver_birth_date: '',\r\n    additional_driver_license: '',\r\n    additional_driver_license_issued_by: '',\r\n    additional_driver_license_issue_date: '',\r\n    additional_driver_license_expiry: '',\r\n\r\n    // Step 5: Tariffe e Costi\r\n    daily_rate: '',\r\n    deposit_amount: '0', // Cauzione\r\n    total_days: 1,\r\n    km_included: 'Illimitati',\r\n    \r\n    // âœ… VALORI DI DEFAULT RICHIESTI\r\n    delivery_cost: '0', \r\n    fuel_charge: '2.50', // Carburante a litro\r\n    after_hours_charge: '20.00', // Addebito fuori orario\r\n    km_extra_cost: '0.56', // Costo unitario KM extra\r\n    extras_charge: '0', // Costo extra (seggiolini, navigatore, ecc.)\r\n\r\n    // Step 6: Finanziario\r\n    extra_km_charge: '0', // Totale extra km\r\n    franchise_charge: '0', // Coperture aggiuntive\r\n    discount: '0',\r\n    subtotal: 0,\r\n    total_amount: 0,\r\n\r\n    // Step 7: Coperture Assicurative\r\n    franchise_theft: '0',\r\n    franchise_damage: '0',\r\n    franchise_rca: '0',\r\n    \r\n    // Step 8: Pagamento\r\n    payment_method: 'Contanti', \r\n    deposit_method: 'Contanti',\r\n    cc_holder_name: '',\r\n    cc_type: 'VISA',\r\n    cc_number_masked: '',\r\n    cc_expiry: '',\r\n    \r\n    // Step 9: Riepilogo Dati (Nessun campo in questo step)\r\n    \r\n    // Step 10: Consensi e Firma\r\n    contract_signed: false,\r\n    privacy_consent: false,\r\n    marketing_consent: false,\r\n    customer_signature: '', // âœ… NUOVO CAMPO\r\n    \r\n    // Step 11: Foto\r\n    rental_id: null,\r\n  });\r\n\r\n  // Funzioni di calcolo (omesse per brevitÃ , ma essenziali in un'app reale)\r\n  // ...\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  const loadInitialData = async () => {\r\n    try {\r\n      // Carica clienti e veicoli\r\n      const [customersRes, vehiclesRes] = await Promise.all([\r\n        customersAPI.getAll(),\r\n        // ðŸš¨ MODIFICA PER DIAGNOSI: Rimosso { available_only: true }\r\n        // Se ora i veicoli compaiono, il problema Ã¨ che NESSUN veicolo ha status='available' nel DB.\r\n        vehiclesAPI.getAll({}) \r\n      ]);\r\n      \r\n      setCustomers(customersRes.data.data);\r\n\r\n      // âœ… CONTROLLO ROBUSTO E LOG DI DIAGNOSI\r\n      const fetchedVehicles = vehiclesRes.data?.data?.vehicles;\r\n      \r\n      if (Array.isArray(fetchedVehicles)) {\r\n        setVehicles(fetchedVehicles);\r\n        console.log(`âœ… Caricati ${fetchedVehicles.length} veicoli. Status risposta: 200 OK.`);\r\n      } else {\r\n        // Se non Ã¨ un array, logga l'intera risposta per debugging\r\n        console.error(\"âŒ Errore nel formato dati veicoli. Risposta API:\", vehiclesRes);\r\n        setVehicles([]); // Assicura che sia un array vuoto per evitare il 'map' error\r\n        toast.error('Errore nel formato dati veicoli ricevuti dal server.');\r\n      }\r\n      \r\n      // Imposta la data di riconsegna prevista 24h dopo il ritiro\r\n      const initialPickup = new Date();\r\n      const initialReturn = new Date(initialPickup.getTime() + 24 * 60 * 60 * 1000);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        pickup_date: initialPickup.toISOString().slice(0, 16),\r\n        expected_return_date: initialReturn.toISOString().slice(0, 16)\r\n      }));\r\n      \r\n    } catch (error) {\r\n      console.error('Errore nel caricamento dati iniziali (API call failed):', error.response || error);\r\n      toast.error('Errore nel caricamento dati iniziali. Controlla la console del browser per i dettagli.');\r\n    }\r\n  };\r\n  \r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n  };\r\n\r\n  // âœ… NUOVE FUNZIONI PER GESTIRE LA FIRMA\r\n  const handleSignatureClear = () => {\r\n    sigCanvas.current.clear();\r\n    setFormData(prev => ({ ...prev, customer_signature: '' }));\r\n  };\r\n\r\n  const handleSignatureEnd = () => {\r\n    // Simula l'acquisizione della firma Base64\r\n    if (sigCanvas.current.isEmpty()) {\r\n      setFormData(prev => ({ ...prev, customer_signature: '' }));\r\n    } else {\r\n      setFormData(prev => ({ \r\n        ...prev, \r\n        customer_signature: sigCanvas.current.getTrimmedCanvas().toDataURL('image/png') \r\n      }));\r\n    }\r\n  };\r\n\r\n\r\n  // âœ… LOGICA DI VALIDAZIONE AGGIORNATA PER FIRMA OBBLIGATORIA\r\n  const validateStep = (step) => {\r\n    switch (step) {\r\n      case 1: // Cliente\r\n        if (!formData.customer_id) {\r\n          toast.error('Seleziona un cliente.');\r\n          return false;\r\n        }\r\n        break;\r\n      case 2: // Veicolo\r\n        if (!formData.vehicle_id) {\r\n          toast.error('Seleziona un veicolo.');\r\n          return false;\r\n        }\r\n        break;\r\n      case 3: // Date\r\n        if (!formData.pickup_date || !formData.expected_return_date) {\r\n          toast.error('Date di ritiro e riconsegna sono obbligatorie.');\r\n          return false;\r\n        }\r\n        // Aggiungere logica per controllare se data riconsegna Ã¨ >= data ritiro\r\n        break;\r\n      case 10: // Consensi e Firma\r\n        if (!formData.contract_signed || !formData.privacy_consent) {\r\n          toast.error('Devi accettare il contratto e l\\'informativa sulla privacy.');\r\n          return false;\r\n        }\r\n        if (!formData.customer_signature) { // NUOVA VALIDAZIONE\r\n          toast.error('La firma del cliente Ã¨ obbligatoria.');\r\n          return false;\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (validateStep(currentStep)) {\r\n      setCurrentStep(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    setCurrentStep(prev => prev - 1);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!validateStep(10)) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const rentalData = {\r\n        ...formData,\r\n        // Conversione esplicita dei campi numerici al server\r\n        daily_rate: parseFloat(formData.daily_rate) || 0,\r\n        deposit_amount: parseFloat(formData.deposit_amount) || 0,\r\n        total_days: parseInt(formData.total_days) || 1,\r\n        delivery_cost: parseFloat(formData.delivery_cost) || 0,\r\n        fuel_charge: parseFloat(formData.fuel_charge) || 0,\r\n        after_hours_charge: parseFloat(formData.after_hours_charge) || 0,\r\n        km_extra_cost: parseFloat(formData.km_extra_cost) || 0, // Nuovo campo inviato\r\n        extras_charge: parseFloat(formData.extras_charge) || 0,\r\n        extra_km_charge: parseFloat(formData.extra_km_charge) || 0,\r\n        franchise_charge: parseFloat(formData.franchise_charge) || 0,\r\n        discount: parseFloat(formData.discount) || 0,\r\n        subtotal: formData.subtotal,\r\n        total_amount: formData.total_amount,\r\n        franchise_theft: parseFloat(formData.franchise_theft) || 0,\r\n        franchise_damage: parseFloat(formData.franchise_damage) || 0,\r\n        franchise_rca: parseFloat(formData.franchise_rca) || 0,\r\n        \r\n        // Firma Base64\r\n        customer_signature: formData.customer_signature, \r\n      };\r\n\r\n      const response = await rentalsAPI.create(rentalData);\r\n      const newRentalId = response.data.data.id;\r\n      \r\n      setFormData(prev => ({ ...prev, rental_id: newRentalId }));\r\n      setCurrentStep(11); // Passa allo step Foto\r\n      toast.success('Noleggio creato con successo! Continua con le foto.');\r\n      \r\n    } catch (error) {\r\n      console.error('Errore creazione noleggio:', error);\r\n      toast.error(error.response?.data?.message || 'Errore durante la creazione del noleggio.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFinish = () => {\r\n    if (formData.rental_id) {\r\n      navigate(`/rentals/${formData.rental_id}`);\r\n    } else {\r\n      navigate('/rentals');\r\n    }\r\n  };\r\n\r\n  const steps = [\r\n    { num: 1, name: 'Cliente', icon: <User size={20} /> },\r\n    { num: 2, name: 'Veicolo', icon: <Car size={20} /> },\r\n    { num: 3, name: 'Date/Ritiro', icon: <Calendar size={20} /> },\r\n    { num: 4, name: 'Conducente Add.', icon: <UserPlus size={20} /> },\r\n    { num: 5, name: 'Tariffe/Costi', icon: <DollarSign size={20} /> },\r\n    { num: 6, name: 'Riepilogo Costi', icon: <DollarSign size={20} /> },\r\n    { num: 7, name: 'Coperture', icon: <Shield size={20} /> },\r\n    { num: 8, name: 'Pagamento', icon: <CreditCard size={20} /> },\r\n    { num: 9, name: 'Riepilogo', icon: <FileText size={20} /> }, // L'errore era qui\r\n    { num: 10, name: 'Firma/Consensi', icon: <CheckCircle size={20} /> },\r\n    { num: 11, name: 'Foto Iniziali', icon: <Camera size={20} /> },\r\n  ];\r\n\r\n  const renderStep1 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Selezione Cliente</h3>\r\n      <select\r\n        name=\"customer_id\"\r\n        value={formData.customer_id}\r\n        onChange={handleChange}\r\n        className=\"form-control\"\r\n        required\r\n      >\r\n        <option value=\"\">Seleziona un Cliente</option>\r\n        {/* âœ… CORREZIONE: Usa customers?.map per prevenire errori se 'customers' Ã¨ undefined */}\r\n        {customers?.map(c => (\r\n          <option key={c.id} value={c.id}>{c.full_name} ({c.tax_code})</option>\r\n        ))}\r\n      </select>\r\n      {formData.customer_id && customers?.find(c => c.id === parseInt(formData.customer_id)) && (\r\n        <div style={{ marginTop: '20px', padding: '15px', border: '1px solid #ccc', borderRadius: '4px' }}>\r\n          <h4>Dettagli Cliente</h4>\r\n          <p><strong>Nome:</strong> {customers.find(c => c.id === parseInt(formData.customer_id))?.full_name}</p>\r\n          <p><strong>Email:</strong> {customers.find(c => c.id === parseInt(formData.customer_id))?.email}</p>\r\n          <p><strong>Telefono:</strong> {customers.find(c => c.id === parseInt(formData.customer_id))?.phone}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderStep2 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Selezione Veicolo</h3>\r\n      <select\r\n        name=\"vehicle_id\"\r\n        value={formData.vehicle_id}\r\n        onChange={handleChange}\r\n        className=\"form-control\"\r\n        required\r\n      >\r\n        <option value=\"\">Seleziona un Veicolo</option>\r\n        {/* âœ… CORREZIONE: Usa vehicles?.map per prevenire errori se 'vehicles' Ã¨ undefined */}\r\n        {vehicles?.map(v => (\r\n          <option key={v.id} value={v.id}>\r\n            {v.brand} {v.model} ({v.license_plate}) - {v.category_name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {formData.vehicle_id && vehicles?.find(v => v.id === parseInt(formData.vehicle_id)) && (\r\n        <div style={{ marginTop: '20px', padding: '15px', border: '1px solid #ccc', borderRadius: '4px' }}>\r\n          <h4>Dettagli Veicolo</h4>\r\n          <p><strong>Targa:</strong> {vehicles.find(v => v.id === parseInt(formData.vehicle_id))?.license_plate}</p>\r\n          <p><strong>Categoria:</strong> {vehicles.find(v => v.id === parseInt(formData.vehicle_id))?.category_name}</p>\r\n          <p><strong>Km Attuali:</strong> {vehicles.find(v => v.id === parseInt(formData.vehicle_id))?.current_km} km</p>\r\n          <p><strong>Tariffa Base:</strong> {vehicles.find(v => v.id === parseInt(formData.vehicle_id))?.daily_rate} â‚¬/giorno</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderStep3 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Dettagli Ritiro e Riconsegna</h3>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Data/Ora Ritiro Effettivo</label>\r\n        <input \r\n          type=\"datetime-local\" \r\n          name=\"pickup_date\" \r\n          value={formData.pickup_date} \r\n          onChange={handleChange} \r\n          className=\"form-control\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Data/Ora Riconsegna Prevista</label>\r\n        <input \r\n          type=\"datetime-local\" \r\n          name=\"expected_return_date\" \r\n          value={formData.expected_return_date} \r\n          onChange={handleChange} \r\n          className=\"form-control\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Luogo di Ritiro</label>\r\n        <input \r\n          type=\"text\" \r\n          name=\"pickup_location\" \r\n          value={formData.pickup_location} \r\n          onChange={handleChange} \r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Livello Carburante al Ritiro (%)</label>\r\n        <input \r\n          type=\"number\" \r\n          name=\"pickup_fuel_level\" \r\n          value={formData.pickup_fuel_level} \r\n          onChange={handleChange} \r\n          className=\"form-control\"\r\n          min=\"0\"\r\n          max=\"100\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Km al Ritiro (OBBLIGATORIO)</label>\r\n        <input \r\n          type=\"number\" \r\n          name=\"pickup_km\" \r\n          value={formData.pickup_km} \r\n          onChange={handleChange} \r\n          className=\"form-control\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Danni Visibili al Ritiro</label>\r\n        <textarea \r\n          name=\"pickup_damages\" \r\n          value={formData.pickup_damages} \r\n          onChange={handleChange} \r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Note di Ritiro</label>\r\n        <textarea \r\n          name=\"pickup_notes\" \r\n          value={formData.pickup_notes} \r\n          onChange={handleChange} \r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n  \r\n  const renderStep4 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Conducente Aggiuntivo (Opzionale)</h3>\r\n      <div className=\"form-group\">\r\n        <label>Nome Completo</label>\r\n        <input type=\"text\" name=\"additional_driver_name\" value={formData.additional_driver_name} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Luogo di Nascita</label>\r\n        <input type=\"text\" name=\"additional_driver_birth_place\" value={formData.additional_driver_birth_place} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Data di Nascita</label>\r\n        <input type=\"date\" name=\"additional_driver_birth_date\" value={formData.additional_driver_birth_date} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Numero Patente</label>\r\n        <input type=\"text\" name=\"additional_driver_license\" value={formData.additional_driver_license} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Rilasciata da</label>\r\n        <input type=\"text\" name=\"additional_driver_license_issued_by\" value={formData.additional_driver_license_issued_by} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Data Rilascio Patente</label>\r\n        <input type=\"date\" name=\"additional_driver_license_issue_date\" value={formData.additional_driver_license_issue_date} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Data Scadenza Patente</label>\r\n        <input type=\"date\" name=\"additional_driver_license_expiry\" value={formData.additional_driver_license_expiry} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderStep5 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Tariffe e Costi Base</h3>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Tariffa Giornaliera (â‚¬)</label>\r\n        <input type=\"number\" name=\"daily_rate\" value={formData.daily_rate} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Giorni di Noleggio (Totali)</label>\r\n        <input type=\"number\" name=\"total_days\" value={formData.total_days} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Cauzione (â‚¬)</label>\r\n        <input type=\"number\" name=\"deposit_amount\" value={formData.deposit_amount} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label>Km Inclusi (es. Illimitati o 100km/giorno)</label>\r\n        <input type=\"text\" name=\"km_included\" value={formData.km_included} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n\r\n      <h4 style={{ marginTop: '30px' }}>Costi Aggiuntivi Preimpostati</h4>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Costo Carburante (a litro - default: **2.50** â‚¬)</label>\r\n        <input type=\"number\" name=\"fuel_charge\" value={formData.fuel_charge} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Addebito Fuori Orario (default: **20.00** â‚¬)</label>\r\n        <input type=\"number\" name=\"after_hours_charge\" value={formData.after_hours_charge} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Costo KM Extra (a km - default: **0.56** â‚¬)</label>\r\n        <input type=\"number\" name=\"km_extra_cost\" value={formData.km_extra_cost} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Costo Consegna/Ritiro (â‚¬)</label>\r\n        <input type=\"number\" name=\"delivery_cost\" value={formData.delivery_cost} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Costi Extra Generici (es. Seggiolino, Navigatore)</label>\r\n        <input type=\"number\" name=\"extras_charge\" value={formData.extras_charge} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n\r\n  const renderStep6 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Riepilogo Costi e Totali</h3>\r\n      \r\n      {/* Questi campi sono teoricamente calcolati, ma permettiamo la modifica manuale */}\r\n      <div className=\"form-group\">\r\n        <label>Addebito KM Extra Totale (â‚¬)</label>\r\n        <input type=\"number\" name=\"extra_km_charge\" value={formData.extra_km_charge} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Addebito Coperture Aggiuntive Totale (â‚¬)</label>\r\n        <input type=\"number\" name=\"franchise_charge\" value={formData.franchise_charge} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Sconto Applicato (â‚¬)</label>\r\n        <input type=\"number\" name=\"discount\" value={formData.discount} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n\r\n      <div style={{ marginTop: '30px', padding: '15px', border: '1px solid #007bff', borderRadius: '4px', background: '#e9f5ff' }}>\r\n        <h4>Totali (Calcolati o Inseriti Manualmente)</h4>\r\n        <div className=\"form-group\">\r\n          <label>Subtotale Noleggio (â‚¬)</label>\r\n          <input type=\"number\" name=\"subtotal\" value={formData.subtotal} onChange={handleChange} className=\"form-control\" />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Totale Contratto (â‚¬)</label>\r\n          <input type=\"number\" name=\"total_amount\" value={formData.total_amount} onChange={handleChange} className=\"form-control\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderStep7 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Coperture Assicurative (Franchigie)</h3>\r\n      <p style={{ fontSize: '14px', color: '#6c757d' }}>\r\n        Valori franchigie in caso di sinistro/furto/incendio.\r\n      </p>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Franchigia Furto/Incendio (â‚¬)</label>\r\n        <input type=\"number\" name=\"franchise_theft\" value={formData.franchise_theft} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Franchigia Danni (â‚¬)</label>\r\n        <input type=\"number\" name=\"franchise_damage\" value={formData.franchise_damage} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Massimale RCA (â‚¬)</label>\r\n        <input type=\"number\" name=\"franchise_rca\" value={formData.franchise_rca} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderStep8 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Dettagli Pagamento</h3>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Metodo Pagamento Totale</label>\r\n        <select name=\"payment_method\" value={formData.payment_method} onChange={handleChange} className=\"form-control\">\r\n          <option value=\"Contanti\">Contanti</option>\r\n          <option value=\"Carta di Credito\">Carta di Credito</option>\r\n          <option value=\"Bonifico\">Bonifico</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Metodo Pagamento Cauzione</label>\r\n        <select name=\"deposit_method\" value={formData.deposit_method} onChange={handleChange} className=\"form-control\">\r\n          <option value=\"Contanti\">Contanti</option>\r\n          <option value=\"Carta di Credito\">Carta di Credito</option>\r\n          <option value=\"Assegno\">Assegno</option>\r\n        </select>\r\n      </div>\r\n      \r\n      <h4 style={{ marginTop: '30px' }}>Dati Carta di Credito (Se usata)</h4>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Nome Intestatario CC</label>\r\n        <input type=\"text\" name=\"cc_holder_name\" value={formData.cc_holder_name} onChange={handleChange} className=\"form-control\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Tipo Carta</label>\r\n        <select name=\"cc_type\" value={formData.cc_type} onChange={handleChange} className=\"form-control\">\r\n          <option value=\"VISA\">VISA</option>\r\n          <option value=\"MasterCard\">MasterCard</option>\r\n          <option value=\"AMEX\">AMEX</option>\r\n          <option value=\"Diners\">Diners</option>\r\n        </select>\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Numero Carta (Masked)</label>\r\n        <input type=\"text\" name=\"cc_number_masked\" value={formData.cc_number_masked} onChange={handleChange} className=\"form-control\" placeholder=\"**** **** **** 1234\" />\r\n      </div>\r\n      \r\n      <div className=\"form-group\">\r\n        <label>Scadenza (MM/AA)</label>\r\n        <input type=\"text\" name=\"cc_expiry\" value={formData.cc_expiry} onChange={handleChange} className=\"form-control\" placeholder=\"05/26\" />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n\r\n  const renderStep9 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Riepilogo Finale del Contratto</h3>\r\n      \r\n      <div style={{ padding: '20px', border: '1px solid #007bff', borderRadius: '8px', background: '#f8f9fa' }}>\r\n        <h4>Informazioni Essenziali</h4>\r\n        <p><strong>Cliente:</strong> {customers.find(c => c.id === parseInt(formData.customer_id))?.full_name}</p>\r\n        <p><strong>Veicolo:</strong> {vehicles.find(v => v.id === parseInt(formData.vehicle_id))?.brand} {vehicles.find(v => v.id === parseInt(formData.vehicle_id))?.model} ({vehicles.find(v => v.id === parseInt(formData.vehicle_id))?.license_plate})</p>\r\n        <p><strong>Ritiro:</strong> {new Date(formData.pickup_date).toLocaleString()}</p>\r\n        <p><strong>Riconsegna Prevista:</strong> {new Date(formData.expected_return_date).toLocaleString()}</p>\r\n        <p><strong>Totale Contratto:</strong> **{parseFloat(formData.total_amount).toFixed(2)} â‚¬**</p>\r\n        <p><strong>Cauzione:</strong> {parseFloat(formData.deposit_amount).toFixed(2)} â‚¬</p>\r\n        \r\n        <h5 style={{ marginTop: '15px' }}>Dettagli Costi Extra:</h5>\r\n        <ul>\r\n          <li>**Carburante a Litro:** {formData.fuel_charge} â‚¬</li>\r\n          <li>**Addebito Fuori Orario:** {formData.after_hours_charge} â‚¬</li>\r\n          <li>**Costo KM Extra (unitario):** {formData.km_extra_cost} â‚¬/km</li>\r\n          <li>**Totale Extra:** {(parseFloat(formData.delivery_cost) + parseFloat(formData.extras_charge)).toFixed(2)} â‚¬</li>\r\n        </ul>\r\n      </div>\r\n      \r\n      <p style={{ marginTop: '20px', color: '#dc3545' }}>\r\n        **AVVISO:** La pressione del tasto \"Crea Noleggio\" finalizzerÃ  il contratto e lo renderÃ  attivo.\r\n      </p>\r\n    </div>\r\n  );\r\n\r\n  // âœ… STEP 10: CONSENSI E FIRMA (AGGIUNTO SIGNATURE PAD)\r\n  const renderStep10 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Consensi e Firma Contratto</h3>\r\n      \r\n      <div style={{ marginBottom: '30px' }}>\r\n        <h4>Firma del Cliente</h4>\r\n        <p style={{ fontSize: '14px', color: '#6c757d' }}>\r\n          Apponi la firma con il tuo dito o stilo sul dispositivo mobile.\r\n        </p>\r\n        \r\n        <div style={{ \r\n          border: '1px solid #ccc', \r\n          borderRadius: '4px', \r\n          maxWidth: '400px', \r\n          margin: '0 auto',\r\n          background: '#fff'\r\n        }}>\r\n          {/* Componente SignaturePad effettivo */}\r\n          <SignaturePad \r\n            ref={sigCanvas} \r\n            penColor='black' \r\n            canvasProps={{ \r\n              width: 400, // Larghezza fissa\r\n              height: 200, // Altezza fissa\r\n              className: 'sigCanvas',\r\n              style: { \r\n                border: '1px solid transparent', \r\n                borderRadius: '4px',\r\n                touchAction: 'none' // Essenziale per un buon supporto touch\r\n              } \r\n            }}\r\n            onEnd={handleSignatureEnd}\r\n          />\r\n        </div>\r\n        \r\n        <div style={{ display: 'flex', justifyContent: 'center', marginTop: '10px', gap: '10px' }}>\r\n          <button \r\n            type=\"button\" \r\n            onClick={handleSignatureClear} \r\n            className=\"btn btn-sm btn-outline-danger\"\r\n          >\r\n            Cancella Firma\r\n          </button>\r\n          {formData.customer_signature && (\r\n            <span style={{ color: '#1a4d2e', fontSize: '14px', lineHeight: '30px' }}>\r\n              âœ… Firma acquisita\r\n            </span>\r\n          )}\r\n        </div>\r\n        \r\n        {!formData.customer_signature && (\r\n            <p style={{ color: '#dc3545', textAlign: 'center', marginTop: '10px' }}>\r\n                *Firma obbligatoria per procedere.\r\n            </p>\r\n        )}\r\n      </div>\r\n\r\n      <h4>Dichiarazioni e Consensi</h4>\r\n      <div className=\"form-group form-check\">\r\n        <input \r\n          type=\"checkbox\" \r\n          id=\"contract_signed\"\r\n          name=\"contract_signed\" \r\n          checked={formData.contract_signed} \r\n          onChange={handleChange} \r\n          className=\"form-check-input\"\r\n        />\r\n        <label className=\"form-check-label\" htmlFor=\"contract_signed\">\r\n          Dichiaro di aver letto e accettato integralmente il contratto di noleggio e le condizioni generali.\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"form-group form-check\">\r\n        <input \r\n          type=\"checkbox\" \r\n          id=\"privacy_consent\"\r\n          name=\"privacy_consent\" \r\n          checked={formData.privacy_consent} \r\n          onChange={handleChange} \r\n          className=\"form-check-input\"\r\n        />\r\n        <label className=\"form-check-label\" htmlFor=\"privacy_consent\">\r\n          Acconsento al trattamento dei dati personali (OBBLIGATORIO).\r\n        </label>\r\n      </div>\r\n      \r\n      <div className=\"form-group form-check\">\r\n        <input \r\n          type=\"checkbox\" \r\n          id=\"marketing_consent\"\r\n          name=\"marketing_consent\" \r\n          checked={formData.marketing_consent} \r\n          onChange={handleChange} \r\n          className=\"form-check-input\"\r\n        />\r\n        <label className=\"form-check-label\" htmlFor=\"marketing_consent\">\r\n          Acconsento a ricevere comunicazioni promozionali e di marketing.\r\n        </label>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderStep11 = () => (\r\n    <div>\r\n      <h3 style={{ marginBottom: '24px' }}>Foto Iniziali del Veicolo</h3>\r\n      \r\n      {formData.rental_id ? (\r\n        <PhotoUpload\r\n          rentalId={formData.rental_id}\r\n          photoType=\"pickup\"\r\n          // Funzione per aggiornare la lista delle foto, se necessario\r\n          onPhotosChange={(photos) => console.log('Pickup photos updated:', photos)}\r\n        />\r\n      ) : (\r\n        <div className=\"alert alert-warning\">\r\n          Noleggio non ancora creato. Torna indietro e premi \"Crea Noleggio\".\r\n        </div>\r\n      )}\r\n      \r\n      <p style={{ marginTop: '20px', color: '#6c757d' }}>\r\n        Carica qui le foto che documentano lo stato del veicolo al momento del ritiro.\r\n      </p>\r\n    </div>\r\n  );\r\n\r\n\r\n  const renderStepContent = () => {\r\n    switch (currentStep) {\r\n      case 1: return renderStep1();\r\n      case 2: return renderStep2();\r\n      case 3: return renderStep3();\r\n      case 4: return renderStep4();\r\n      case 5: return renderStep5();\r\n      case 6: return renderStep6();\r\n      case 7: return renderStep7();\r\n      case 8: return renderStep8();\r\n      case 9: return renderStep9();\r\n      case 10: return renderStep10();\r\n      case 11: return renderStep11();\r\n      default: return <div>Step non trovato</div>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\" style={{ paddingTop: '30px' }}>\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"col-lg-10\">\r\n          <div className=\"card shadow-sm\">\r\n            <div className=\"card-header bg-primary text-white\">\r\n              <h2 className=\"mb-0\">Nuovo Contratto di Noleggio</h2>\r\n            </div>\r\n            \r\n            <div className=\"card-body\">\r\n              {/* Stepper progress bar */}\r\n              <div style={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between', \r\n                marginBottom: '30px',\r\n                overflowX: 'auto',\r\n                paddingBottom: '10px'\r\n              }}>\r\n                {steps.map(step => (\r\n                  <div \r\n                    key={step.num} \r\n                    style={{ \r\n                      textAlign: 'center', \r\n                      minWidth: '100px',\r\n                      cursor: 'pointer',\r\n                      opacity: currentStep === step.num ? 1 : 0.6,\r\n                      borderBottom: currentStep === step.num ? '3px solid #007bff' : '3px solid transparent',\r\n                      paddingBottom: '5px'\r\n                    }}\r\n                    onClick={() => setCurrentStep(step.num)}\r\n                  >\r\n                    <div style={{ \r\n                      display: 'inline-flex', \r\n                      alignItems: 'center', \r\n                      justifyContent: 'center', \r\n                      width: '30px', \r\n                      height: '30px', \r\n                      borderRadius: '50%', \r\n                      background: currentStep >= step.num ? '#007bff' : '#ccc', \r\n                      color: 'white',\r\n                      marginBottom: '5px'\r\n                    }}>\r\n                      {step.icon}\r\n                    </div>\r\n                    <div style={{ fontSize: '12px', fontWeight: 'bold', color: currentStep >= step.num ? '#007bff' : '#6c757d' }}>\r\n                      {step.name}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              \r\n              {/* Contenuto dello step */}\r\n              <div style={{ minHeight: '400px', padding: '20px', border: '1px solid #eee', borderRadius: '4px' }}>\r\n                {renderStepContent()}\r\n              </div>\r\n\r\n            </div>\r\n            \r\n            <div \r\n              className=\"card-footer\" \r\n              style={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between', \r\n                padding: '15px 20px', \r\n                backgroundColor: '#f8f9fa' \r\n              }}\r\n            >\r\n              {currentStep > 1 && currentStep < 11 && (\r\n                <button\r\n                  onClick={handlePrevious}\r\n                  className=\"btn btn-secondary\"\r\n                >\r\n                  <ArrowLeft size={18} />\r\n                  Indietro\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep < 10 && (\r\n                <button\r\n                  onClick={handleNext}\r\n                  className=\"btn btn-primary\"\r\n                  style={{ marginLeft: currentStep > 1 ? '' : 'auto' }}\r\n                >\r\n                  Avanti\r\n                  <ArrowRight size={18} />\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep === 10 && (\r\n                <button\r\n                  onClick={handleSubmit}\r\n                  className=\"btn btn-success\"\r\n                  disabled={loading || !formData.contract_signed || !formData.privacy_consent || !formData.customer_signature} \r\n                  style={{ marginLeft: currentStep > 1 ? 'auto' : 'auto' }}\r\n                >\r\n                  {loading ? 'Creazione...' : (\r\n                    <>\r\n                      <Save size={18} />\r\n                      Crea Noleggio\r\n                    </>\r\n                  )}\r\n                </button>\r\n              )}\r\n              \r\n              {currentStep === 11 && (\r\n                <button\r\n                  onClick={handleFinish}\r\n                  className=\"btn btn-success\"\r\n                  style={{ marginLeft: 'auto' }}\r\n                >\r\n                  <CheckCircle size={18} />\r\n                  Completa\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewRental;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}