{"ast":null,"code":"var _jsxFileName = \"D:\\\\Bncrentcar\\\\frontend\\\\src\\\\components\\\\NewRental.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport PhotoUpload from './PhotoUpload';\nimport { ArrowLeft, ArrowRight, Save, User, Car, Calendar, Camera, CheckCircle } from 'lucide-react';\n// Importa moment per la gestione delle date se non lo hai già\nimport moment from 'moment';\n\n// Funzione di calcolo dei prezzi (necessaria per i campi NOT NULL del DB)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst calculatePricing = formData => {\n  const dailyRate = parseFloat(formData.daily_rate) || 0;\n  const pickupDate = moment(formData.pickup_date);\n  const returnDate = moment(formData.expected_return_date);\n  if (!pickupDate.isValid() || !returnDate.isValid() || pickupDate.isSameOrAfter(returnDate)) {\n    return {\n      total_days: 1,\n      subtotal: dailyRate,\n      total_amount: dailyRate\n    };\n  }\n\n  // Calcola i giorni di noleggio\n  const totalDays = returnDate.diff(pickupDate, 'days');\n\n  // Calcolo semplificato (solo canone base)\n  const subtotal = dailyRate * totalDays;\n\n  // Si assume che il totale finale sia uguale al subtotal in questa fase di stima\n  // Aggiungere qui la logica per tasse, extra, sconti, ecc.\n  const total_amount = subtotal;\n  return {\n    total_days: totalDays,\n    subtotal: subtotal,\n    total_amount: total_amount\n  };\n};\nconst NewRental = () => {\n  _s();\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [customers, setCustomers] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n  const [categories, setCategories] = useState([]);\n\n  // Ho rimosso category_id dal formData visto che non esiste nel DB rentals\n  const [formData, setFormData] = useState({\n    // Step 1: Cliente\n    customer_id: '',\n    // Step 2: Veicolo\n    vehicle_id: '',\n    // category_id: '', <--- Rimosso\n\n    // Step 3: Date e dettagli\n    pickup_date: '',\n    expected_return_date: '',\n    pickup_location: 'BNC Energy Rent Car',\n    pickup_fuel_level: '100',\n    pickup_km: '',\n    pickup_damages: '',\n    pickup_notes: '',\n    // Aggiunto per allinearsi al backend\n\n    // Step 4: Tariffe (Questi devono essere popolati/calcolati prima dell'invio)\n    daily_rate: '',\n    deposit_amount: '0'\n    // total_days, subtotal, total_amount verranno calcolati in handleSubmit\n  });\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n  const loadInitialData = async () => {\n    try {\n      // Caricamento clienti e veicoli disponibili\n      const [customersRes, vehiclesRes] = await Promise.all([customersAPI.getAll(), vehiclesAPI.getAll({\n        status: 'available'\n      })]);\n      setCustomers(customersRes.data.data.customers);\n      setVehicles(vehiclesRes.data.data.vehicles);\n    } catch (error) {\n      toast.error('Errore nel caricamento dei dati iniziali.');\n      console.error(error);\n    }\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSelectVehicle = vehicleId => {\n    const selectedVehicle = vehicles.find(v => v.id === parseInt(vehicleId));\n    if (selectedVehicle) {\n      setFormData(prev => ({\n        ...prev,\n        vehicle_id: vehicleId,\n        pickup_km: selectedVehicle.current_km.toString(),\n        daily_rate: selectedVehicle.daily_rate.toString()\n        // category_id: selectedVehicle.category_id.toString(), // Non lo usiamo nel rentals DB\n      }));\n    }\n  };\n  const handleNext = () => {\n    let isValid = true;\n    switch (currentStep) {\n      case 1:\n        // Cliente\n        if (!formData.customer_id) {\n          toast.error(\"Seleziona un cliente.\");\n          isValid = false;\n        }\n        break;\n      case 2:\n        // Veicolo\n        if (!formData.vehicle_id || !formData.pickup_km) {\n          toast.error(\"Seleziona un veicolo e inserisci il KM di ritiro.\");\n          isValid = false;\n        }\n        break;\n      case 3:\n        // Date e Dettagli\n        const pricing = calculatePricing(formData);\n        if (!formData.pickup_date || !formData.expected_return_date || pricing.total_days <= 0) {\n          toast.error(\"Le date di ritiro e riconsegna sono obbligatorie e devono essere valide.\");\n          isValid = false;\n        } else if (!formData.pickup_location || !formData.pickup_fuel_level) {\n          toast.error(\"Inserisci tutti i dettagli di ritiro.\");\n          isValid = false;\n        }\n        // Aggiorna formData con i prezzi calcolati prima di passare al riepilogo\n        setFormData(prev => ({\n          ...prev,\n          total_days: pricing.total_days.toString(),\n          subtotal: pricing.subtotal.toString(),\n          total_amount: pricing.total_amount.toString()\n        }));\n        break;\n      case 4:\n        // Riepilogo/Prezzo (Qui handleNext chiama handleSubmit)\n        // Se è l'ultimo step, gestiamo l'invio\n        return handleSubmit();\n      default:\n        break;\n    }\n    if (isValid) {\n      setCurrentStep(prev => prev + 1);\n    }\n  };\n  const handlePrev = () => {\n    setCurrentStep(prev => prev - 1);\n  };\n  const handleSubmit = async () => {\n    setLoading(true);\n\n    // Ricrea l'oggetto dati assicurandoti che i campi numerici siano numeri/stringhe valide\n    const dataToSend = {\n      ...formData,\n      // CORREZIONE: Assicurati che i campi NOT NULL siano numeri/stringhe valide\n      daily_rate: parseFloat(formData.daily_rate),\n      deposit_amount: parseFloat(formData.deposit_amount),\n      pickup_km: parseInt(formData.pickup_km),\n      total_days: parseInt(formData.total_days),\n      subtotal: parseFloat(formData.subtotal),\n      total_amount: parseFloat(formData.total_amount)\n    };\n    try {\n      // 4. CORREZIONE: Invia i dati corretti al backend\n      const response = await rentalsAPI.create(dataToSend);\n      toast.success('Noleggio creato con successo!');\n\n      // Passa al passo finale (es. caricamento foto)\n      setCurrentStep(5);\n      // Opzionalmente, salva l'ID del nuovo noleggio per il passo 5 (caricamento foto)\n      // setFormData(prev => ({ ...prev, rental_id: response.data.data.id }));\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Errore creazione noleggio:', error);\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Si è verificato un errore durante la creazione del noleggio.';\n      toast.error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFinish = () => {\n    // Naviga al dettaglio del noleggio appena creato o alla lista\n    navigate('/rentals');\n  };\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Seleziona Cliente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"customer_id\",\n              className: \"form-label\",\n              children: \"Cliente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"customer_id\",\n              name: \"customer_id\",\n              className: \"form-control\",\n              value: formData.customer_id,\n              onChange: handleInputChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Seleziona un cliente\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this), customers.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: c.id,\n                children: [c.full_name, \" (\", c.fiscal_code || c.vat_number, \")\"]\n              }, c.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this);\n      case 2:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Seleziona Veicolo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"vehicle_id\",\n              className: \"form-label\",\n              children: \"Veicolo Disponibile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"vehicle_id\",\n              name: \"vehicle_id\",\n              className: \"form-control\",\n              value: formData.vehicle_id,\n              onChange: e => handleSelectVehicle(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Seleziona un veicolo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this), vehicles.map(v => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: v.id,\n                children: [v.brand, \" \", v.model, \" (\", v.license_plate, \") - \", v.current_km, \" km\"]\n              }, v.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this), formData.vehicle_id && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"daily_rate\",\n                className: \"form-label\",\n                children: \"Tariffa Giornaliera\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"daily_rate\",\n                name: \"daily_rate\",\n                className: \"form-control\",\n                value: formData.daily_rate,\n                onChange: handleInputChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"pickup_km\",\n                className: \"form-label\",\n                children: \"KM al Ritiro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"pickup_km\",\n                name: \"pickup_km\",\n                className: \"form-control\",\n                value: formData.pickup_km,\n                onChange: handleInputChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this);\n      case 3:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Dettagli Ritiro e Riconsegna\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"pickup_date\",\n                className: \"form-label\",\n                children: \"Data e Ora Ritiro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"datetime-local\",\n                id: \"pickup_date\",\n                name: \"pickup_date\",\n                className: \"form-control\",\n                value: formData.pickup_date,\n                onChange: handleInputChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"expected_return_date\",\n                className: \"form-label\",\n                children: \"Data e Ora Riconsegna Prevista\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"datetime-local\",\n                id: \"expected_return_date\",\n                name: \"expected_return_date\",\n                className: \"form-control\",\n                value: formData.expected_return_date,\n                onChange: handleInputChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"pickup_location\",\n                className: \"form-label\",\n                children: \"Luogo Ritiro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"pickup_location\",\n                name: \"pickup_location\",\n                className: \"form-control\",\n                value: formData.pickup_location,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"pickup_fuel_level\",\n                className: \"form-label\",\n                children: \"Livello Carburante (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                id: \"pickup_fuel_level\",\n                name: \"pickup_fuel_level\",\n                className: \"form-control\",\n                value: formData.pickup_fuel_level,\n                onChange: handleInputChange,\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"pickup_damages\",\n              className: \"form-label\",\n              children: \"Danni Presenti al Ritiro\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"pickup_damages\",\n              name: \"pickup_damages\",\n              className: \"form-control\",\n              value: formData.pickup_damages,\n              onChange: handleInputChange,\n              rows: \"3\",\n              placeholder: \"Descrivi eventuali danni presenti...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"pickup_notes\",\n              className: \"form-label\",\n              children: \"Note Aggiuntive\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"pickup_notes\",\n              name: \"pickup_notes\",\n              className: \"form-control\",\n              value: formData.pickup_notes,\n              onChange: handleInputChange,\n              rows: \"3\",\n              placeholder: \"Note extra per il noleggio...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this);\n      case 4:\n        const total_days = moment(formData.expected_return_date).diff(moment(formData.pickup_date), 'days');\n        const calculated_pricing = calculatePricing(formData);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Riepilogo e Prezzi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Verifica i dettagli prima di creare il noleggio.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Giorni Totali:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 24\n                }, this), \" \", total_days, \" giorni\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Tariffa Giornaliera:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 24\n                }, this), \" \", formData.daily_rate, \" \\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Subtotale (Canone Base):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 24\n                }, this), \" \", calculated_pricing.subtotal.toFixed(2), \" \\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Deposito:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 24\n                }, this), \" \", formData.deposit_amount, \" \\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-right\",\n            children: [\"Totale Noleggio: \", calculated_pricing.total_amount.toFixed(2), \" \\u20AC\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this);\n      case 5:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Noleggio Creato!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-success\",\n            children: \"Il noleggio \\xE8 stato registrato con successo nel sistema.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CheckCircle, {\n            size: 48,\n            className: \"text-success my-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ora puoi procedere al caricamento delle foto del ritiro.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this);\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [/*#__PURE__*/_jsxDEV(Save, {\n        size: 24,\n        style: {\n          marginBottom: '4px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 11\n      }, this), \" Nuovo Noleggio\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header bg-primary text-white\",\n        children: [\"Passo \", currentStep, \" di 5: \", currentStep === 1 ? 'Cliente' : currentStep === 2 ? 'Veicolo' : currentStep === 3 ? 'Dettagli e Date' : currentStep === 4 ? 'Riepilogo Prezzi' : 'Completato']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), renderStep(), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-footer\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          children: [currentStep > 1 && currentStep < 5 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePrev,\n            className: \"btn btn-secondary\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 17\n            }, this), \"Indietro\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this), currentStep < 4 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNext,\n            className: \"btn btn-primary\",\n            style: {\n              marginLeft: currentStep > 1 ? '' : 'auto'\n            },\n            children: [\"Avanti\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 15\n          }, this), currentStep === 4 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNext,\n            className: \"btn btn-primary\",\n            disabled: loading,\n            style: {\n              marginLeft: 'auto'\n            },\n            children: loading ? 'Creazione...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 21\n              }, this), \"Crea Noleggio\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, this), currentStep === 5 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleFinish,\n            className: \"btn btn-success\",\n            style: {\n              marginLeft: 'auto'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 17\n            }, this), \"Completa\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 413,\n    columnNumber: 5\n  }, this);\n};\n_s(NewRental, \"5FPsA0sP0RSAFyUsioerafdsLw0=\", false, function () {\n  return [useNavigate];\n});\n_c = NewRental;\nexport default NewRental;\nvar _c;\n$RefreshReg$(_c, \"NewRental\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","rentalsAPI","customersAPI","vehiclesAPI","toast","PhotoUpload","ArrowLeft","ArrowRight","Save","User","Car","Calendar","Camera","CheckCircle","moment","jsxDEV","_jsxDEV","Fragment","_Fragment","calculatePricing","formData","dailyRate","parseFloat","daily_rate","pickupDate","pickup_date","returnDate","expected_return_date","isValid","isSameOrAfter","total_days","subtotal","total_amount","totalDays","diff","NewRental","_s","navigate","currentStep","setCurrentStep","loading","setLoading","customers","setCustomers","vehicles","setVehicles","categories","setCategories","setFormData","customer_id","vehicle_id","pickup_location","pickup_fuel_level","pickup_km","pickup_damages","pickup_notes","deposit_amount","loadInitialData","customersRes","vehiclesRes","Promise","all","getAll","status","data","error","console","handleInputChange","e","name","value","target","prev","handleSelectVehicle","vehicleId","selectedVehicle","find","v","id","parseInt","current_km","toString","handleNext","pricing","handleSubmit","handlePrev","dataToSend","response","create","success","_error$response","_error$response$data","errorMessage","message","handleFinish","renderStep","className","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","onChange","map","c","full_name","fiscal_code","vat_number","brand","model","license_plate","type","required","min","max","rows","placeholder","calculated_pricing","toFixed","size","style","marginBottom","onClick","marginLeft","disabled","_c","$RefreshReg$"],"sources":["D:/Bncrentcar/frontend/src/components/NewRental.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { rentalsAPI, customersAPI, vehiclesAPI } from '../services/api';\r\nimport toast from 'react-hot-toast';\r\nimport PhotoUpload from './PhotoUpload';\r\nimport { \r\n  ArrowLeft, \r\n  ArrowRight, \r\n  Save, \r\n  User, \r\n  Car, \r\n  Calendar,\r\n  Camera,\r\n  CheckCircle \r\n} from 'lucide-react';\r\n// Importa moment per la gestione delle date se non lo hai già\r\nimport moment from 'moment';\r\n\r\n// Funzione di calcolo dei prezzi (necessaria per i campi NOT NULL del DB)\r\nconst calculatePricing = (formData) => {\r\n    const dailyRate = parseFloat(formData.daily_rate) || 0;\r\n    const pickupDate = moment(formData.pickup_date);\r\n    const returnDate = moment(formData.expected_return_date);\r\n\r\n    if (!pickupDate.isValid() || !returnDate.isValid() || pickupDate.isSameOrAfter(returnDate)) {\r\n        return { total_days: 1, subtotal: dailyRate, total_amount: dailyRate };\r\n    }\r\n\r\n    // Calcola i giorni di noleggio\r\n    const totalDays = returnDate.diff(pickupDate, 'days');\r\n    \r\n    // Calcolo semplificato (solo canone base)\r\n    const subtotal = dailyRate * totalDays;\r\n    \r\n    // Si assume che il totale finale sia uguale al subtotal in questa fase di stima\r\n    // Aggiungere qui la logica per tasse, extra, sconti, ecc.\r\n    const total_amount = subtotal; \r\n\r\n    return { total_days: totalDays, subtotal: subtotal, total_amount: total_amount };\r\n};\r\n\r\nconst NewRental = () => {\r\n  const navigate = useNavigate();\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const [customers, setCustomers] = useState([]);\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  // Ho rimosso category_id dal formData visto che non esiste nel DB rentals\r\n  const [formData, setFormData] = useState({\r\n    // Step 1: Cliente\r\n    customer_id: '',\r\n    \r\n    // Step 2: Veicolo\r\n    vehicle_id: '',\r\n    // category_id: '', <--- Rimosso\r\n    \r\n    // Step 3: Date e dettagli\r\n    pickup_date: '',\r\n    expected_return_date: '',\r\n    pickup_location: 'BNC Energy Rent Car',\r\n    pickup_fuel_level: '100',\r\n    pickup_km: '',\r\n    pickup_damages: '',\r\n    pickup_notes: '', // Aggiunto per allinearsi al backend\r\n    \r\n    // Step 4: Tariffe (Questi devono essere popolati/calcolati prima dell'invio)\r\n    daily_rate: '',\r\n    deposit_amount: '0',\r\n    // total_days, subtotal, total_amount verranno calcolati in handleSubmit\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  const loadInitialData = async () => {\r\n    try {\r\n      // Caricamento clienti e veicoli disponibili\r\n      const [customersRes, vehiclesRes] = await Promise.all([\r\n        customersAPI.getAll(),\r\n        vehiclesAPI.getAll({ status: 'available' }),\r\n      ]);\r\n      setCustomers(customersRes.data.data.customers);\r\n      setVehicles(vehiclesRes.data.data.vehicles);\r\n    } catch (error) {\r\n      toast.error('Errore nel caricamento dei dati iniziali.');\r\n      console.error(error);\r\n    }\r\n  };\r\n  \r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n  \r\n  const handleSelectVehicle = (vehicleId) => {\r\n    const selectedVehicle = vehicles.find(v => v.id === parseInt(vehicleId));\r\n    if (selectedVehicle) {\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            vehicle_id: vehicleId,\r\n            pickup_km: selectedVehicle.current_km.toString(),\r\n            daily_rate: selectedVehicle.daily_rate.toString(),\r\n            // category_id: selectedVehicle.category_id.toString(), // Non lo usiamo nel rentals DB\r\n        }));\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    let isValid = true;\r\n    switch (currentStep) {\r\n        case 1: // Cliente\r\n            if (!formData.customer_id) {\r\n                toast.error(\"Seleziona un cliente.\");\r\n                isValid = false;\r\n            }\r\n            break;\r\n        case 2: // Veicolo\r\n            if (!formData.vehicle_id || !formData.pickup_km) {\r\n                toast.error(\"Seleziona un veicolo e inserisci il KM di ritiro.\");\r\n                isValid = false;\r\n            }\r\n            break;\r\n        case 3: // Date e Dettagli\r\n            const pricing = calculatePricing(formData);\r\n            if (!formData.pickup_date || !formData.expected_return_date || pricing.total_days <= 0) {\r\n                toast.error(\"Le date di ritiro e riconsegna sono obbligatorie e devono essere valide.\");\r\n                isValid = false;\r\n            } else if (!formData.pickup_location || !formData.pickup_fuel_level) {\r\n                toast.error(\"Inserisci tutti i dettagli di ritiro.\");\r\n                isValid = false;\r\n            }\r\n            // Aggiorna formData con i prezzi calcolati prima di passare al riepilogo\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                total_days: pricing.total_days.toString(),\r\n                subtotal: pricing.subtotal.toString(),\r\n                total_amount: pricing.total_amount.toString(),\r\n            }));\r\n            break;\r\n        case 4: // Riepilogo/Prezzo (Qui handleNext chiama handleSubmit)\r\n            // Se è l'ultimo step, gestiamo l'invio\r\n            return handleSubmit();\r\n        default:\r\n            break;\r\n    }\r\n\r\n    if (isValid) {\r\n      setCurrentStep(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handlePrev = () => {\r\n    setCurrentStep(prev => prev - 1);\r\n  };\r\n  \r\n  const handleSubmit = async () => {\r\n    setLoading(true);\r\n    \r\n    // Ricrea l'oggetto dati assicurandoti che i campi numerici siano numeri/stringhe valide\r\n    const dataToSend = {\r\n        ...formData,\r\n        // CORREZIONE: Assicurati che i campi NOT NULL siano numeri/stringhe valide\r\n        daily_rate: parseFloat(formData.daily_rate),\r\n        deposit_amount: parseFloat(formData.deposit_amount),\r\n        pickup_km: parseInt(formData.pickup_km),\r\n        total_days: parseInt(formData.total_days),\r\n        subtotal: parseFloat(formData.subtotal),\r\n        total_amount: parseFloat(formData.total_amount),\r\n    };\r\n    \r\n    try {\r\n      // 4. CORREZIONE: Invia i dati corretti al backend\r\n      const response = await rentalsAPI.create(dataToSend);\r\n      toast.success('Noleggio creato con successo!');\r\n      \r\n      // Passa al passo finale (es. caricamento foto)\r\n      setCurrentStep(5); \r\n      // Opzionalmente, salva l'ID del nuovo noleggio per il passo 5 (caricamento foto)\r\n      // setFormData(prev => ({ ...prev, rental_id: response.data.data.id }));\r\n      \r\n    } catch (error) {\r\n        console.error('Errore creazione noleggio:', error);\r\n        const errorMessage = error.response?.data?.message || 'Si è verificato un errore durante la creazione del noleggio.';\r\n        toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFinish = () => {\r\n    // Naviga al dettaglio del noleggio appena creato o alla lista\r\n    navigate('/rentals');\r\n  };\r\n\r\n  const renderStep = () => {\r\n    switch (currentStep) {\r\n      case 1:\r\n        return (\r\n          <div className=\"card-body\">\r\n            <h3>Seleziona Cliente</h3>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"customer_id\" className=\"form-label\">Cliente</label>\r\n              <select\r\n                id=\"customer_id\"\r\n                name=\"customer_id\"\r\n                className=\"form-control\"\r\n                value={formData.customer_id}\r\n                onChange={handleInputChange}\r\n              >\r\n                <option value=\"\">Seleziona un cliente</option>\r\n                {customers.map(c => (\r\n                  <option key={c.id} value={c.id}>\r\n                    {c.full_name} ({c.fiscal_code || c.vat_number})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            {/* Qui potresti mostrare un riepilogo del cliente selezionato */}\r\n          </div>\r\n        );\r\n      case 2:\r\n        return (\r\n          <div className=\"card-body\">\r\n            <h3>Seleziona Veicolo</h3>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"vehicle_id\" className=\"form-label\">Veicolo Disponibile</label>\r\n              <select\r\n                id=\"vehicle_id\"\r\n                name=\"vehicle_id\"\r\n                className=\"form-control\"\r\n                value={formData.vehicle_id}\r\n                onChange={(e) => handleSelectVehicle(e.target.value)}\r\n              >\r\n                <option value=\"\">Seleziona un veicolo</option>\r\n                {vehicles.map(v => (\r\n                  <option key={v.id} value={v.id}>\r\n                    {v.brand} {v.model} ({v.license_plate}) - {v.current_km} km\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {formData.vehicle_id && (\r\n              <>\r\n                <div className=\"form-group mt-3\">\r\n                    <label htmlFor=\"daily_rate\" className=\"form-label\">Tariffa Giornaliera</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"daily_rate\"\r\n                        name=\"daily_rate\"\r\n                        className=\"form-control\"\r\n                        value={formData.daily_rate}\r\n                        onChange={handleInputChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"form-group mt-3\">\r\n                  <label htmlFor=\"pickup_km\" className=\"form-label\">KM al Ritiro</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    id=\"pickup_km\"\r\n                    name=\"pickup_km\"\r\n                    className=\"form-control\"\r\n                    value={formData.pickup_km}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                  />\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        );\r\n      case 3:\r\n        return (\r\n          <div className=\"card-body\">\r\n            <h3>Dettagli Ritiro e Riconsegna</h3>\r\n            \r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 form-group\">\r\n                <label htmlFor=\"pickup_date\" className=\"form-label\">Data e Ora Ritiro</label>\r\n                <input\r\n                  type=\"datetime-local\"\r\n                  id=\"pickup_date\"\r\n                  name=\"pickup_date\"\r\n                  className=\"form-control\"\r\n                  value={formData.pickup_date}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"col-md-6 form-group\">\r\n                <label htmlFor=\"expected_return_date\" className=\"form-label\">Data e Ora Riconsegna Prevista</label>\r\n                <input\r\n                  type=\"datetime-local\"\r\n                  id=\"expected_return_date\"\r\n                  name=\"expected_return_date\"\r\n                  className=\"form-control\"\r\n                  value={formData.expected_return_date}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row mt-3\">\r\n              <div className=\"col-md-6 form-group\">\r\n                <label htmlFor=\"pickup_location\" className=\"form-label\">Luogo Ritiro</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"pickup_location\"\r\n                  name=\"pickup_location\"\r\n                  className=\"form-control\"\r\n                  value={formData.pickup_location}\r\n                  onChange={handleInputChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-6 form-group\">\r\n                <label htmlFor=\"pickup_fuel_level\" className=\"form-label\">Livello Carburante (%)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"pickup_fuel_level\"\r\n                  name=\"pickup_fuel_level\"\r\n                  className=\"form-control\"\r\n                  value={formData.pickup_fuel_level}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  max=\"100\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"form-group mt-3\">\r\n              <label htmlFor=\"pickup_damages\" className=\"form-label\">Danni Presenti al Ritiro</label>\r\n              <textarea\r\n                id=\"pickup_damages\"\r\n                name=\"pickup_damages\"\r\n                className=\"form-control\"\r\n                value={formData.pickup_damages}\r\n                onChange={handleInputChange}\r\n                rows=\"3\"\r\n                placeholder=\"Descrivi eventuali danni presenti...\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group mt-3\">\r\n              <label htmlFor=\"pickup_notes\" className=\"form-label\">Note Aggiuntive</label>\r\n              <textarea\r\n                id=\"pickup_notes\"\r\n                name=\"pickup_notes\"\r\n                className=\"form-control\"\r\n                value={formData.pickup_notes}\r\n                onChange={handleInputChange}\r\n                rows=\"3\"\r\n                placeholder=\"Note extra per il noleggio...\"\r\n              />\r\n            </div>\r\n\r\n          </div>\r\n        );\r\n      case 4:\r\n        const total_days = moment(formData.expected_return_date).diff(moment(formData.pickup_date), 'days');\r\n        const calculated_pricing = calculatePricing(formData);\r\n        \r\n        return (\r\n          <div className=\"card-body\">\r\n            <h3>Riepilogo e Prezzi</h3>\r\n            <p>Verifica i dettagli prima di creare il noleggio.</p>\r\n            \r\n            <div className=\"row mb-3\">\r\n                <div className=\"col-md-6\">\r\n                    <p><strong>Giorni Totali:</strong> {total_days} giorni</p>\r\n                    <p><strong>Tariffa Giornaliera:</strong> {formData.daily_rate} €</p>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <p><strong>Subtotale (Canone Base):</strong> {calculated_pricing.subtotal.toFixed(2)} €</p>\r\n                    <p><strong>Deposito:</strong> {formData.deposit_amount} €</p>\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Aggiungi qui la sezione per gestire extra, sconti, ecc. */}\r\n\r\n            <hr/>\r\n            <h4 className=\"text-right\">Totale Noleggio: {calculated_pricing.total_amount.toFixed(2)} €</h4>\r\n            <hr/>\r\n          </div>\r\n        );\r\n      case 5:\r\n        return (\r\n          <div className=\"card-body text-center\">\r\n            <h3>Noleggio Creato!</h3>\r\n            <p className=\"text-success\">Il noleggio è stato registrato con successo nel sistema.</p>\r\n            <CheckCircle size={48} className=\"text-success my-4\" />\r\n            <p>Ora puoi procedere al caricamento delle foto del ritiro.</p>\r\n            \r\n            {/* Se hai l'ID del noleggio lo passi qui */}\r\n            {/* <PhotoUpload \r\n                rentalId={formData.rental_id} \r\n                type=\"pickup\"\r\n                title=\"Foto Ritiro\"\r\n            /> */}\r\n          </div>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2><Save size={24} style={{ marginBottom: '4px' }}/> Nuovo Noleggio</h2>\r\n      <div className=\"card shadow-sm\">\r\n        <div className=\"card-header bg-primary text-white\">\r\n          Passo {currentStep} di 5: {\r\n            currentStep === 1 ? 'Cliente' :\r\n            currentStep === 2 ? 'Veicolo' :\r\n            currentStep === 3 ? 'Dettagli e Date' :\r\n            currentStep === 4 ? 'Riepilogo Prezzi' :\r\n            'Completato'\r\n          }\r\n        </div>\r\n        \r\n        {renderStep()}\r\n        \r\n        <div className=\"card-footer\">\r\n          <div className=\"d-flex justify-content-between\">\r\n            {currentStep > 1 && currentStep < 5 && (\r\n              <button\r\n                onClick={handlePrev}\r\n                className=\"btn btn-secondary\"\r\n              >\r\n                <ArrowLeft size={18} />\r\n                Indietro\r\n              </button>\r\n            )}\r\n            \r\n            {currentStep < 4 && (\r\n              <button\r\n                onClick={handleNext}\r\n                className=\"btn btn-primary\"\r\n                style={{ marginLeft: currentStep > 1 ? '' : 'auto' }}\r\n              >\r\n                Avanti\r\n                <ArrowRight size={18} />\r\n              </button>\r\n            )}\r\n            \r\n            {currentStep === 4 && (\r\n              <button\r\n                onClick={handleNext}\r\n                className=\"btn btn-primary\"\r\n                disabled={loading}\r\n                style={{ marginLeft: 'auto' }}\r\n              >\r\n                {loading ? 'Creazione...' : (\r\n                  <>\r\n                    <Save size={18} />\r\n                    Crea Noleggio\r\n                  </>\r\n                )}\r\n              </button>\r\n            )}\r\n            \r\n            {currentStep === 5 && (\r\n              <button\r\n                onClick={handleFinish}\r\n                className=\"btn btn-success\"\r\n                style={{ marginLeft: 'auto' }}\r\n              >\r\n                <CheckCircle size={18} />\r\n                Completa\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewRental;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}